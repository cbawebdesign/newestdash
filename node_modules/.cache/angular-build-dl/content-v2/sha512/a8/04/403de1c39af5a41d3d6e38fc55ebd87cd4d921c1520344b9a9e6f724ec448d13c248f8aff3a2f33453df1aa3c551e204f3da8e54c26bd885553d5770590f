(function () {
  function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

  function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }

  function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }

  function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

  function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

  function _iterableToArrayLimit(arr, i) { if (typeof Symbol === "undefined" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"] != null) _i["return"](); } finally { if (_d) throw _e; } } return _arr; }

  function _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }

  function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

  function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }

  function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }

  function _possibleConstructorReturn(self, call) { if (call && (typeof call === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

  function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

  function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

  function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

  function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

  function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

  function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

  (window["webpackJsonp"] = window["webpackJsonp"] || []).push([["pages-chat-chat-module"], {
    /***/
    "/bc2":
    /*!**************************************************!*\
      !*** ./wizdm/src/app/navigator/toolbar/index.ts ***!
      \**************************************************/

    /*! exports provided: ToolbarDirective, ToolbarModule */

    /***/
    function bc2(module, __webpack_exports__, __webpack_require__) {
      "use strict";

      __webpack_require__.r(__webpack_exports__);
      /* harmony import */


      var _toolbar_directive__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(
      /*! ./toolbar.directive */
      "VEY1");
      /* harmony reexport (safe) */


      __webpack_require__.d(__webpack_exports__, "ToolbarDirective", function () {
        return _toolbar_directive__WEBPACK_IMPORTED_MODULE_0__["ToolbarDirective"];
      });
      /* harmony import */


      var _toolbar_module__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(
      /*! ./toolbar.module */
      "0FCv");
      /* harmony reexport (safe) */


      __webpack_require__.d(__webpack_exports__, "ToolbarModule", function () {
        return _toolbar_module__WEBPACK_IMPORTED_MODULE_1__["ToolbarModule"];
      });
      /***/

    },

    /***/
    "0FCv":
    /*!***********************************************************!*\
      !*** ./wizdm/src/app/navigator/toolbar/toolbar.module.ts ***!
      \***********************************************************/

    /*! exports provided: ToolbarModule */

    /***/
    function FCv(module, __webpack_exports__, __webpack_require__) {
      "use strict";

      __webpack_require__.r(__webpack_exports__);
      /* harmony export (binding) */


      __webpack_require__.d(__webpack_exports__, "ToolbarModule", function () {
        return ToolbarModule;
      });
      /* harmony import */


      var _toolbar_directive__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(
      /*! ./toolbar.directive */
      "VEY1");
      /* harmony import */


      var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(
      /*! @angular/core */
      "8Y7J");

      var ToolbarModule = function ToolbarModule() {
        _classCallCheck(this, ToolbarModule);
      };

      ToolbarModule.ɵmod = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdefineNgModule"]({
        type: ToolbarModule
      });
      ToolbarModule.ɵinj = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdefineInjector"]({
        factory: function ToolbarModule_Factory(t) {
          return new (t || ToolbarModule)();
        }
      });

      (function () {
        (typeof ngJitMode === "undefined" || ngJitMode) && _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵsetNgModuleScope"](ToolbarModule, {
          declarations: [_toolbar_directive__WEBPACK_IMPORTED_MODULE_0__["ToolbarDirective"]],
          exports: [_toolbar_directive__WEBPACK_IMPORTED_MODULE_0__["ToolbarDirective"]]
        });
      })();
      /***/

    },

    /***/
    "0Usy":
    /*!*******************************************************************!*\
      !*** ./wizdm/src/app/navigator/footer/sticky-footer.directive.ts ***!
      \*******************************************************************/

    /*! exports provided: StickyFooterDirective */

    /***/
    function Usy(module, __webpack_exports__, __webpack_require__) {
      "use strict";

      __webpack_require__.r(__webpack_exports__);
      /* harmony export (binding) */


      __webpack_require__.d(__webpack_exports__, "StickyFooterDirective", function () {
        return StickyFooterDirective;
      });
      /* harmony import */


      var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(
      /*! @angular/core */
      "8Y7J");
      /* harmony import */


      var _wizdm_teleport__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(
      /*! @wizdm/teleport */
      "EiPp");

      var StickyFooterDirective = /*#__PURE__*/function () {
        function StickyFooterDirective(teleport, template) {
          _classCallCheck(this, StickyFooterDirective);

          this.teleport = teleport;
          this.template = template;
        } // Teleports the template to the 'footer' portal


        _createClass(StickyFooterDirective, [{
          key: "ngOnInit",
          value: function ngOnInit() {
            this.teleport.activate('footer', this.template);
          } // Clears the 'footer' portal

        }, {
          key: "ngOnDestroy",
          value: function ngOnDestroy() {
            this.teleport.clear('footer', this.template);
          }
        }]);

        return StickyFooterDirective;
      }();

      StickyFooterDirective.ɵfac = function StickyFooterDirective_Factory(t) {
        return new (t || StickyFooterDirective)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_wizdm_teleport__WEBPACK_IMPORTED_MODULE_1__["TeleportService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["TemplateRef"]));
      };

      StickyFooterDirective.ɵdir = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineDirective"]({
        type: StickyFooterDirective,
        selectors: [["ng-template", "wmFooter", ""]]
      });
      /***/
    },

    /***/
    "337Q":
    /*!*****************************************************!*\
      !*** ./wizdm/src/app/pages/chat/chat.animations.ts ***!
      \*****************************************************/

    /*! exports provided: $animations */

    /***/
    function Q(module, __webpack_exports__, __webpack_require__) {
      "use strict";

      __webpack_require__.r(__webpack_exports__);
      /* harmony export (binding) */


      __webpack_require__.d(__webpack_exports__, "$animations", function () {
        return $animations;
      });
      /* harmony import */


      var _angular_animations__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(
      /*! @angular/animations */
      "GS7A");

      var $timing = '450ms cubic-bezier(0.8, -0.5, 0.2, 1.5)';
      var $animations = [Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["trigger"])('pop', [Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["transition"])(':enter', [Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({
        transform: 'scale(0.5)',
        opacity: 0
      }), Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["animate"])($timing, Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])('*'))]), Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["transition"])(':leave', Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["animate"])($timing, Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({
        transform: 'scale(0.5)',
        opacity: 0
      })))])];
      /***/
    },

    /***/
    "7ZfP":
    /*!****************************************************!*\
      !*** ./wizdm/src/app/pages/chat/composer/index.ts ***!
      \****************************************************/

    /*! exports provided: MessageComposer, ComposerModule */

    /***/
    function ZfP(module, __webpack_exports__, __webpack_require__) {
      "use strict";

      __webpack_require__.r(__webpack_exports__);
      /* harmony import */


      var _composer_component__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(
      /*! ./composer.component */
      "SsNK");
      /* harmony reexport (safe) */


      __webpack_require__.d(__webpack_exports__, "MessageComposer", function () {
        return _composer_component__WEBPACK_IMPORTED_MODULE_0__["MessageComposer"];
      });
      /* harmony import */


      var _composer_module__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(
      /*! ./composer.module */
      "bleV");
      /* harmony reexport (safe) */


      __webpack_require__.d(__webpack_exports__, "ComposerModule", function () {
        return _composer_module__WEBPACK_IMPORTED_MODULE_1__["ComposerModule"];
      });
      /***/

    },

    /***/
    "9iaN":
    /*!*************************************************!*\
      !*** ./wizdm/src/app/navigator/footer/index.ts ***!
      \*************************************************/

    /*! exports provided: FooterComponent, FooterModule, StickyFooterDirective, StickyFooterModule */

    /***/
    function iaN(module, __webpack_exports__, __webpack_require__) {
      "use strict";

      __webpack_require__.r(__webpack_exports__);
      /* harmony import */


      var _footer_component__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(
      /*! ./footer.component */
      "3wf5");
      /* harmony reexport (safe) */


      __webpack_require__.d(__webpack_exports__, "FooterComponent", function () {
        return _footer_component__WEBPACK_IMPORTED_MODULE_0__["FooterComponent"];
      });
      /* harmony import */


      var _footer_module__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(
      /*! ./footer.module */
      "A8Sn");
      /* harmony reexport (safe) */


      __webpack_require__.d(__webpack_exports__, "FooterModule", function () {
        return _footer_module__WEBPACK_IMPORTED_MODULE_1__["FooterModule"];
      });
      /* harmony import */


      var _sticky_footer_directive__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(
      /*! ./sticky-footer.directive */
      "0Usy");
      /* harmony reexport (safe) */


      __webpack_require__.d(__webpack_exports__, "StickyFooterDirective", function () {
        return _sticky_footer_directive__WEBPACK_IMPORTED_MODULE_2__["StickyFooterDirective"];
      });
      /* harmony import */


      var _sticky_footer_module__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(
      /*! ./sticky-footer.module */
      "qjJl");
      /* harmony reexport (safe) */


      __webpack_require__.d(__webpack_exports__, "StickyFooterModule", function () {
        return _sticky_footer_module__WEBPACK_IMPORTED_MODULE_3__["StickyFooterModule"];
      });
      /***/

    },

    /***/
    "A+Un":
    /*!*************************************************************************!*\
      !*** ./wizdm/src/app/pages/chat/conversation/conversation.component.ts ***!
      \*************************************************************************/

    /*! exports provided: Conversation */

    /***/
    function AUn(module, __webpack_exports__, __webpack_require__) {
      "use strict";

      __webpack_require__.r(__webpack_exports__);
      /* harmony export (binding) */


      __webpack_require__.d(__webpack_exports__, "Conversation", function () {
        return Conversation;
      });
      /* harmony import */


      var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(
      /*! @angular/core */
      "8Y7J");
      /* harmony import */


      var _wizdm_connect_database_collection_operators__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(
      /*! @wizdm/connect/database/collection/operators */
      "wSf6");
      /* harmony import */


      var rxjs_operators__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(
      /*! rxjs/operators */
      "kU1M");
      /* harmony import */


      var _wizdm_connect_database__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(
      /*! @wizdm/connect/database */
      "eYWy");
      /* harmony import */


      var _wizdm_connect_database_document__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(
      /*! @wizdm/connect/database/document */
      "1Blm");
      /* harmony import */


      var app_utils_user__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(
      /*! app/utils/user */
      "lWmb");
      /* harmony import */


      var _angular_material_menu__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(
      /*! @angular/material/menu */
      "rJgo");
      /* harmony import */


      var _angular_material_button__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(
      /*! @angular/material/button */
      "Dxy4");
      /* harmony import */


      var _angular_router__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(
      /*! @angular/router */
      "iInd");
      /* harmony import */


      var _content_src_lib_streamer_content_directive__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(
      /*! ../../../../../../content/src/lib/streamer/content.directive */
      "Qfjl");
      /* harmony import */


      var _angular_flex_layout_flex__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(
      /*! @angular/flex-layout/flex */
      "VDRc");
      /* harmony import */


      var _angular_material_badge__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(
      /*! @angular/material/badge */
      "8Qe2");
      /* harmony import */


      var _elements_src_lib_avatar_avatar_component__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(
      /*! ../../../../../../elements/src/lib/avatar/avatar.component */
      "a/j4");
      /* harmony import */


      var _angular_common__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(
      /*! @angular/common */
      "SVse");
      /* harmony import */


      var _angular_material_progress_bar__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(
      /*! @angular/material/progress-bar */
      "BTe0");
      /* harmony import */


      var _emoji_src_lib_text_emoji_text_component__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(
      /*! ../../../../../../emoji/src/lib/text/emoji-text.component */
      "xS4v");
      /* harmony import */


      var _angular_material_icon__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(
      /*! @angular/material/icon */
      "Tj54");
      /* harmony import */


      var _elements_src_lib_dialog_dialog_component__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(
      /*! ../../../../../../elements/src/lib/dialog/dialog.component */
      "7/R1");
      /* harmony import */


      var _angular_material_dialog__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(
      /*! @angular/material/dialog */
      "iELJ");
      /* harmony import */


      var _readme_src_lib_readme_component__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(
      /*! ../../../../../../readme/src/lib/readme.component */
      "n8oj");
      /* harmony import */


      var _pipes_src_lib_moment_moment_pipe__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(
      /*! ../../../../../../pipes/src/lib/moment/moment.pipe */
      "cpjW");
      /* harmony import */


      var _connect_src_lib_database_pipes_pipes_pipe__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(
      /*! ../../../../../../connect/src/lib/database/pipes/pipes.pipe */
      "DuEg");

      function Conversation_div_2_ng_template_19_Template(rf, ctx) {
        if (rf & 1) {
          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](0, "mat-progress-bar", 11);
        }
      }

      function Conversation_div_2_div_21_Template(rf, ctx) {
        if (rf & 1) {
          var _r9 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 12);

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](1, "div", 13);

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](2, "async");

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](3, "async");

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](4, "async");

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](5, "mat-icon", 14);

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function Conversation_div_2_div_21_Template_mat_icon_click_5_listener($event) {
            return $event.stopPropagation();
          });

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](6, "expand_more");

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](7, "mat-menu", null, 15);

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](9, "button", 16);

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](10, "async");

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](11);

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](12, "button", 17);

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function Conversation_div_2_div_21_Template_button_click_12_listener() {
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r9);

            var _r6 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵreference"](15);

            return _r6.open();
          });

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](13);

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](14, "wm-dialog", 18, 19);

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("closedChange", function Conversation_div_2_div_21_Template_wm_dialog_closedChange_14_listener($event) {
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r9);

            var ctx_r10 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);

            return $event && ctx_r10["delete"]();
          });

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](16, "h2", 20);

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](17, "b");

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](18);

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](19, "mat-dialog-content", 21);

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](20, " You're about to ");

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](21, "b");

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](22, "delete");

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](23, " this conversation.");

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](24, "br");

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](25, "Are you sure? ");

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](26, "mat-dialog-actions", 22);

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](27, "button", 23);

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](28);

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](29, "button", 24);

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](30);

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        }

        if (rf & 2) {
          var _r5 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵreference"](8);

          var msgs_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]().$implicit;

          var ctx_r4 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();

          var tmp_2_0 = null;
          var tmp_4_0 = null;

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵclassProp"]("unread", ctx_r4.showUnread && _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](2, 15, ctx_r4.unread$) > 0)("skeleton-loading", !_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](3, 17, ctx_r4.sender$));

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("wm-emoji-text", (tmp_2_0 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](4, 19, ctx_r4.last$)) == null ? null : tmp_2_0.body);

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](4);

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("matMenuTriggerFor", _r5);

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](4);

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpropertyInterpolate1"]("routerLink", "/@", (tmp_4_0 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](10, 21, ctx_r4.sender$)) == null ? null : tmp_4_0.userName, "");

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate"]((msgs_r1.info == null ? null : msgs_r1.info.label) || "Contact info");

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate"]((msgs_r1["delete"] == null ? null : msgs_r1["delete"].label) || "Delete chat");

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](5);

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate"]((msgs_r1.confirmDelete == null ? null : msgs_r1.confirmDelete.title) || "Deleting chat");

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("wm-readme", msgs_r1.confirmDelete == null ? null : msgs_r1.confirmDelete.message);

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](8);

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("mat-dialog-close", false);

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate"]((msgs_r1.confirmDelete == null ? null : msgs_r1.confirmDelete.cancel) || "Abort");

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("mat-dialog-close", true);

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate"]((msgs_r1.confirmDelete == null ? null : msgs_r1.confirmDelete.ok) || "Proceed");
        }
      }

      var _c0 = function _c0() {
        return {
          sameDay: "LT",
          lastDay: "[Yesterday]",
          lastWeek: "dddd",
          sameElse: "L"
        };
      };

      function Conversation_div_2_Template(rf, ctx) {
        if (rf & 1) {
          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 2);

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "div", 3);

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](2, "async");

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](3, "async");

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](4, "wm-avatar", 4);

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](5, "async");

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](6, "async");

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](7, "div", 5);

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](8, "div", 6);

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](9, "div", 7);

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](10, "async");

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](11);

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](12, "async");

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](13, "async");

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](14, "time", 8);

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](15);

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](16, "calendar");

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](17, "updatedTime");

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](18, "async");

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](19, Conversation_div_2_ng_template_19_Template, 1, 0, "ng-template", null, 9, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](21, Conversation_div_2_div_21_Template, 31, 23, "div", 10);

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        }

        if (rf & 2) {
          var msgs_r1 = ctx.$implicit;

          var _r2 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵreference"](20);

          var ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();

          var tmp_3_0 = null;

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("matBadge", ctx_r0.unreadCount(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](2, 11, ctx_r0.unread$)))("matBadgeHidden", !ctx_r0.showUnread || _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](3, 13, ctx_r0.unread$) <= 0);

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵclassProp"]("skeleton-loading", !_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](5, 15, ctx_r0.sender$));

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("src", (tmp_3_0 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](6, 17, ctx_r0.sender$)) == null ? null : tmp_3_0.photo);

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](5);

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵclassProp"]("skeleton-loading", !_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](10, 19, ctx_r0.sender$));

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](12, 21, ctx_r0.sender$) ? _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](13, 23, ctx_r0.sender$).fullName || msgs_r1.unknownUser || "Unknown user" : "");

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](4);

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind2"](16, 25, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](17, 28, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](18, 30, ctx_r0.last$) || ctx_r0.data), msgs_r1.timeFormat || _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction0"](32, _c0)));

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](6);

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", !ctx_r0.deleting)("ngIfElse", _r2);
        }
      }

      var _c1 = function _c1(a0) {
        return {
          "with": a0
        };
      };

      var Conversation = /*#__PURE__*/function (_wizdm_connect_databa) {
        _inherits(Conversation, _wizdm_connect_databa);

        var _super = _createSuper(Conversation);

        function Conversation(db, user) {
          var _this;

          _classCallCheck(this, Conversation);

          _this = _super.call(this, db);
          _this.user = user;
          _this._deleting = false;
          _this.deletingChange = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
          return _this;
        }
        /** The conversation id */


        _createClass(Conversation, [{
          key: "id",
          get: function get() {
            return this.data.id;
          }
          /** The current user's id */

        }, {
          key: "me",
          get: function get() {
            return this.user.uid;
          }
        }, {
          key: "deleting",
          get: function get() {
            return this._deleting;
          }
          /** Computes the unknown user id appending the conversation id */

        }, {
          key: "unknownUser",
          get: function get() {
            return "unknown-".concat(this.data.id || '0');
          }
          /** Returns the unread count label */

        }, {
          key: "unreadCount",
          value: function unreadCount(value) {
            return value > 10 ? '10+' : value === null || value === void 0 ? void 0 : value.toString();
          }
        }, {
          key: "content",
          set: function set(conv) {
            var _this2 = this;

            var _a; // Skips useless changes


            if (conv && conv.id === ((_a = this.ref) === null || _a === void 0 ? void 0 : _a.id)) {
              return;
            } // Unwraps the document data from the snapshot


            this.data = this.unwrap(conv); // Streams new data as an observable

            this.data$ = this.stream().pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_2__["startWith"])(this.data), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_2__["shareReplay"])(1)); // The conversation's messages thread

            this.thread$ = this.collection('messages'); // Assumes the sender being the first recipient differing from the current user

            var senderId = this.data.recipients.find(function (id) {
              return id !== _this2.me;
            }) || 'unknown'; // Resolves the sender user profile falling back to an unknown userName including the conversation id

            this.sender$ = this.user.fromUserId(senderId).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_2__["map"])(function (data) {
              return data || {
                userName: _this2.unknownUser
              };
            })); // Resolves the last message in the thread

            this.last$ = this.thread$.stream(function (qf) {
              return qf.orderBy('created').limitToLast(1);
            }).pipe( // Gets the last message
            Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_2__["map"])(function (msgs) {
              return msgs[0];
            }), // Shares the same result to multiple subscribers
            Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_2__["shareReplay"])(1)); // Resolves the unread messages count up to 10+ unread messages

            this.unread$ = this.data$.pipe( // Streams the conversation data getting the user's specific lastRead timestamp that will be used as a cursor
            Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_2__["map"])(function (data) {
              var _a, _b;

              return (_b = (_a = data === null || data === void 0 ? void 0 : data.status) === null || _a === void 0 ? void 0 : _a[_this2.me]) === null || _b === void 0 ? void 0 : _b.lastRead;
            }), // Filters unchanged values
            Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_2__["distinctUntilChanged"])(function (x, y) {
              return !!x && !!y && x.isEqual(y);
            }), // Streams the messages...
            Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_2__["switchMap"])(function (lastRead) {
              return _this2.thread$.pipe( // Selects sender messages after the lastRead timestamp up to 11 messages
              Object(_wizdm_connect_database_collection_operators__WEBPACK_IMPORTED_MODULE_1__["where"])('sender', '==', senderId), Object(_wizdm_connect_database_collection_operators__WEBPACK_IMPORTED_MODULE_1__["orderBy"])('created'), Object(_wizdm_connect_database_collection_operators__WEBPACK_IMPORTED_MODULE_1__["startAfter"])(lastRead), Object(_wizdm_connect_database_collection_operators__WEBPACK_IMPORTED_MODULE_1__["limit"])(11), Object(_wizdm_connect_database_collection_operators__WEBPACK_IMPORTED_MODULE_1__["stream"])(_this2.db.zone), // Turns the results lenght into the unread counter
              Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_2__["map"])(function (msgs) {
                return msgs.length;
              }), // Shares the same result to all subscribers
              Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_2__["shareReplay"])(1));
            }));
          }
        }, {
          key: "delete",
          value: function _delete() {
            var _this3 = this;

            // Notifies the beginning of the process.
            this.deletingChange.emit(this._deleting = true); // Starts by wiping messages in batches of 100

            return this.thread$.wipe(function (qf) {
              return qf.where('sender', '==', _this3.me).limit(100);
            }).then(function (count) {
              console.log('Messages deleted', count); // Atomically remove my id from the recipients array

              return _this3.update({
                recipients: _this3.db.arrayRemove(_this3.me)
              }).then(function () {
                // Attempts to delete the conversation within a transaction
                return _this3.db.transaction(function (trx) {
                  // Gets the conversartion data first
                  return trx.get(_this3.ref).then(function (data) {
                    var _a; // Deletes the conversation whenever the recipients array is empty


                    if (((_a = data === null || data === void 0 ? void 0 : data.recipients) === null || _a === void 0 ? void 0 : _a.length) <= 0) {
                      trx["delete"](_this3.ref);
                    }
                  });
                });
              }); // At last, reports the deletion completed
            }).then(function () {
              return _this3.deletingChange.emit(_this3._deleting = false);
            });
          }
        }, {
          key: "onContextMenu",
          value: function onContextMenu() {
            var _a; // Opens the menu on contextmenu event  


            (_a = this.menuTrigger) === null || _a === void 0 ? void 0 : _a.openMenu(); // Prevents default

            return false;
          }
        }]);

        return Conversation;
      }(_wizdm_connect_database_document__WEBPACK_IMPORTED_MODULE_4__["DatabaseDocument"]);

      Conversation.ɵfac = function Conversation_Factory(t) {
        return new (t || Conversation)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_wizdm_connect_database__WEBPACK_IMPORTED_MODULE_3__["DatabaseService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](app_utils_user__WEBPACK_IMPORTED_MODULE_5__["UserProfile"]));
      };

      Conversation.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineComponent"]({
        type: Conversation,
        selectors: [["wm-conversation"]],
        viewQuery: function Conversation_Query(rf, ctx) {
          if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵviewQuery"](_angular_material_menu__WEBPACK_IMPORTED_MODULE_6__["MatMenuTrigger"], 1);
          }

          if (rf & 2) {
            var _t;

            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵloadQuery"]()) && (ctx.menuTrigger = _t.first);
          }
        },
        hostVars: 2,
        hostBindings: function Conversation_HostBindings(rf, ctx) {
          if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("contextmenu", function Conversation_contextmenu_HostBindingHandler() {
              return ctx.onContextMenu();
            });
          }

          if (rf & 2) {
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵattribute"]("selected", ctx.highlight)("color", ctx.color);
          }
        },
        inputs: {
          highlight: "highlight",
          color: "color",
          showUnread: "showUnread",
          content: "content"
        },
        outputs: {
          deletingChange: "deleting"
        },
        features: [_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵInheritDefinitionFeature"]],
        decls: 3,
        vars: 6,
        consts: [["mat-button", "", "routerLink", ".", 3, "queryParams"], ["fxLayout", "row", "fxLayoutAlign", "start center", 4, "wmContent", "wmContentSelect"], ["fxLayout", "row", "fxLayoutAlign", "start center"], ["fxFlex", "0 0 auto", "matBadgeSize", "small", 3, "matBadge", "matBadgeHidden"], ["color", "primary", 3, "src"], ["fxFlex", "1 1 auto", "fxLayout", "column", "fxLayoutAlign", "start stretch", 1, "content"], ["fxLayout", "row", "fxLayoutGap", "8px"], ["fxFlex", "1 1 auto", 1, "name", "mat-title", "text"], ["fxFlex", "0 0 auto", 1, "time", "mat-small"], ["deletingProgress", ""], ["fxLayout", "row", 4, "ngIf", "ngIfElse"], ["color", "primary", "mode", "indeterminate", 1, "mat-body", 2, "height", "1em"], ["fxLayout", "row"], ["fxFlex", "1 1 auto", 1, "last", "mat-body", "text", 3, "wm-emoji-text"], ["fxFlex", "0 0 auto", 1, "menu", 3, "matMenuTriggerFor", "click"], ["menu", "matMenu"], ["mat-menu-item", "", 3, "routerLink"], ["mat-menu-item", "", 3, "click"], [3, "closedChange"], ["confirmDelete", ""], ["mat-dialog-title", ""], [3, "wm-readme"], ["align", "end"], ["mat-button", "", "color", "primary", "cdkFocusInitial", "", 3, "mat-dialog-close"], ["mat-button", "", "color", "warn", 3, "mat-dialog-close"]],
        template: function Conversation_Template(rf, ctx) {
          if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "button", 0);

            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](1, "async");

            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](2, Conversation_div_2_Template, 22, 33, "div", 1);

            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
          }

          if (rf & 2) {
            var tmp_0_0 = null;

            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("queryParams", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction1"](4, _c1, (tmp_0_0 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](1, 2, ctx.sender$)) == null ? null : tmp_0_0.userName));

            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);

            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("wmContentSelect", "chat.conversation");
          }
        },
        directives: [_angular_material_button__WEBPACK_IMPORTED_MODULE_7__["MatButton"], _angular_router__WEBPACK_IMPORTED_MODULE_8__["RouterLink"], _content_src_lib_streamer_content_directive__WEBPACK_IMPORTED_MODULE_9__["ContentDirective"], _angular_flex_layout_flex__WEBPACK_IMPORTED_MODULE_10__["DefaultLayoutDirective"], _angular_flex_layout_flex__WEBPACK_IMPORTED_MODULE_10__["DefaultLayoutAlignDirective"], _angular_flex_layout_flex__WEBPACK_IMPORTED_MODULE_10__["DefaultFlexDirective"], _angular_material_badge__WEBPACK_IMPORTED_MODULE_11__["MatBadge"], _elements_src_lib_avatar_avatar_component__WEBPACK_IMPORTED_MODULE_12__["AvatarComponent"], _angular_flex_layout_flex__WEBPACK_IMPORTED_MODULE_10__["DefaultLayoutGapDirective"], _angular_common__WEBPACK_IMPORTED_MODULE_13__["NgIf"], _angular_material_progress_bar__WEBPACK_IMPORTED_MODULE_14__["MatProgressBar"], _emoji_src_lib_text_emoji_text_component__WEBPACK_IMPORTED_MODULE_15__["EmojiText"], _angular_material_icon__WEBPACK_IMPORTED_MODULE_16__["MatIcon"], _angular_material_menu__WEBPACK_IMPORTED_MODULE_6__["MatMenuTrigger"], _angular_material_menu__WEBPACK_IMPORTED_MODULE_6__["MatMenu"], _angular_material_menu__WEBPACK_IMPORTED_MODULE_6__["MatMenuItem"], _elements_src_lib_dialog_dialog_component__WEBPACK_IMPORTED_MODULE_17__["DialogComponent"], _angular_material_dialog__WEBPACK_IMPORTED_MODULE_18__["MatDialogTitle"], _angular_material_dialog__WEBPACK_IMPORTED_MODULE_18__["MatDialogContent"], _readme_src_lib_readme_component__WEBPACK_IMPORTED_MODULE_19__["ReadmeComponent"], _angular_material_dialog__WEBPACK_IMPORTED_MODULE_18__["MatDialogActions"], _angular_material_dialog__WEBPACK_IMPORTED_MODULE_18__["MatDialogClose"]],
        pipes: [_angular_common__WEBPACK_IMPORTED_MODULE_13__["AsyncPipe"], _pipes_src_lib_moment_moment_pipe__WEBPACK_IMPORTED_MODULE_20__["CalendarPipe"], _connect_src_lib_database_pipes_pipes_pipe__WEBPACK_IMPORTED_MODULE_21__["UpdatedTimePipe"]],
        styles: ["[_nghost-%COMP%] {\n  position: relative;\n  display: block;\n  width: 100%;\n}\n[_nghost-%COMP%]   .mat-button[_ngcontent-%COMP%] {\n  width: 100%;\n  text-align: left;\n  padding: 8px 16px;\n}\n[_nghost-%COMP%]   .wm-avatar[_ngcontent-%COMP%] {\n  width: 56px;\n  height: 56px;\n  margin-right: 6px;\n}\n[_nghost-%COMP%]   .content[_ngcontent-%COMP%] {\n  overflow: hidden;\n}\n[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%], [_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .last[_ngcontent-%COMP%] {\n  margin: 0;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .unread[_ngcontent-%COMP%] {\n  font-weight: 600;\n}\n[_nghost-%COMP%]   .menu[_ngcontent-%COMP%] {\n  transform: translateX(100%);\n  transition: transform 100ms ease-in-out;\n}\n[_nghost-%COMP%]:hover   .menu[_ngcontent-%COMP%] {\n  transform: translateX(0);\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL2NvbnZlcnNhdGlvbi5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDQTtFQUNFLGtCQUFBO0VBQ0EsY0FBQTtFQUNBLFdBQUE7QUFBRjtBQUVFO0VBQ0UsV0FBQTtFQUNBLGdCQUFBO0VBQ0EsaUJBQUE7QUFBSjtBQUdFO0VBQ0UsV0FBQTtFQUNBLFlBQUE7RUFDQSxpQkFBQTtBQURKO0FBSUU7RUFDRSxnQkFBQTtBQUZKO0FBSUk7RUFDRSxTQUFBO0VBQ0EsZ0JBQUE7RUFDQSx1QkFBQTtFQUNBLG1CQUFBO0FBRk47QUFLSTtFQUNFLGdCQUFBO0FBSE47QUFPQztFQUNHLDJCQUFBO0VBQ0EsdUNBQUE7QUFMSjtBQVFFO0VBQ0Usd0JBQUE7QUFOSiIsImZpbGUiOiJjb252ZXJzYXRpb24uY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyJcbjpob3N0IHtcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xuICBkaXNwbGF5OiBibG9jaztcbiAgd2lkdGg6IDEwMCU7XG5cbiAgLm1hdC1idXR0b24geyBcbiAgICB3aWR0aDogMTAwJTtcbiAgICB0ZXh0LWFsaWduOiBsZWZ0OyBcbiAgICBwYWRkaW5nOiA4cHggMTZweDtcbiAgfVxuXG4gIC53bS1hdmF0YXIge1xuICAgIHdpZHRoOiA1NnB4O1xuICAgIGhlaWdodDogNTZweDtcbiAgICBtYXJnaW4tcmlnaHQ6IDZweDtcbiAgfVxuXG4gIC5jb250ZW50IHtcbiAgICBvdmVyZmxvdzogaGlkZGVuO1xuXG4gICAgLm5hbWUsIC5sYXN0IHsgXG4gICAgICBtYXJnaW46IDA7IFxuICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICAgIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzO1xuICAgICAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcbiAgICB9XG4gICAgXG4gICAgLnVucmVhZCB7XG4gICAgICBmb250LXdlaWdodDogNjAwO1xuICAgIH1cbiAgfVxuXG4gLm1lbnUge1xuICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWCgxMDAlKTtcbiAgICB0cmFuc2l0aW9uOiB0cmFuc2Zvcm0gMTAwbXMgZWFzZS1pbi1vdXQ7XG4gIH1cblxuICAmOmhvdmVyIC5tZW51IHtcbiAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVgoMCk7XG4gIH1cbn0iXX0= */"]
      });
      /***/
    },

    /***/
    "DE2N":
    /*!*************************************************!*\
      !*** ./wizdm/src/app/pages/chat/chat.module.ts ***!
      \*************************************************/

    /*! exports provided: ChatModule */

    /***/
    function DE2N(module, __webpack_exports__, __webpack_require__) {
      "use strict";

      __webpack_require__.r(__webpack_exports__);
      /* harmony export (binding) */


      __webpack_require__.d(__webpack_exports__, "ChatModule", function () {
        return ChatModule;
      });
      /* harmony import */


      var _angular_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(
      /*! @angular/common */
      "SVse");
      /* harmony import */


      var _angular_flex_layout__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(
      /*! @angular/flex-layout */
      "u9T3");
      /* harmony import */


      var _angular_material_icon__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(
      /*! @angular/material/icon */
      "Tj54");
      /* harmony import */


      var _angular_material_button__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(
      /*! @angular/material/button */
      "Dxy4");
      /* harmony import */


      var _angular_material_list__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(
      /*! @angular/material/list */
      "SqCe");
      /* harmony import */


      var _angular_material_badge__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(
      /*! @angular/material/badge */
      "8Qe2");
      /* harmony import */


      var _angular_material_divider__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(
      /*! @angular/material/divider */
      "BSbQ");
      /* harmony import */


      var _angular_material_progress_spinner__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(
      /*! @angular/material/progress-spinner */
      "pu8Q");
      /* harmony import */


      var _wizdm_content__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(
      /*! @wizdm/content */
      "g7MM");
      /* harmony import */


      var _wizdm_redirect__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(
      /*! @wizdm/redirect */
      "CSIE");
      /* harmony import */


      var _wizdm_gtag__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(
      /*! @wizdm/gtag */
      "fi6C");
      /* harmony import */


      var _wizdm_elements_icon__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(
      /*! @wizdm/elements/icon */
      "txmD");
      /* harmony import */


      var _wizdm_elements_button__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(
      /*! @wizdm/elements/button */
      "uaks");
      /* harmony import */


      var _wizdm_connect_database_pipes__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(
      /*! @wizdm/connect/database/pipes */
      "pKCE");
      /* harmony import */


      var _wizdm_readme__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(
      /*! @wizdm/readme */
      "C1VQ");
      /* harmony import */


      var _wizdm_elements_avatar__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(
      /*! @wizdm/elements/avatar */
      "Entk");
      /* harmony import */


      var _wizdm_elements_balloon__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(
      /*! @wizdm/elements/balloon */
      "MVGx");
      /* harmony import */


      var _wizdm_elements_dialog__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(
      /*! @wizdm/elements/dialog */
      "XNpK");
      /* harmony import */


      var _wizdm_teleport__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(
      /*! @wizdm/teleport */
      "EiPp");
      /* harmony import */


      var app_navigator_actionbar__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(
      /*! app/navigator/actionbar */
      "kNiW");
      /* harmony import */


      var app_navigator_sidenav__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(
      /*! app/navigator/sidenav */
      "sFr1");
      /* harmony import */


      var app_navigator_toolbar__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(
      /*! app/navigator/toolbar */
      "/bc2");
      /* harmony import */


      var app_navigator_footer__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(
      /*! app/navigator/footer */
      "9iaN");
      /* harmony import */


      var app_navigator_fab__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(
      /*! app/navigator/fab */
      "u8yb");
      /* harmony import */


      var _wizdm_pipes_moment__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(
      /*! @wizdm/pipes/moment */
      "pvxE");
      /* harmony import */


      var app_utils_can_leave__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(
      /*! app/utils/can-leave */
      "h4JL");
      /* harmony import */


      var app_utils_auth_guard__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(
      /*! app/utils/auth-guard */
      "U9eP");
      /* harmony import */


      var app_utils_user__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(
      /*! app/utils/user */
      "lWmb");
      /* harmony import */


      var _conversation__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(
      /*! ./conversation */
      "XQFs");
      /* harmony import */


      var _message__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(
      /*! ./message */
      "dMjL");
      /* harmony import */


      var _composer__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(
      /*! ./composer */
      "7ZfP");
      /* harmony import */


      var _chat_service__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(
      /*! ./chat.service */
      "iAo3");
      /* harmony import */


      var _chat_component__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(
      /*! ./chat.component */
      "K6VV");
      /* harmony import */


      var _angular_core__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(
      /*! @angular/core */
      "8Y7J");
      /* harmony import */


      var _content_src_lib_router_content_router_module__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(
      /*! ../../../../../content/src/lib/router/content-router.module */
      "J3Me");

      var routes = [{
        path: '',
        content: ['chat', 'emoji-keys'],
        component: _chat_component__WEBPACK_IMPORTED_MODULE_32__["ChatComponent"],
        canActivate: [app_utils_auth_guard__WEBPACK_IMPORTED_MODULE_26__["AuthGuard"], app_utils_user__WEBPACK_IMPORTED_MODULE_27__["ValidProfile"], _chat_service__WEBPACK_IMPORTED_MODULE_31__["ChatService"]],
        data: {
          authGuardPipe: app_utils_auth_guard__WEBPACK_IMPORTED_MODULE_26__["emailVerified"]
        },
        canDeactivate: [app_utils_can_leave__WEBPACK_IMPORTED_MODULE_25__["CanLeaveGuard"]]
      }];

      var ChatModule = function ChatModule() {
        _classCallCheck(this, ChatModule);
      };

      ChatModule.ɵmod = _angular_core__WEBPACK_IMPORTED_MODULE_33__["ɵɵdefineNgModule"]({
        type: ChatModule
      });
      ChatModule.ɵinj = _angular_core__WEBPACK_IMPORTED_MODULE_33__["ɵɵdefineInjector"]({
        factory: function ChatModule_Factory(t) {
          return new (t || ChatModule)();
        },
        imports: [[_angular_common__WEBPACK_IMPORTED_MODULE_0__["CommonModule"], _angular_flex_layout__WEBPACK_IMPORTED_MODULE_1__["FlexLayoutModule"], _angular_material_icon__WEBPACK_IMPORTED_MODULE_2__["MatIconModule"], _angular_material_button__WEBPACK_IMPORTED_MODULE_3__["MatButtonModule"], _angular_material_list__WEBPACK_IMPORTED_MODULE_4__["MatListModule"], _angular_material_badge__WEBPACK_IMPORTED_MODULE_5__["MatBadgeModule"], _angular_material_divider__WEBPACK_IMPORTED_MODULE_6__["MatDividerModule"], _angular_material_progress_spinner__WEBPACK_IMPORTED_MODULE_7__["MatProgressSpinnerModule"], _wizdm_redirect__WEBPACK_IMPORTED_MODULE_9__["RedirectModule"], _wizdm_connect_database_pipes__WEBPACK_IMPORTED_MODULE_13__["PipesModule"], _wizdm_gtag__WEBPACK_IMPORTED_MODULE_10__["GtagModule"], _wizdm_elements_icon__WEBPACK_IMPORTED_MODULE_11__["IconModule"], _wizdm_elements_button__WEBPACK_IMPORTED_MODULE_12__["ButtonChangerModule"], _wizdm_readme__WEBPACK_IMPORTED_MODULE_14__["ReadmeModule"], _wizdm_elements_avatar__WEBPACK_IMPORTED_MODULE_15__["AvatarModule"], _wizdm_elements_balloon__WEBPACK_IMPORTED_MODULE_16__["BalloonModule"], _wizdm_elements_dialog__WEBPACK_IMPORTED_MODULE_17__["DialogModule"], _wizdm_teleport__WEBPACK_IMPORTED_MODULE_18__["TeleportModule"], app_navigator_actionbar__WEBPACK_IMPORTED_MODULE_19__["ActionbarModule"], app_navigator_sidenav__WEBPACK_IMPORTED_MODULE_20__["SidenavModule"], app_navigator_toolbar__WEBPACK_IMPORTED_MODULE_21__["ToolbarModule"], app_navigator_footer__WEBPACK_IMPORTED_MODULE_22__["StickyFooterModule"], app_navigator_fab__WEBPACK_IMPORTED_MODULE_23__["FabModule"], _wizdm_pipes_moment__WEBPACK_IMPORTED_MODULE_24__["MomentPipesModule"], app_utils_can_leave__WEBPACK_IMPORTED_MODULE_25__["CanLeaveModule"], _conversation__WEBPACK_IMPORTED_MODULE_28__["ConversationModule"], _message__WEBPACK_IMPORTED_MODULE_29__["MessageModule"], _composer__WEBPACK_IMPORTED_MODULE_30__["ComposerModule"], _wizdm_content__WEBPACK_IMPORTED_MODULE_8__["ContentRouterModule"].forChild(routes)]]
      });

      (function () {
        (typeof ngJitMode === "undefined" || ngJitMode) && _angular_core__WEBPACK_IMPORTED_MODULE_33__["ɵɵsetNgModuleScope"](ChatModule, {
          declarations: [_chat_component__WEBPACK_IMPORTED_MODULE_32__["ChatComponent"]],
          imports: [_angular_common__WEBPACK_IMPORTED_MODULE_0__["CommonModule"], _angular_flex_layout__WEBPACK_IMPORTED_MODULE_1__["FlexLayoutModule"], _angular_material_icon__WEBPACK_IMPORTED_MODULE_2__["MatIconModule"], _angular_material_button__WEBPACK_IMPORTED_MODULE_3__["MatButtonModule"], _angular_material_list__WEBPACK_IMPORTED_MODULE_4__["MatListModule"], _angular_material_badge__WEBPACK_IMPORTED_MODULE_5__["MatBadgeModule"], _angular_material_divider__WEBPACK_IMPORTED_MODULE_6__["MatDividerModule"], _angular_material_progress_spinner__WEBPACK_IMPORTED_MODULE_7__["MatProgressSpinnerModule"], _wizdm_redirect__WEBPACK_IMPORTED_MODULE_9__["RedirectModule"], _wizdm_connect_database_pipes__WEBPACK_IMPORTED_MODULE_13__["PipesModule"], _wizdm_gtag__WEBPACK_IMPORTED_MODULE_10__["GtagModule"], _wizdm_elements_icon__WEBPACK_IMPORTED_MODULE_11__["IconModule"], _wizdm_elements_button__WEBPACK_IMPORTED_MODULE_12__["ButtonChangerModule"], _wizdm_readme__WEBPACK_IMPORTED_MODULE_14__["ReadmeModule"], _wizdm_elements_avatar__WEBPACK_IMPORTED_MODULE_15__["AvatarModule"], _wizdm_elements_balloon__WEBPACK_IMPORTED_MODULE_16__["BalloonModule"], _wizdm_elements_dialog__WEBPACK_IMPORTED_MODULE_17__["DialogModule"], _wizdm_teleport__WEBPACK_IMPORTED_MODULE_18__["TeleportModule"], app_navigator_actionbar__WEBPACK_IMPORTED_MODULE_19__["ActionbarModule"], app_navigator_sidenav__WEBPACK_IMPORTED_MODULE_20__["SidenavModule"], app_navigator_toolbar__WEBPACK_IMPORTED_MODULE_21__["ToolbarModule"], app_navigator_footer__WEBPACK_IMPORTED_MODULE_22__["StickyFooterModule"], app_navigator_fab__WEBPACK_IMPORTED_MODULE_23__["FabModule"], _wizdm_pipes_moment__WEBPACK_IMPORTED_MODULE_24__["MomentPipesModule"], app_utils_can_leave__WEBPACK_IMPORTED_MODULE_25__["CanLeaveModule"], _conversation__WEBPACK_IMPORTED_MODULE_28__["ConversationModule"], _message__WEBPACK_IMPORTED_MODULE_29__["MessageModule"], _composer__WEBPACK_IMPORTED_MODULE_30__["ComposerModule"], _content_src_lib_router_content_router_module__WEBPACK_IMPORTED_MODULE_34__["ContentRouterModule"]]
        });
      })();
      /***/

    },

    /***/
    "DuEg":
    /*!******************************************************!*\
      !*** ./connect/src/lib/database/pipes/pipes.pipe.ts ***!
      \******************************************************/

    /*! exports provided: SnapshotDataPipe, TimestampPipe, CreatedTimePipe, UpdatedTimePipe */

    /***/
    function DuEg(module, __webpack_exports__, __webpack_require__) {
      "use strict";

      __webpack_require__.r(__webpack_exports__);
      /* harmony export (binding) */


      __webpack_require__.d(__webpack_exports__, "SnapshotDataPipe", function () {
        return SnapshotDataPipe;
      });
      /* harmony export (binding) */


      __webpack_require__.d(__webpack_exports__, "TimestampPipe", function () {
        return TimestampPipe;
      });
      /* harmony export (binding) */


      __webpack_require__.d(__webpack_exports__, "CreatedTimePipe", function () {
        return CreatedTimePipe;
      });
      /* harmony export (binding) */


      __webpack_require__.d(__webpack_exports__, "UpdatedTimePipe", function () {
        return UpdatedTimePipe;
      });
      /* harmony import */


      var _document_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(
      /*! ../document/utils */
      "mjGE");
      /* harmony import */


      var firebase_app__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(
      /*! firebase/app */
      "Wcq6");
      /* harmony import */


      var firebase_app__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(firebase_app__WEBPACK_IMPORTED_MODULE_1__);
      /* harmony import */


      var _angular_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(
      /*! @angular/core */
      "8Y7J");

      var SnapshotDataPipe = /*#__PURE__*/function () {
        function SnapshotDataPipe() {
          _classCallCheck(this, SnapshotDataPipe);
        }

        _createClass(SnapshotDataPipe, [{
          key: "transform",
          value: function transform(value) {
            return value instanceof firebase_app__WEBPACK_IMPORTED_MODULE_1__["firestore"].DocumentSnapshot ? Object(_document_utils__WEBPACK_IMPORTED_MODULE_0__["mapSnaphotData"])(value) : value;
          }
        }]);

        return SnapshotDataPipe;
      }();

      SnapshotDataPipe.ɵfac = function SnapshotDataPipe_Factory(t) {
        return new (t || SnapshotDataPipe)();
      };

      SnapshotDataPipe.ɵpipe = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdefinePipe"]({
        name: "snapshotData",
        type: SnapshotDataPipe,
        pure: true
      });

      var TimestampPipe = /*#__PURE__*/function () {
        function TimestampPipe() {
          _classCallCheck(this, TimestampPipe);
        }

        _createClass(TimestampPipe, [{
          key: "transform",
          value: function transform(value) {
            return value instanceof firebase_app__WEBPACK_IMPORTED_MODULE_1__["firestore"].Timestamp ? value.toDate() : value;
          }
        }]);

        return TimestampPipe;
      }();

      TimestampPipe.ɵfac = function TimestampPipe_Factory(t) {
        return new (t || TimestampPipe)();
      };

      TimestampPipe.ɵpipe = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdefinePipe"]({
        name: "timestamp",
        type: TimestampPipe,
        pure: true
      });

      var CreatedTimePipe = /*#__PURE__*/function () {
        function CreatedTimePipe() {
          _classCallCheck(this, CreatedTimePipe);
        }

        _createClass(CreatedTimePipe, [{
          key: "transform",
          value: function transform(value) {
            var _a;

            var data = value instanceof firebase_app__WEBPACK_IMPORTED_MODULE_1__["firestore"].DocumentSnapshot ? Object(_document_utils__WEBPACK_IMPORTED_MODULE_0__["mapSnaphotData"])(value) : value;
            return (_a = data === null || data === void 0 ? void 0 : data.created) === null || _a === void 0 ? void 0 : _a.toDate();
          }
        }]);

        return CreatedTimePipe;
      }();

      CreatedTimePipe.ɵfac = function CreatedTimePipe_Factory(t) {
        return new (t || CreatedTimePipe)();
      };

      CreatedTimePipe.ɵpipe = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdefinePipe"]({
        name: "createdTime",
        type: CreatedTimePipe,
        pure: true
      });

      var UpdatedTimePipe = /*#__PURE__*/function () {
        function UpdatedTimePipe() {
          _classCallCheck(this, UpdatedTimePipe);
        }

        _createClass(UpdatedTimePipe, [{
          key: "transform",
          value: function transform(value) {
            var _a;

            var data = value instanceof firebase_app__WEBPACK_IMPORTED_MODULE_1__["firestore"].DocumentSnapshot ? Object(_document_utils__WEBPACK_IMPORTED_MODULE_0__["mapSnaphotData"])(value) : value;
            return (_a = (data === null || data === void 0 ? void 0 : data.updated) || (data === null || data === void 0 ? void 0 : data.created)) === null || _a === void 0 ? void 0 : _a.toDate();
          }
        }]);

        return UpdatedTimePipe;
      }();

      UpdatedTimePipe.ɵfac = function UpdatedTimePipe_Factory(t) {
        return new (t || UpdatedTimePipe)();
      };

      UpdatedTimePipe.ɵpipe = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdefinePipe"]({
        name: "updatedTime",
        type: UpdatedTimePipe,
        pure: true
      });
      /***/
    },

    /***/
    "K6VV":
    /*!****************************************************!*\
      !*** ./wizdm/src/app/pages/chat/chat.component.ts ***!
      \****************************************************/

    /*! exports provided: ChatComponent */

    /***/
    function K6VV(module, __webpack_exports__, __webpack_require__) {
      "use strict";

      __webpack_require__.r(__webpack_exports__);
      /* harmony export (binding) */


      __webpack_require__.d(__webpack_exports__, "ChatComponent", function () {
        return ChatComponent;
      });
      /* harmony import */


      var rxjs_operators__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(
      /*! rxjs/operators */
      "kU1M");
      /* harmony import */


      var _wizdm_connect_database_collection_operators__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(
      /*! @wizdm/connect/database/collection/operators */
      "wSf6");
      /* harmony import */


      var _angular_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(
      /*! @angular/core */
      "8Y7J");
      /* harmony import */


      var _wizdm_connect_database_collection__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(
      /*! @wizdm/connect/database/collection */
      "lPMd");
      /* harmony import */


      var rxjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(
      /*! rxjs */
      "qCKp");
      /* harmony import */


      var app_utils_user__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(
      /*! app/utils/user */
      "lWmb");
      /* harmony import */


      var _wizdm_connect_database__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(
      /*! @wizdm/connect/database */
      "eYWy");
      /* harmony import */


      var _angular_router__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(
      /*! @angular/router */
      "iInd");
      /* harmony import */


      var app_utils_scrolling__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(
      /*! app/utils/scrolling */
      "DwbE");
      /* harmony import */


      var _wizdm_rxjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(
      /*! @wizdm/rxjs */
      "j8uH");
      /* harmony import */


      var _wizdm_emoji_utils__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(
      /*! @wizdm/emoji/utils */
      "eyIN");
      /* harmony import */


      var _chat_animations__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(
      /*! ./chat.animations */
      "337Q");
      /* harmony import */


      var _conversation_conversation_component__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(
      /*! ./conversation/conversation.component */
      "A+Un");
      /* harmony import */


      var _message_message_component__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(
      /*! ./message/message.component */
      "ntp/");
      /* harmony import */


      var _content_src_lib_streamer_content_directive__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(
      /*! ../../../../../content/src/lib/streamer/content.directive */
      "Qfjl");
      /* harmony import */


      var _gtag_src_lib_gtag_directive__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(
      /*! ../../../../../gtag/src/lib/gtag.directive */
      "FkMH");
      /* harmony import */


      var _navigator_actionbar_actionbar_directive__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(
      /*! ../../navigator/actionbar/actionbar.directive */
      "mx0f");
      /* harmony import */


      var _angular_flex_layout_flex__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(
      /*! @angular/flex-layout/flex */
      "VDRc");
      /* harmony import */


      var _angular_common__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(
      /*! @angular/common */
      "SVse");
      /* harmony import */


      var _navigator_fab_fab_directive__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(
      /*! ../../navigator/fab/fab.directive */
      "glcp");
      /* harmony import */


      var _navigator_footer_sticky_footer_directive__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(
      /*! ../../navigator/footer/sticky-footer.directive */
      "0Usy");
      /* harmony import */


      var _angular_material_button__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(
      /*! @angular/material/button */
      "Dxy4");
      /* harmony import */


      var _elements_src_lib_button_button_media_changer_directive__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(
      /*! ../../../../../elements/src/lib/button/button-media-changer.directive */
      "U3RD");
      /* harmony import */


      var _navigator_sidenav_sidenav_directive__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(
      /*! ../../navigator/sidenav/sidenav.directive */
      "++Qg");
      /* harmony import */


      var _elements_src_lib_icon_icon_component__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(
      /*! ../../../../../elements/src/lib/icon/icon.component */
      "h0Qx");
      /* harmony import */


      var _navigator_toolbar_toolbar_directive__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(
      /*! ../../navigator/toolbar/toolbar.directive */
      "VEY1");
      /* harmony import */


      var _angular_material_progress_spinner__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(
      /*! @angular/material/progress-spinner */
      "pu8Q");
      /* harmony import */


      var _elements_src_lib_balloon_balloon_component__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(
      /*! ../../../../../elements/src/lib/balloon/balloon.component */
      "ggY3");
      /* harmony import */


      var _angular_material_icon__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(
      /*! @angular/material/icon */
      "Tj54");
      /* harmony import */


      var _composer_composer_component__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(
      /*! ./composer/composer.component */
      "SsNK");
      /* harmony import */


      var _elements_src_lib_dialog_dialog_component__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(
      /*! ../../../../../elements/src/lib/dialog/dialog.component */
      "7/R1");
      /* harmony import */


      var _utils_can_leave_can_leave_directive__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(
      /*! ../../utils/can-leave/can-leave.directive */
      "q9NA");
      /* harmony import */


      var _angular_material_dialog__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(
      /*! @angular/material/dialog */
      "iELJ");
      /* harmony import */


      var _readme_src_lib_readme_component__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(
      /*! ../../../../../readme/src/lib/readme.component */
      "n8oj");
      /* harmony import */


      var _pipes_src_lib_moment_moment_pipe__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(
      /*! ../../../../../pipes/src/lib/moment/moment.pipe */
      "cpjW");
      /* harmony import */


      var _connect_src_lib_database_pipes_pipes_pipe__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(
      /*! ../../../../../connect/src/lib/database/pipes/pipes.pipe */
      "DuEg");

      function ChatComponent_ng_container_0_ng_template_1_wm_icon_1_Template(rf, ctx) {
        if (rf & 1) {
          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelement"](0, "wm-icon", 13);
        }

        if (rf & 2) {
          var msgs_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"](2).$implicit;

          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("icon", (msgs_r1.conversation == null ? null : msgs_r1.conversation["new"] == null ? null : msgs_r1.conversation["new"].icon) || "add_comment");
        }
      }

      function ChatComponent_ng_container_0_ng_template_1_ng_template_2_Template(rf, ctx) {
        if (rf & 1) {
          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](0);
        }

        if (rf & 2) {
          var msgs_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"](2).$implicit;

          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtextInterpolate"]((msgs_r1.conversation == null ? null : msgs_r1.conversation["new"] == null ? null : msgs_r1.conversation["new"].caption) || "New chat");
        }
      }

      function ChatComponent_ng_container_0_ng_template_1_ng_template_4_ng_container_0_ng_container_1_wm_conversation_1_Template(rf, ctx) {
        if (rf & 1) {
          var _r21 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵgetCurrentView"]();

          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](0, "wm-conversation", 16);

          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵlistener"]("deleting", function ChatComponent_ng_container_0_ng_template_1_ng_template_4_ng_container_0_ng_container_1_wm_conversation_1_Template_wm_conversation_deleting_0_listener($event) {
            _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵrestoreView"](_r21);

            var ctx_r20 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"](6);

            return ctx_r20.onDeleting($event, ctx_r20.conv.id);
          })("click", function ChatComponent_ng_container_0_ng_template_1_ng_template_4_ng_container_0_ng_container_1_wm_conversation_1_Template_wm_conversation_click_0_listener() {
            _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵrestoreView"](_r21);

            var ctx_r22 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"](6);

            return ctx_r22.browse = !ctx_r22.browse;
          });

          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
        }

        if (rf & 2) {
          var activeConversation_r16 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"](2).ngIf;

          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("content", activeConversation_r16);
        }
      }

      function ChatComponent_ng_container_0_ng_template_1_ng_template_4_ng_container_0_ng_container_1_Template(rf, ctx) {
        if (rf & 1) {
          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementContainerStart"](0);

          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplate"](1, ChatComponent_ng_container_0_ng_template_1_ng_template_4_ng_container_0_ng_container_1_wm_conversation_1_Template, 1, 1, "wm-conversation", 15);

          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementContainerEnd"]();
        }
      }

      function ChatComponent_ng_container_0_ng_template_1_ng_template_4_ng_container_0_wm_conversation_2_Template(rf, ctx) {
        if (rf & 1) {
          var _r26 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵgetCurrentView"]();

          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](0, "wm-conversation", 17);

          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵlistener"]("deleting", function ChatComponent_ng_container_0_ng_template_1_ng_template_4_ng_container_0_wm_conversation_2_Template_wm_conversation_deleting_0_listener($event) {
            _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵrestoreView"](_r26);

            var conv_r24 = ctx.$implicit;

            var ctx_r25 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"](5);

            return ctx_r25.onDeleting($event, conv_r24.id);
          })("click", function ChatComponent_ng_container_0_ng_template_1_ng_template_4_ng_container_0_wm_conversation_2_Template_wm_conversation_click_0_listener() {
            _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵrestoreView"](_r26);

            var mobile_r8 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"](3).isMobile;

            var ctx_r27 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"](2);

            return mobile_r8 && (ctx_r27.browse = !ctx_r27.browse);
          });

          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
        }

        if (rf & 2) {
          var conv_r24 = ctx.$implicit;

          var activeConversation_r16 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"]().ngIf;

          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("content", conv_r24)("highlight", conv_r24.id === activeConversation_r16.id)("showUnread", conv_r24.id !== activeConversation_r16.id);
        }
      }

      function ChatComponent_ng_container_0_ng_template_1_ng_template_4_ng_container_0_Template(rf, ctx) {
        if (rf & 1) {
          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementContainerStart"](0);

          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplate"](1, ChatComponent_ng_container_0_ng_template_1_ng_template_4_ng_container_0_ng_container_1_Template, 2, 0, "ng-container", 5);

          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplate"](2, ChatComponent_ng_container_0_ng_template_1_ng_template_4_ng_container_0_wm_conversation_2_Template, 1, 3, "wm-conversation", 14);

          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpipe"](3, "async");

          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementContainerEnd"]();
        }

        if (rf & 2) {
          var mobile_r8 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"](2).isMobile;

          var ctx_r15 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"](2);

          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](1);

          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("ngIf", mobile_r8);

          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](1);

          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("ngForOf", _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpipeBind1"](3, 3, ctx_r15.conversations$))("ngForTrackBy", ctx_r15.trackById);
        }
      }

      function ChatComponent_ng_container_0_ng_template_1_ng_template_4_Template(rf, ctx) {
        if (rf & 1) {
          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplate"](0, ChatComponent_ng_container_0_ng_template_1_ng_template_4_ng_container_0_Template, 4, 5, "ng-container", 5);

          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpipe"](1, "async");
        }

        if (rf & 2) {
          var ctx_r12 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"](3);

          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("ngIf", _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpipeBind1"](1, 1, ctx_r12.activeConversation$));
        }
      }

      function ChatComponent_ng_container_0_ng_template_1_Template(rf, ctx) {
        if (rf & 1) {
          var _r32 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵgetCurrentView"]();

          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](0, "button", 9);

          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplate"](1, ChatComponent_ng_container_0_ng_template_1_wm_icon_1_Template, 1, 1, "wm-icon", 10);

          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplate"](2, ChatComponent_ng_container_0_ng_template_1_ng_template_2_Template, 1, 1, "ng-template", null, 11, _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplateRefExtractor"]);

          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();

          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplate"](4, ChatComponent_ng_container_0_ng_template_1_ng_template_4_Template, 2, 3, "ng-template", 12);

          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpipe"](5, "async");

          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵlistener"]("openedChange", function ChatComponent_ng_container_0_ng_template_1_Template_ng_template_openedChange_4_listener($event) {
            _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵrestoreView"](_r32);

            var ctx_r31 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"](2);

            return ctx_r31.browse = $event;
          });
        }

        if (rf & 2) {
          var mobile_r8 = ctx.isMobile;

          var _r10 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵreference"](3);

          var msgs_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"]().$implicit;

          var ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"]();

          var tmp_3_0 = null;

          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("routerLink", (msgs_r1.conversation == null ? null : msgs_r1.conversation["new"] == null ? null : msgs_r1.conversation["new"].link) || "/explore/people");

          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](1);

          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("ngIf", mobile_r8)("ngIfElse", _r10);

          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](3);

          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("opened", ((tmp_3_0 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpipeBind1"](5, 4, ctx_r2.conversations$)) == null ? null : tmp_3_0.length) > 0 && (ctx_r2.browse || !mobile_r8));
        }
      }

      function ChatComponent_ng_container_0_div_3_Template(rf, ctx) {
        if (rf & 1) {
          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](0, "div", 18);

          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelement"](1, "mat-spinner", 19);

          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
        }
      }

      var _c0 = function _c0() {
        return {
          sameDay: "[Today]",
          lastDay: "[Yesterday]",
          lastWeek: "dddd",
          sameElse: "L"
        };
      };

      function ChatComponent_ng_container_0_ng_container_4_ng_container_1_ng_container_1_Template(rf, ctx) {
        if (rf & 1) {
          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementContainerStart"](0);

          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](1, "wm-balloon", 22);

          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](2);

          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpipe"](3, "calendar");

          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpipe"](4, "createdTime");

          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();

          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementContainerEnd"]();
        }

        if (rf & 2) {
          var msg_r36 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"]().$implicit;

          var msgs_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"](2).$implicit;

          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](2);

          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtextInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpipeBind2"](3, 1, _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpipeBind1"](4, 4, msg_r36), (msgs_r1.thread == null ? null : msgs_r1.thread.timeFormat) || _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpureFunction0"](6, _c0)));
        }
      }

      function ChatComponent_ng_container_0_ng_container_4_ng_container_1_Template(rf, ctx) {
        if (rf & 1) {
          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementContainerStart"](0);

          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplate"](1, ChatComponent_ng_container_0_ng_container_4_ng_container_1_ng_container_1_Template, 5, 7, "ng-container", 5);

          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpipe"](2, "moment");

          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpipe"](3, "createdTime");

          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpipe"](4, "moment");

          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpipe"](5, "createdTime");

          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelement"](6, "wm-message", 21);

          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpipe"](7, "snapshotData");

          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementContainerEnd"]();
        }

        if (rf & 2) {
          var msg_r36 = ctx.$implicit;
          var i_r37 = ctx.index;

          var messages_r34 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"]().ngIf;

          var tmp_1_0 = null;

          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](1);

          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("ngIf", i_r37 === 0 || _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpipeBind2"](2, 3, _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpipeBind1"](3, 6, messages_r34[i_r37 - 1]), "D") !== _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpipeBind2"](4, 8, _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpipeBind1"](5, 11, msg_r36), "D"));

          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](5);

          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("thread", (tmp_1_0 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpipeBind1"](7, 13, messages_r34[i_r37 - 1])) == null ? null : tmp_1_0.sender)("message", msg_r36);
        }
      }

      function ChatComponent_ng_container_0_ng_container_4_Template(rf, ctx) {
        if (rf & 1) {
          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementContainerStart"](0);

          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplate"](1, ChatComponent_ng_container_0_ng_container_4_ng_container_1_Template, 8, 15, "ng-container", 20);

          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementContainerEnd"]();
        }

        if (rf & 2) {
          var messages_r34 = ctx.ngIf;

          var ctx_r4 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"](2);

          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](1);

          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("ngForOf", messages_r34)("ngForTrackBy", ctx_r4.trackById);
        }
      }

      function ChatComponent_ng_container_0_ng_template_6_button_0_Template(rf, ctx) {
        if (rf & 1) {
          var _r44 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵgetCurrentView"]();

          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](0, "button", 24);

          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵlistener"]("click", function ChatComponent_ng_container_0_ng_template_6_button_0_Template_button_click_0_listener() {
            _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵrestoreView"](_r44);

            var ctx_r43 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"](3);

            return ctx_r43.scrollToBottom();
          });

          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](1, "mat-icon");

          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](2, "expand_more");

          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();

          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
        }

        if (rf & 2) {
          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("@pop", undefined);
        }
      }

      function ChatComponent_ng_container_0_ng_template_6_Template(rf, ctx) {
        if (rf & 1) {
          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplate"](0, ChatComponent_ng_container_0_ng_template_6_button_0_Template, 3, 1, "button", 23);

          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpipe"](1, "async");
        }

        if (rf & 2) {
          var ctx_r5 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"](2);

          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("ngIf", _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpipeBind1"](1, 1, ctx_r5.scrolled$));
        }
      }

      function ChatComponent_ng_container_0_wm_composer_7_Template(rf, ctx) {
        if (rf & 1) {
          var _r46 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵgetCurrentView"]();

          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](0, "wm-composer", 25);

          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵlistener"]("valueChange", function ChatComponent_ng_container_0_wm_composer_7_Template_wm_composer_valueChange_0_listener($event) {
            _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵrestoreView"](_r46);

            var ctx_r45 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"](2);

            return ctx_r45.text = $event;
          })("expanded", function ChatComponent_ng_container_0_wm_composer_7_Template_wm_composer_expanded_0_listener() {
            _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵrestoreView"](_r46);

            var ctx_r47 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"](2);

            return ctx_r47.onKeyboardExpand();
          })("send", function ChatComponent_ng_container_0_wm_composer_7_Template_wm_composer_send_0_listener($event) {
            _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵrestoreView"](_r46);

            var ctx_r48 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"](2);

            return ctx_r48.send($event);
          });

          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
        }

        if (rf & 2) {
          var ctx_r6 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"](2);

          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("value", ctx_r6.text)("keys", ctx_r6.keys)("disabled", !ctx_r6.recipient || ctx_r6.loading || ctx_r6.deleting);
        }
      }

      function ChatComponent_ng_container_0_wm_dialog_8_Template(rf, ctx) {
        if (rf & 1) {
          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](0, "wm-dialog", 26);

          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](1, "h2", 27);

          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](2, "b");

          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](3);

          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();

          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();

          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](4, "mat-dialog-content", 28);

          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](5, " You're about to leave the page without sending the last message. ");

          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();

          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](6, "mat-dialog-actions", 29);

          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](7, "button", 30);

          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](8);

          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();

          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](9, "button", 31);

          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](10);

          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();

          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();

          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
        }

        if (rf & 2) {
          var leave_r49 = ctx.ngIf;

          var ctx_r7 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"](2);

          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("dontLeave", !!ctx_r7.text);

          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](3);

          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtextInterpolate"](leave_r49.title || "Unsent message");

          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](1);

          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("wm-readme", leave_r49.message);

          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](3);

          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("mat-dialog-close", false);

          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](1);

          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtextInterpolate"](leave_r49.cancel || "Wait");

          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](1);

          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("mat-dialog-close", true);

          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](1);

          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtextInterpolate"](leave_r49.ok || "Proceed");
        }
      }

      function ChatComponent_ng_container_0_Template(rf, ctx) {
        if (rf & 1) {
          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementContainerStart"](0, 1);

          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplate"](1, ChatComponent_ng_container_0_ng_template_1_Template, 6, 6, "ng-template", 2);

          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](2, "div", 3);

          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplate"](3, ChatComponent_ng_container_0_div_3_Template, 2, 0, "div", 4);

          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplate"](4, ChatComponent_ng_container_0_ng_container_4_Template, 2, 2, "ng-container", 5);

          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpipe"](5, "async");

          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();

          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplate"](6, ChatComponent_ng_container_0_ng_template_6_Template, 2, 3, "ng-template", 6);

          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplate"](7, ChatComponent_ng_container_0_wm_composer_7_Template, 1, 3, "wm-composer", 7);

          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplate"](8, ChatComponent_ng_container_0_wm_dialog_8_Template, 11, 7, "wm-dialog", 8);

          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementContainerEnd"]();
        }

        if (rf & 2) {
          var msgs_r1 = ctx.$implicit;

          var ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"]();

          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](3);

          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("ngIf", ctx_r0.loading);

          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](1);

          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("ngIf", _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpipeBind1"](5, 3, ctx_r0.messages$));

          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](4);

          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("ngIf", msgs_r1.canLeave);
        }
      }

      var ChatComponent = /*#__PURE__*/function (_wizdm_connect_databa2) {
        _inherits(ChatComponent, _wizdm_connect_databa2);

        var _super2 = _createSuper(ChatComponent);

        function ChatComponent(db, route, router, scroller, user, regex, zone) {
          var _this4;

          _classCallCheck(this, ChatComponent);

          _this4 = _super2.call(this, db, 'conversations');
          _this4.route = route;
          _this4.router = router;
          _this4.scroller = scroller;
          _this4.user = user;
          _this4.regex = regex;
          _this4.zone = zone;
          _this4.reload$ = new rxjs__WEBPACK_IMPORTED_MODULE_4__["BehaviorSubject"](null);
          _this4.loading = true;
          _this4.browse = true;
          _this4.deletingCount = 0;
          _this4.autoScroll = true; // Keys

          _this4.stats = {
            "😂": 1,
            "👋🏻": 1,
            "👍": 1,
            "💕": 1,
            "🙏": 1
          };
          _this4.text = "";
          _this4.recipient = ''; // Lists all my active conversations

          _this4.conversations$ = _this4.reload$.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_0__["switchMap"])(function () {
            return _this4.pipe( // Selects all the conversations where recipients[] contains my user's id
            Object(_wizdm_connect_database_collection_operators__WEBPACK_IMPORTED_MODULE_1__["where"])('recipients', 'array-contains', _this4.me), Object(_wizdm_connect_database_collection_operators__WEBPACK_IMPORTED_MODULE_1__["orderBy"])('created', 'desc'), // Combines existing conversations with new comers
            function (source) {
              return source.pipe( // Gets the list of existing conversations and sort them by updated value. 
              // Note: we set the cursor apart to avoid messing up with the following queries 
              // since the conversation array will be shuffled
              Object(_wizdm_connect_database_collection_operators__WEBPACK_IMPORTED_MODULE_1__["snap"])(), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_0__["map"])(function (convs) {
                return {
                  cursor: convs[0],
                  convs: _this4.sortByUpdated(convs, 'desc')
                };
              }), // Appends new comers to the top of the list
              Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_0__["expand"])(function (_ref) {
                var cursor = _ref.cursor,
                    convs = _ref.convs;
                return source.pipe( // Filters out the existing conversation to minimize reads
                Object(_wizdm_connect_database_collection_operators__WEBPACK_IMPORTED_MODULE_1__["endBefore"])(cursor), // Listens to new conversations
                Object(_wizdm_connect_database_collection_operators__WEBPACK_IMPORTED_MODULE_1__["onSnapshot"])(zone), // Filters out unwanted emissions.
                // Note: we exclude snapshots with pending writes to make sure timestamps are up to date
                Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_0__["filter"])(function (snap) {
                  return snap.size > 0 && !snap.metadata.hasPendingWrites;
                }), // Gets the new documents when available
                Object(_wizdm_connect_database_collection_operators__WEBPACK_IMPORTED_MODULE_1__["docs"])(), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_0__["take"])(1), // Prepends the new comers to the existing ones
                Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_0__["map"])(function (latest) {
                  return {
                    cursor: latest[0],
                    convs: latest.concat(convs)
                  };
                }));
              }), // Gets rid of the cursor
              Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_0__["pluck"])('convs'));
            }, // Replays to all subscribers
            Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_0__["shareReplay"])(1));
          })); // Resolves the current conversation id from the query parameter

          _this4.conversationId$ = route.queryParamMap.pipe( // Extracts the @username from the route
          Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_0__["map"])(function (params) {
            return params.get('with') || '';
          }), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_0__["distinctUntilChanged"])(), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_0__["delay"])(0), // Resolves the user, if any
          Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_0__["switchMap"])(function (userName) {
            // Catches an unknown user first. This may be a result of:
            // 1. a deleted conversation (where the user has been removed from the recipients)
            // 2. a conversation with a user that no longer exists
            if (userName.startsWith('unknown-')) {
              // Resets the recipient
              _this4.recipient = ''; // Returns the original conversation id

              return Object(rxjs__WEBPACK_IMPORTED_MODULE_4__["of"])(userName.replace(/^unknown-/, ''));
            } // Go on with a known user


            return user.fromUserName(userName).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_0__["take"])(1), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_0__["map"])(function (user) {
              // Skips unexisting users
              if (!user) {
                return _this4.recipient = '';
              } // Tracks the new recipient id


              _this4.recipient = user.id; // Computes the path for the requested conversation otherwise

              return _this4.me < user.id ? _this4.me.concat(user.id) : _this4.recipient.concat(_this4.me);
            }));
          }), // Filters unchanged values and replays to all subscribers
          Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_0__["shareReplay"])(1)); // Resolves the active conversation

          _this4.activeConversation$ = Object(rxjs__WEBPACK_IMPORTED_MODULE_4__["combineLatest"])(_this4.conversations$, _this4.conversationId$).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_0__["map"])(function (_ref2) {
            var _ref3 = _slicedToArray(_ref2, 2),
                convs = _ref3[0],
                id = _ref3[1];

            return (convs === null || convs === void 0 ? void 0 : convs.find(function (conv) {
              return conv.id === id;
            })) || {};
          })); // Paging observalbe to load the previous messages while scrolling up

          var more$ = scroller.pipe( // Triggers the previous page when approaching the top
          Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_0__["map"])(function (scroll) {
            return scroll.top < 50;
          }), // Filters for truthfull changes
          Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_0__["distinctUntilChanged"])(), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_0__["filter"])(function (value) {
            return value;
          }), // Asks for the next 20 messages
          Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_0__["map"])(function () {
            return 20;
          }), // Shows the loading spinner every page
          Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_0__["tap"])(function () {
            return _this4.loading = true;
          })); // Streams up to page size messages from the selected conversation

          _this4.messages$ = _this4.conversationId$.pipe( // Stores the curernt conversation
          Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_0__["map"])(function (id) {
            return _this4.conversation = id && _this4.document(id);
          }), // Gets the message thread
          Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_0__["map"])(function (conv) {
            return _this4.thread = conv && conv.collection('messages');
          }), // Loads messages from the thread ordered by creation time
          Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_0__["switchMap"])(function (thread) {
            return thread ? thread.pipe(Object(_wizdm_connect_database_collection_operators__WEBPACK_IMPORTED_MODULE_1__["orderBy"])('created'), // Combines existing messages with new ones
            function (source) {
              return source.pipe( // Let's start by paging some existing messages
              Object(_wizdm_connect_database_collection_operators__WEBPACK_IMPORTED_MODULE_1__["pageReverse"])(more$), // Perpare to append new coming messages
              Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_0__["expand"])(function (paged) {
                return source.pipe( // Excludes existing messages
                Object(_wizdm_connect_database_collection_operators__WEBPACK_IMPORTED_MODULE_1__["startAfter"])(paged[paged.length - 1]), // Listens for updates
                Object(_wizdm_connect_database_collection_operators__WEBPACK_IMPORTED_MODULE_1__["onSnapshot"])(_this4.db.zone), // Filters out unwanted emissions
                Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_0__["filter"])(function (snap) {
                  return snap.size > 0 && !snap.metadata.hasPendingWrites;
                }), // Gets the new messages and completes
                Object(_wizdm_connect_database_collection_operators__WEBPACK_IMPORTED_MODULE_1__["docs"])(), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_0__["take"])(1), // Appends the new messages to the list
                Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_0__["map"])(function (latest) {
                  return paged.concat(latest);
                }));
              }), // Always starts with an empty array to clear up messages when loading a new conversation
              Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_0__["startWith"])([]));
            } // Reverts to an empty array when no conversation is selected
            ) : Object(rxjs__WEBPACK_IMPORTED_MODULE_4__["of"])([]);
          }), // When done loading....
          Object(_wizdm_rxjs__WEBPACK_IMPORTED_MODULE_9__["zoneStable"])(zone, function () {
            // Scrolls for the last message to be visible  
            _this4.autoScroll && _this4.scrollToBottom(); // Hides the loading spinner

            _this4.loading = false;
          }), // Replays to all subscribers
          Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_0__["shareReplay"])(1));
          /** Builds an observable telling if the view has been scrolled */

          _this4.scrolled$ = scroller.pipe( // Measure the scrolling distance from the bottom 
          Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_0__["map"])(function (scroll) {
            return scroll.bottom >= 50;
          }), // Distincts the value on changes only
          Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_0__["distinctUntilChanged"])(), // Enables/disables the autoScroll accordingly
          Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_0__["tap"])(function (scrolled) {
            return _this4.autoScroll = !scrolled;
          }), // Run within angular zone
          Object(_wizdm_rxjs__WEBPACK_IMPORTED_MODULE_9__["runInZone"])(_this4.zone));
          return _this4;
        }

        _createClass(ChatComponent, [{
          key: "deleting",
          get: function get() {
            return this.deletingCount > 0;
          }
        }, {
          key: "me",
          get: function get() {
            return this.user.uid;
          }
        }, {
          key: "ngAfterViewInit",
          value: function ngAfterViewInit() {
            var _this5 = this;

            // Syncronizes the status saved withing the selected conversation keeping track of the 
            // last read message timestamp for unread counting purposes
            this.sub = this.conversationId$.pipe( // Gets the latest status value from the actiev conversation
            Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_0__["switchMap"])(function (id) {
              return _this5.fromId(id).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_0__["take"])(1));
            }), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_0__["map"])(function (data) {
              var _a;

              return (_a = data === null || data === void 0 ? void 0 : data.status) === null || _a === void 0 ? void 0 : _a[_this5.me];
            }), // Loads the status from the active conversation
            Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_0__["tap"])(function (status) {
              // Debug
              console.log('Loading', status); // Gets the emoji usage stats from the conversation

              _this5.stats = (status === null || status === void 0 ? void 0 : status.favorites) || _this5.stats; // Updates the favorites emoji based on the new stat

              _this5.keys = _this5.sortFavorites(_this5.stats);
            }), // Expands on the last message
            Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_0__["expand"])(function (status) {
              return _this5.lastMessage().pipe( // Stops saving new data when switching to another conversation
              Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_0__["takeUntil"])(_this5.conversationId$.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_0__["skip"])(1))), // Extracts the last message timestamp
              Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_0__["map"])(function (msg) {
                return msg === null || msg === void 0 ? void 0 : msg.created;
              }), // Ensures saving only updated data
              Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_0__["filter"])(function (created) {
                return !!created && (!(status === null || status === void 0 ? void 0 : status.lastRead) || created > status.lastRead);
              }), // Saves the new data
              Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_0__["switchMap"])(function (lastRead) {
                // Prepares a new status object saving the lastRead timestamp and the conversation favorites
                var newStatus = {
                  favorites: _this5.stats,
                  lastRead: lastRead
                }; // Debug

                console.log('Saving data', newStatus); // Saves the new data returning the new value for the next recursion

                return _this5.conversation.merge({
                  status: _defineProperty({}, _this5.me, newStatus)
                }).then(function () {
                  return newStatus;
                });
              }), // Completes the emission
              Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_0__["take"])(1));
            })).subscribe();
          } // Disposes of the subscriptions

        }, {
          key: "ngOnDestroy",
          value: function ngOnDestroy() {
            this.sub.unsubscribe();
          }
          /** Returns the requested conversation observable provided the id falls among the active ones */

        }, {
          key: "fromId",
          value: function fromId(id) {
            var _this6 = this;

            // Waits until the view has been rendered
            return this.zone.onStable.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_0__["take"])(1), // Catch the QueryList changes
            Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_0__["switchMap"])(function () {
              return _this6.conversationsList.changes.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_0__["startWith"])(null));
            }), // Seeks for the requested conversation
            Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_0__["map"])(function () {
              return _this6.conversationsList.find(function (conv) {
                return conv.id === id;
              });
            }), // Filters out unwanted emissions
            Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_0__["filter"])(function (conv) {
              return !!conv;
            }), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_0__["distinctUntilChanged"])(undefined, function (conv) {
              return conv.id;
            }), // Returns the child conversation's data observable
            Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_0__["switchMap"])(function (conv) {
              return conv.data$;
            }));
          }
          /** Returns the last message currently listed from the active conversation */

        }, {
          key: "lastMessage",
          value: function lastMessage() {
            var _this7 = this;

            // Waits until the view has been rendered
            return this.zone.onStable.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_0__["take"])(1), // Catch the QueryList changes
            Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_0__["switchMap"])(function () {
              return _this7.messagesList.changes.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_0__["startWith"])(null));
            }), // Seeks for the requested message data
            Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_0__["map"])(function () {
              var _a;

              return (_a = _this7.messagesList.last) === null || _a === void 0 ? void 0 : _a.data;
            }), // Filters out duplicates
            Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_0__["distinctUntilChanged"])());
          }
          /** Tracks the deletion of conversations */

        }, {
          key: "onDeleting",
          value: function onDeleting(flag, id) {
            // Tracks how many conversations are in the proess of deleting
            this.deletingCount = this.deletingCount + (flag ? 1 : -1); // Once done...

            if (this.deletingCount <= 0) {
              // Resets the text
              this.text = ""; // Reloads the page 

              this.reload();
            }
          }
          /** Reloads the chat content */

        }, {
          key: "reload",
          value: function reload() {
            var _this8 = this;

            // Starts by navigating to this very same route without any queryParameter. 
            // This will update reset the conversationId and the message thread
            return this.router.navigate(['.'], {
              relativeTo: this.route,
              replaceUrl: true
            }) // Reloads all the conversations from scratch next
            .then(function () {
              return _this8.reload$.next();
            });
          }
          /** Scrolls te view to the bottom to make the latest message visible */

        }, {
          key: "scrollToBottom",
          value: function scrollToBottom() {
            this.scroller.scrollTo({
              bottom: 0
            });
          }
          /** Forces the view to scroll whenever the keyboard expanded */

        }, {
          key: "onKeyboardExpand",
          value: function onKeyboardExpand() {
            // Scrolls to bottom wheneve the autoScroll mode is enabled
            this.autoScroll && this.scrollToBottom();
          }
          /** Send the current message */

        }, {
          key: "send",
          value: function send(body) {
            var _this9 = this;

            // Updates the key usage statistics
            this.updateFavorites(body); // Sends the message adding it to the current conversation thread

            this.thread.add({
              body: body,
              sender: this.me,
              recipient: this.recipient
            }).then(function () {
              // Enables automatic scrolling
              _this9.autoScroll = true; // Resets the last message text

              _this9.text = "";
            }); // Prevents default

            return false;
          }
          /** Sorts the favorite keys based on usage */

        }, {
          key: "sortFavorites",
          value: function sortFavorites(stats) {
            return Object.keys(stats).sort(function (a, b) {
              return stats[b] - stats[a];
            });
          }
          /** Updates the favorite statistics upon the given message */

        }, {
          key: "updateFavorites",
          value: function updateFavorites(body) {
            var _this10 = this;

            var match;
            var emojis = [];

            var _loop = function _loop() {
              var key = match[0];

              if (emojis.findIndex(function (emoji) {
                return emoji === key;
              }) < 0) {
                emojis.push(match[0]);
                _this10.stats[key] = (_this10.stats[key] || 0) + 1;
              }
            };

            while (match = this.regex.exec(body)) {
              _loop();
            }

            if (emojis.length > 0) {
              this.keys = this.sortFavorites(this.stats);
            }
          }
          /** ngFor tracking function */

        }, {
          key: "trackById",
          value: function trackById(data) {
            return data.id;
          }
          /** Sort conversations based on their updated timestamp */

        }, {
          key: "sortByUpdated",
          value: function sortByUpdated(data, dir) {
            var _dir = dir === 'desc' ? -1 : 1;

            return data.sort(function (a, b) {
              var aDate = a === null || a === void 0 ? void 0 : a.data().updated;

              if (!aDate) {
                return _dir;
              }

              var bDate = b === null || b === void 0 ? void 0 : b.data().updated;

              if (!bDate) {
                return -_dir;
              }

              return bDate < aDate ? _dir : bDate > aDate ? -_dir : 0;
            });
          }
        }]);

        return ChatComponent;
      }(_wizdm_connect_database_collection__WEBPACK_IMPORTED_MODULE_3__["DatabaseCollection"]);

      ChatComponent.ɵfac = function ChatComponent_Factory(t) {
        return new (t || ChatComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdirectiveInject"](_wizdm_connect_database__WEBPACK_IMPORTED_MODULE_6__["DatabaseService"]), _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdirectiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_7__["ActivatedRoute"]), _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdirectiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_7__["Router"]), _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdirectiveInject"](app_utils_scrolling__WEBPACK_IMPORTED_MODULE_8__["ScrollObservable"]), _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdirectiveInject"](app_utils_user__WEBPACK_IMPORTED_MODULE_5__["UserProfile"]), _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdirectiveInject"](_wizdm_emoji_utils__WEBPACK_IMPORTED_MODULE_10__["EmojiRegex"]), _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_2__["NgZone"]));
      };

      ChatComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdefineComponent"]({
        type: ChatComponent,
        selectors: [["wm-chat"]],
        viewQuery: function ChatComponent_Query(rf, ctx) {
          if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵviewQuery"](_conversation_conversation_component__WEBPACK_IMPORTED_MODULE_12__["Conversation"], 1);

            _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵviewQuery"](_message_message_component__WEBPACK_IMPORTED_MODULE_13__["Message"], 1);
          }

          if (rf & 2) {
            var _t;

            _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵloadQuery"]()) && (ctx.conversationsList = _t);
            _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵloadQuery"]()) && (ctx.messagesList = _t);
          }
        },
        features: [_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵInheritDefinitionFeature"]],
        decls: 1,
        vars: 1,
        consts: [["gtag", "chat", 4, "wmContent", "wmContentSelect"], ["gtag", "chat"], ["wmActionbar", ""], ["fxFlex", "100", "fxLayout", "column", "fxLayoutAlign", "end stretch"], ["fxLayout", "row", "fxLayoutAlign", "center", 4, "ngIf"], [4, "ngIf"], ["wmFab", "right bottom"], [3, "value", "keys", "disabled", "valueChange", "expanded", "send", 4, "wmFooter"], [3, "dontLeave", 4, "ngIf"], ["mat-stroked-button", "", "type.lt-sm", "icon", "color", "primary", 3, "routerLink"], [3, "icon", 4, "ngIf", "ngIfElse"], ["newMessage", ""], ["wmSidenav", "", "persist", "", "minWidth", "280px", "maxWidth", "350px", 3, "opened", "openedChange"], [3, "icon"], ["color", "primary", 3, "content", "highlight", "showUnread", "deleting", "click", 4, "ngFor", "ngForOf", "ngForTrackBy"], [3, "content", "deleting", "click", 4, "wmToolbar"], [3, "content", "deleting", "click"], ["color", "primary", 3, "content", "highlight", "showUnread", "deleting", "click"], ["fxLayout", "row", "fxLayoutAlign", "center"], ["mode", "indeterminate", "diameter", "40"], [4, "ngFor", "ngForOf", "ngForTrackBy"], [3, "thread", "message"], ["fxFlexAlign", "center", 1, "group-label", "mat-elevation-z2"], ["mat-mini-fab", "", "color", "primary", 3, "click", 4, "ngIf"], ["mat-mini-fab", "", "color", "primary", 3, "click"], [3, "value", "keys", "disabled", "valueChange", "expanded", "send"], [3, "dontLeave"], ["mat-dialog-title", ""], [3, "wm-readme"], ["align", "end"], ["mat-button", "", "color", "warn", "cdkFocusInitial", "", 3, "mat-dialog-close"], ["mat-button", "", "color", "primary", 3, "mat-dialog-close"]],
        template: function ChatComponent_Template(rf, ctx) {
          if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplate"](0, ChatComponent_ng_container_0_Template, 9, 5, "ng-container", 0);
          }

          if (rf & 2) {
            _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("wmContentSelect", "chat");
          }
        },
        directives: [_content_src_lib_streamer_content_directive__WEBPACK_IMPORTED_MODULE_14__["ContentDirective"], _gtag_src_lib_gtag_directive__WEBPACK_IMPORTED_MODULE_15__["GtagDirective"], _navigator_actionbar_actionbar_directive__WEBPACK_IMPORTED_MODULE_16__["ActionbarDirective"], _angular_flex_layout_flex__WEBPACK_IMPORTED_MODULE_17__["DefaultFlexDirective"], _angular_flex_layout_flex__WEBPACK_IMPORTED_MODULE_17__["DefaultLayoutDirective"], _angular_flex_layout_flex__WEBPACK_IMPORTED_MODULE_17__["DefaultLayoutAlignDirective"], _angular_common__WEBPACK_IMPORTED_MODULE_18__["NgIf"], _navigator_fab_fab_directive__WEBPACK_IMPORTED_MODULE_19__["FabDirective"], _navigator_footer_sticky_footer_directive__WEBPACK_IMPORTED_MODULE_20__["StickyFooterDirective"], _angular_material_button__WEBPACK_IMPORTED_MODULE_21__["MatButton"], _elements_src_lib_button_button_media_changer_directive__WEBPACK_IMPORTED_MODULE_22__["ButtonMediaChanger"], _angular_router__WEBPACK_IMPORTED_MODULE_7__["RouterLink"], _navigator_sidenav_sidenav_directive__WEBPACK_IMPORTED_MODULE_23__["SidenavDirective"], _elements_src_lib_icon_icon_component__WEBPACK_IMPORTED_MODULE_24__["IconComponent"], _angular_common__WEBPACK_IMPORTED_MODULE_18__["NgForOf"], _navigator_toolbar_toolbar_directive__WEBPACK_IMPORTED_MODULE_25__["ToolbarDirective"], _conversation_conversation_component__WEBPACK_IMPORTED_MODULE_12__["Conversation"], _angular_material_progress_spinner__WEBPACK_IMPORTED_MODULE_26__["MatSpinner"], _message_message_component__WEBPACK_IMPORTED_MODULE_13__["Message"], _elements_src_lib_balloon_balloon_component__WEBPACK_IMPORTED_MODULE_27__["BalloonComponent"], _angular_flex_layout_flex__WEBPACK_IMPORTED_MODULE_17__["DefaultFlexAlignDirective"], _angular_material_icon__WEBPACK_IMPORTED_MODULE_28__["MatIcon"], _composer_composer_component__WEBPACK_IMPORTED_MODULE_29__["MessageComposer"], _elements_src_lib_dialog_dialog_component__WEBPACK_IMPORTED_MODULE_30__["DialogComponent"], _utils_can_leave_can_leave_directive__WEBPACK_IMPORTED_MODULE_31__["CanLeaveDirective"], _angular_material_dialog__WEBPACK_IMPORTED_MODULE_32__["MatDialogTitle"], _angular_material_dialog__WEBPACK_IMPORTED_MODULE_32__["MatDialogContent"], _readme_src_lib_readme_component__WEBPACK_IMPORTED_MODULE_33__["ReadmeComponent"], _angular_material_dialog__WEBPACK_IMPORTED_MODULE_32__["MatDialogActions"], _angular_material_dialog__WEBPACK_IMPORTED_MODULE_32__["MatDialogClose"]],
        pipes: [_angular_common__WEBPACK_IMPORTED_MODULE_18__["AsyncPipe"], _pipes_src_lib_moment_moment_pipe__WEBPACK_IMPORTED_MODULE_34__["MomentPipe"], _connect_src_lib_database_pipes_pipes_pipe__WEBPACK_IMPORTED_MODULE_35__["CreatedTimePipe"], _connect_src_lib_database_pipes_pipes_pipe__WEBPACK_IMPORTED_MODULE_35__["SnapshotDataPipe"], _pipes_src_lib_moment_moment_pipe__WEBPACK_IMPORTED_MODULE_34__["CalendarPipe"]],
        styles: ["[_nghost-%COMP%] {\n  position: relative;\n  min-height: 100%;\n  width: 100%;\n  padding: 8px;\n  display: flex;\n  flex-direction: column;\n  box-sizing: border-box;\n}\n[_nghost-%COMP%]   .in[_ngcontent-%COMP%], [_nghost-%COMP%]   .out[_ngcontent-%COMP%] {\n  margin-top: 12px;\n}\n[_nghost-%COMP%]   .in[_ngcontent-%COMP%]    + .in[_ngcontent-%COMP%], [_nghost-%COMP%]   .out[_ngcontent-%COMP%]    + .out[_ngcontent-%COMP%] {\n  margin-top: 2px;\n}\n[_nghost-%COMP%]   .group-label[_ngcontent-%COMP%] {\n  margin-top: 12px;\n  margin-bottom: auto;\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL2NoYXQuY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQ0E7RUFDRSxrQkFBQTtFQUNBLGdCQUFBO0VBQ0EsV0FBQTtFQUNBLFlBQUE7RUFFQSxhQUFBO0VBQ0Esc0JBQUE7RUFDQSxzQkFBQTtBQURGO0FBSUU7RUFBWSxnQkFBQTtBQURkO0FBRUU7RUFBeUIsZUFBQTtBQUMzQjtBQUNFO0VBQ0UsZ0JBQUE7RUFDQSxtQkFBQTtBQUNKIiwiZmlsZSI6ImNoYXQuY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyJcbjpob3N0IHtcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xuICBtaW4taGVpZ2h0OiAxMDAlO1xuICB3aWR0aDogMTAwJTtcbiAgcGFkZGluZzogOHB4O1xuXG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG5cbiAgLy8gQ3VzdG9taXplIHRoZSBkaXN0YW5jZSBiZXR3ZWVuIG1lc3NhZ2VzXG4gIC5pbiwgLm91dCB7IG1hcmdpbi10b3A6IDEycHg7IH1cbiAgLmluICsgLmluLCAub3V0ICsgLm91dCB7IG1hcmdpbi10b3A6IDJweDsgfVxuXG4gIC5ncm91cC1sYWJlbCB7IFxuICAgIG1hcmdpbi10b3A6IDEycHg7XG4gICAgbWFyZ2luLWJvdHRvbTogYXV0bzsgXG4gIH1cbn0iXX0= */"],
        data: {
          animation: _chat_animations__WEBPACK_IMPORTED_MODULE_11__["$animations"]
        }
      });
      /***/
    },

    /***/
    "MVGx":
    /*!*******************************************!*\
      !*** ./elements/src/lib/balloon/index.ts ***!
      \*******************************************/

    /*! exports provided: BalloonComponent, BalloonModule */

    /***/
    function MVGx(module, __webpack_exports__, __webpack_require__) {
      "use strict";

      __webpack_require__.r(__webpack_exports__);
      /* harmony import */


      var _balloon_component__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(
      /*! ./balloon.component */
      "ggY3");
      /* harmony reexport (safe) */


      __webpack_require__.d(__webpack_exports__, "BalloonComponent", function () {
        return _balloon_component__WEBPACK_IMPORTED_MODULE_0__["BalloonComponent"];
      });
      /* harmony import */


      var _balloon_module__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(
      /*! ./balloon.module */
      "P4Cd");
      /* harmony reexport (safe) */


      __webpack_require__.d(__webpack_exports__, "BalloonModule", function () {
        return _balloon_module__WEBPACK_IMPORTED_MODULE_1__["BalloonModule"];
      });
      /***/

    },

    /***/
    "P4Cd":
    /*!****************************************************!*\
      !*** ./elements/src/lib/balloon/balloon.module.ts ***!
      \****************************************************/

    /*! exports provided: BalloonModule */

    /***/
    function P4Cd(module, __webpack_exports__, __webpack_require__) {
      "use strict";

      __webpack_require__.r(__webpack_exports__);
      /* harmony export (binding) */


      __webpack_require__.d(__webpack_exports__, "BalloonModule", function () {
        return BalloonModule;
      });
      /* harmony import */


      var _balloon_component__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(
      /*! ./balloon.component */
      "ggY3");
      /* harmony import */


      var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(
      /*! @angular/core */
      "8Y7J");

      var BalloonModule = function BalloonModule() {
        _classCallCheck(this, BalloonModule);
      };

      BalloonModule.ɵmod = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdefineNgModule"]({
        type: BalloonModule
      });
      BalloonModule.ɵinj = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdefineInjector"]({
        factory: function BalloonModule_Factory(t) {
          return new (t || BalloonModule)();
        },
        imports: [[]]
      });

      (function () {
        (typeof ngJitMode === "undefined" || ngJitMode) && _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵsetNgModuleScope"](BalloonModule, {
          declarations: [_balloon_component__WEBPACK_IMPORTED_MODULE_0__["BalloonComponent"]],
          exports: [_balloon_component__WEBPACK_IMPORTED_MODULE_0__["BalloonComponent"]]
        });
      })();
      /***/

    },

    /***/
    "SsNK":
    /*!*****************************************************************!*\
      !*** ./wizdm/src/app/pages/chat/composer/composer.component.ts ***!
      \*****************************************************************/

    /*! exports provided: MessageComposer */

    /***/
    function SsNK(module, __webpack_exports__, __webpack_require__) {
      "use strict";

      __webpack_require__.r(__webpack_exports__);
      /* harmony export (binding) */


      __webpack_require__.d(__webpack_exports__, "MessageComposer", function () {
        return MessageComposer;
      });
      /* harmony import */


      var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(
      /*! @angular/core */
      "8Y7J");
      /* harmony import */


      var _angular_material_expansion__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(
      /*! @angular/material/expansion */
      "o4Yh");
      /* harmony import */


      var _angular_cdk_coercion__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(
      /*! @angular/cdk/coercion */
      "8LU1");
      /* harmony import */


      var app_utils_platform__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(
      /*! app/utils/platform */
      "OWci");
      /* harmony import */


      var app_utils_textarea__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(
      /*! app/utils/textarea */
      "0zyZ");
      /* harmony import */


      var _wizdm_emoji_utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(
      /*! @wizdm/emoji/utils */
      "eyIN");
      /* harmony import */


      var _content_src_lib_streamer_content_directive__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(
      /*! ../../../../../../content/src/lib/streamer/content.directive */
      "Qfjl");
      /* harmony import */


      var _angular_flex_layout_flex__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(
      /*! @angular/flex-layout/flex */
      "VDRc");
      /* harmony import */


      var _angular_common__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(
      /*! @angular/common */
      "SVse");
      /* harmony import */


      var _angular_material_button__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(
      /*! @angular/material/button */
      "Dxy4");
      /* harmony import */


      var _elements_src_lib_icon_icon_component__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(
      /*! ../../../../../../elements/src/lib/icon/icon.component */
      "h0Qx");
      /* harmony import */


      var _angular_material_tooltip__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(
      /*! @angular/material/tooltip */
      "ZFy/");
      /* harmony import */


      var _emoji_keyboard_src_lib_emoji_keyboard_component__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(
      /*! ../../../../../../emoji-keyboard/src/lib/emoji-keyboard.component */
      "0qK6");
      /* harmony import */


      var _angular_material_form_field__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(
      /*! @angular/material/form-field */
      "Q2Ze");
      /* harmony import */


      var _angular_material_input__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(
      /*! @angular/material/input */
      "e6WT");
      /* harmony import */


      var _utils_textarea_typein_adapter_typein_adapter_directive__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(
      /*! ../../../utils/textarea/typein-adapter/typein-adapter.directive */
      "nGdH");
      /* harmony import */


      var _angular_cdk_text_field__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(
      /*! @angular/cdk/text-field */
      "8sFK");
      /* harmony import */


      var _utils_textarea_textarea_newline_textarea_newline_directive__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(
      /*! ../../../utils/textarea/textarea-newline/textarea-newline.directive */
      "gX7t");
      /* harmony import */


      var _emoji_src_lib_input_emoji_input_component__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(
      /*! ../../../../../../emoji/src/lib/input/emoji-input.component */
      "H7fF");
      /* harmony import */


      var _emoji_src_lib_material_emoji_material_directive__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(
      /*! ../../../../../../emoji/src/lib/material/emoji-material.directive */
      "XtK9");

      function MessageComposer_ng_container_0_mat_form_field_2_Template(rf, ctx) {
        if (rf & 1) {
          var _r6 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "mat-form-field", 8);

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "mat-label");

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](2);

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](3, "textarea", 9);

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("valueChange", function MessageComposer_ng_container_0_mat_form_field_2_Template_textarea_valueChange_3_listener($event) {
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r6);

            var ctx_r5 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);

            return ctx_r5.value = $event;
          });

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](4, "      ");

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](5, "wm-icon", 10);

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("mousedown", function MessageComposer_ng_container_0_mat_form_field_2_Template_wm_icon_mousedown_5_listener() {
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r6);

            var ctx_r7 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);

            return !ctx_r7.disabled && ctx_r7.toggleEmojiKeys();
          });

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        }

        if (rf & 2) {
          var msgs_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]().$implicit;

          var ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate"](msgs_r1.placeholder || "Type a message");

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("value", ctx_r2.value)("newline", ctx_r2.enterMode)("disabled", ctx_r2.disabled);

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵclassProp"]("color-disabled", ctx_r2.disabled);

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("icon", (msgs_r1.emoji == null ? null : msgs_r1.emoji.icon) || "insert_emoticon")("matTooltip", (msgs_r1.emoji == null ? null : msgs_r1.emoji.tooltip) || "Insert an emoji");
        }
      }

      function MessageComposer_ng_container_0_ng_template_3_Template(rf, ctx) {
        if (rf & 1) {
          var _r10 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "mat-form-field", 8);

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "mat-label");

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](2);

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](3, "wm-emoji-input", 11);

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("valueChange", function MessageComposer_ng_container_0_ng_template_3_Template_wm_emoji_input_valueChange_3_listener($event) {
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r10);

            var ctx_r9 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);

            return ctx_r9.value = $event;
          });

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](4, "wm-icon", 10);

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("mousedown", function MessageComposer_ng_container_0_ng_template_3_Template_wm_icon_mousedown_4_listener() {
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r10);

            var ctx_r11 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);

            return !ctx_r11.disabled && ctx_r11.toggleEmojiKeys();
          });

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        }

        if (rf & 2) {
          var msgs_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]().$implicit;

          var ctx_r4 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate"](msgs_r1.placeholder || "Type a message");

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("value", ctx_r4.value)("newline", ctx_r4.enterMode)("disabled", ctx_r4.disabled);

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵclassProp"]("color-disabled", ctx_r4.disabled);

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("icon", (msgs_r1.emoji == null ? null : msgs_r1.emoji.icon) || "insert_emoticon")("matTooltip", (msgs_r1.emoji == null ? null : msgs_r1.emoji.tooltip) || "Insert an emoji");
        }
      }

      function MessageComposer_ng_container_0_Template(rf, ctx) {
        if (rf & 1) {
          var _r14 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerStart"](0);

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "div", 1);

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("keydown", function MessageComposer_ng_container_0_Template_div_keydown_1_listener($event) {
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r14);

            var ctx_r13 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();

            return ctx_r13.sendOnEnter($event);
          });

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](2, MessageComposer_ng_container_0_mat_form_field_2_Template, 6, 8, "mat-form-field", 2);

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](3, MessageComposer_ng_container_0_ng_template_3_Template, 5, 8, "ng-template", null, 3, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](5, "button", 4);

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("mousedown", function MessageComposer_ng_container_0_Template_button_mousedown_5_listener() {
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r14);

            var ctx_r15 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();

            return ctx_r15.sendNow();
          });

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](6, "wm-icon", 5);

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](7, "mat-expansion-panel", 6);

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("afterExpand", function MessageComposer_ng_container_0_Template_mat_expansion_panel_afterExpand_7_listener() {
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r14);

            var ctx_r16 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();

            return ctx_r16.expanded.emit();
          });

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](8, "wm-emoji-keyboard", 7);

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("keyPressed", function MessageComposer_ng_container_0_Template_wm_emoji_keyboard_keyPressed_8_listener($event) {
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r14);

            var ctx_r17 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();

            return !ctx_r17.disabled && ctx_r17.typein($event);
          });

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerEnd"]();
        }

        if (rf & 2) {
          var msgs_r1 = ctx.$implicit;

          var _r3 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵreference"](4);

          var ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r0.mode === "native")("ngIfElse", _r3);

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("disabled", ctx_r0.disabled || !ctx_r0.valid);

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("icon", (msgs_r1.send == null ? null : msgs_r1.send.icon) || "send")("matTooltip", (msgs_r1.send == null ? null : msgs_r1.send.tooltip) || "Send");

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("favorites", ctx_r0.keys)("mode", ctx_r0.mode);
        }
      }

      var MessageComposer = /*#__PURE__*/function () {
        function MessageComposer(utils, touch) {
          _classCallCheck(this, MessageComposer);

          this.utils = utils;
          this.touch = touch;
          this._disabled = false;
          /** Value changes event */

          this.valueChange = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
          /** Keyboard expanded event */

          this.expanded = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
          /** Send message event */

          this.send = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        }
        /** Input value */


        _createClass(MessageComposer, [{
          key: "value",
          get: function get() {
            return this._value;
          }
          /** Disables the composer */
          ,
          set: function set(value) {
            this.valueChange.emit(this._value = value);
          }
        }, {
          key: "disabled",
          get: function get() {
            return this._disabled;
          }
          /** Types in the input the specified key */
          ,
          set: function set(value) {
            var _a;

            if (this._disabled = Object(_angular_cdk_coercion__WEBPACK_IMPORTED_MODULE_2__["coerceBooleanProperty"])(value)) {
              // Force the panel closing when disabled
              (_a = this.emojiKeysPanel) === null || _a === void 0 ? void 0 : _a.close();
            }
          }
        }, {
          key: "typein",
          value: function typein(key) {
            var _a; // Uses the TypeInAdapter to insert the key at the current cursr position preventing default to avoid losing focus


            return (_a = this.typeinAdapter) === null || _a === void 0 ? void 0 : _a.typein(key), false;
          }
          /** Toggles emoji keyboard on/off */

        }, {
          key: "toggleEmojiKeys",
          value: function toggleEmojiKeys() {
            // Prevents default to avoid loosing focus (mousedown)
            return this.emojiKeysPanel.toggle(), false;
          }
          /** Returns the globally used emoji mode */

        }, {
          key: "mode",
          get: function get() {
            // Use the very same emoji mode from EmojiSupportModule
            return this.utils.emojiMode();
          }
          /** Selectes how inputs respond to 'Enter' key. */

        }, {
          key: "enterMode",
          get: function get() {
            // Always insert a newline when running on touch enabled devices.
            // Require the 'Shift' key otherwise.
            return this.touch ? 'always' : 'shift';
          }
          /** Sends the message on 'Enter' */

        }, {
          key: "sendOnEnter",
          value: function sendOnEnter(ev) {
            // Sends on 'Enter' only on non-touch enabled devices
            return this.touch || ev.shiftKey || ev.key !== 'Enter' || this.sendNow();
          }
        }, {
          key: "valid",
          get: function get() {
            return (this.value || '').match(/^\s*$/) === null;
          }
          /** Sends the message emitting the relevant event */

        }, {
          key: "sendNow",
          value: function sendNow() {
            this.valid && this.send.emit(this.value);
            return false;
          }
        }]);

        return MessageComposer;
      }();

      MessageComposer.ɵfac = function MessageComposer_Factory(t) {
        return new (t || MessageComposer)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_wizdm_emoji_utils__WEBPACK_IMPORTED_MODULE_5__["EmojiUtils"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](app_utils_platform__WEBPACK_IMPORTED_MODULE_3__["HasTouchScreen"]));
      };

      MessageComposer.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineComponent"]({
        type: MessageComposer,
        selectors: [["wm-composer"]],
        viewQuery: function MessageComposer_Query(rf, ctx) {
          if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵviewQuery"](_angular_material_expansion__WEBPACK_IMPORTED_MODULE_1__["MatExpansionPanel"], 1);

            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵviewQuery"](app_utils_textarea__WEBPACK_IMPORTED_MODULE_4__["TypeinAdapter"], 1);
          }

          if (rf & 2) {
            var _t;

            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵloadQuery"]()) && (ctx.emojiKeysPanel = _t.first);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵloadQuery"]()) && (ctx.typeinAdapter = _t.first);
          }
        },
        hostAttrs: [1, "wm-composer"],
        inputs: {
          value: "value",
          keys: "keys",
          disabled: "disabled"
        },
        outputs: {
          valueChange: "valueChange",
          expanded: "expanded",
          send: "send"
        },
        decls: 1,
        vars: 1,
        consts: [[4, "wmContent", "wmContentSelect"], ["fxLayout", "row", "fxLayoutAlign", "center end", 1, "input", 3, "keydown"], ["appearance", "legacy", "fxFlex", "1 1 auto", 4, "ngIf", "ngIfElse"], ["webMode", ""], ["mat-icon-button", "", 3, "disabled", "mousedown"], [3, "icon", "matTooltip"], ["hideToggle", "", 1, "padding-0", "mat-elevation-z0", 3, "afterExpand"], [3, "favorites", "mode", "keyPressed"], ["appearance", "legacy", "fxFlex", "1 1 auto"], ["matInput", "", "typein", "", "cdkTextareaAutosize", "", "cdkAutosizeMinRows", "1", 3, "value", "newline", "disabled", "valueChange"], ["inline", "", "matSuffix", "", 1, "tools", 3, "icon", "matTooltip", "mousedown"], ["matEmoji", "", "typein", "", 3, "value", "newline", "disabled", "valueChange"]],
        template: function MessageComposer_Template(rf, ctx) {
          if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](0, MessageComposer_ng_container_0_Template, 9, 7, "ng-container", 0);
          }

          if (rf & 2) {
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("wmContentSelect", "chat.composer");
          }
        },
        directives: [_content_src_lib_streamer_content_directive__WEBPACK_IMPORTED_MODULE_6__["ContentDirective"], _angular_flex_layout_flex__WEBPACK_IMPORTED_MODULE_7__["DefaultLayoutDirective"], _angular_flex_layout_flex__WEBPACK_IMPORTED_MODULE_7__["DefaultLayoutAlignDirective"], _angular_common__WEBPACK_IMPORTED_MODULE_8__["NgIf"], _angular_material_button__WEBPACK_IMPORTED_MODULE_9__["MatButton"], _elements_src_lib_icon_icon_component__WEBPACK_IMPORTED_MODULE_10__["IconComponent"], _angular_material_tooltip__WEBPACK_IMPORTED_MODULE_11__["MatTooltip"], _angular_material_expansion__WEBPACK_IMPORTED_MODULE_1__["MatExpansionPanel"], _emoji_keyboard_src_lib_emoji_keyboard_component__WEBPACK_IMPORTED_MODULE_12__["EmojiKeyboardComponent"], _angular_material_form_field__WEBPACK_IMPORTED_MODULE_13__["MatFormField"], _angular_flex_layout_flex__WEBPACK_IMPORTED_MODULE_7__["DefaultFlexDirective"], _angular_material_form_field__WEBPACK_IMPORTED_MODULE_13__["MatLabel"], _angular_material_input__WEBPACK_IMPORTED_MODULE_14__["MatInput"], _utils_textarea_typein_adapter_typein_adapter_directive__WEBPACK_IMPORTED_MODULE_15__["TypeinAdapter"], _angular_cdk_text_field__WEBPACK_IMPORTED_MODULE_16__["CdkTextareaAutosize"], _utils_textarea_textarea_newline_textarea_newline_directive__WEBPACK_IMPORTED_MODULE_17__["TextareaNewline"], _angular_material_form_field__WEBPACK_IMPORTED_MODULE_13__["MatSuffix"], _emoji_src_lib_input_emoji_input_component__WEBPACK_IMPORTED_MODULE_18__["EmojiInput"], _emoji_src_lib_material_emoji_material_directive__WEBPACK_IMPORTED_MODULE_19__["EmojiMaterial"]],
        styles: ["[_nghost-%COMP%] {\n  position: relative;\n  display: flex;\n  flex-flow: column;\n  justify-content: center;\n  align-items: stretch;\n  box-sizing: border-box;\n  margin-top: 5px;\n}\n[_nghost-%COMP%]   .input[_ngcontent-%COMP%] {\n  margin: 0 20px;\n}\n[_nghost-%COMP%]   .wm-emoji-input[_ngcontent-%COMP%], [_nghost-%COMP%]   textarea[_ngcontent-%COMP%] {\n  word-break: break-all;\n}\n[_nghost-%COMP%]   .tools[_ngcontent-%COMP%] {\n  cursor: pointer;\n  vertical-align: middle;\n}\n[_nghost-%COMP%]   .mat-icon-button[_ngcontent-%COMP%] {\n  margin-bottom: 10px;\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL2NvbXBvc2VyLmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUVBO0VBQ0Usa0JBQUE7RUFFQSxhQUFBO0VBQ0EsaUJBQUE7RUFDQSx1QkFBQTtFQUNBLG9CQUFBO0VBQ0Esc0JBQUE7RUFFQSxlQUFBO0FBSEY7QUFLRTtFQUNFLGNBQUE7QUFISjtBQU1FO0VBQ0UscUJBQUE7QUFKSjtBQU9FO0VBQ0UsZUFBQTtFQUNBLHNCQUFBO0FBTEo7QUFRRTtFQUNFLG1CQUFBO0FBTkoiLCJmaWxlIjoiY29tcG9zZXIuY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyJcblxuOmhvc3Qge1xuICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gIFxuICBkaXNwbGF5OiBmbGV4O1xuICBmbGV4LWZsb3c6IGNvbHVtbjtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gIGFsaWduLWl0ZW1zOiBzdHJldGNoOyBcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcblxuICBtYXJnaW4tdG9wOiA1cHg7XG5cbiAgLmlucHV0IHtcbiAgICBtYXJnaW46IDAgMjBweDtcbiAgfVxuXG4gIC53bS1lbW9qaS1pbnB1dCwgdGV4dGFyZWEge1xuICAgIHdvcmQtYnJlYWs6IGJyZWFrLWFsbDtcbiAgfVxuXG4gIC50b29scyB7XG4gICAgY3Vyc29yOiBwb2ludGVyO1xuICAgIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7XG4gIH1cblxuICAubWF0LWljb24tYnV0dG9uIHtcbiAgICBtYXJnaW4tYm90dG9tOiAxMHB4O1xuICB9XG59Il19 */"]
      });
      /***/
    },

    /***/
    "UaKi":
    /*!************************************************************!*\
      !*** ./wizdm/src/app/pages/chat/message/message.module.ts ***!
      \************************************************************/

    /*! exports provided: MessageModule */

    /***/
    function UaKi(module, __webpack_exports__, __webpack_require__) {
      "use strict";

      __webpack_require__.r(__webpack_exports__);
      /* harmony export (binding) */


      __webpack_require__.d(__webpack_exports__, "MessageModule", function () {
        return MessageModule;
      });
      /* harmony import */


      var _angular_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(
      /*! @angular/common */
      "SVse");
      /* harmony import */


      var _angular_flex_layout__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(
      /*! @angular/flex-layout */
      "u9T3");
      /* harmony import */


      var _angular_material_icon__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(
      /*! @angular/material/icon */
      "Tj54");
      /* harmony import */


      var _angular_material_menu__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(
      /*! @angular/material/menu */
      "rJgo");
      /* harmony import */


      var _wizdm_emoji_text__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(
      /*! @wizdm/emoji/text */
      "WIkw");
      /* harmony import */


      var _wizdm_elements_icon__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(
      /*! @wizdm/elements/icon */
      "txmD");
      /* harmony import */


      var _wizdm_elements_balloon__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(
      /*! @wizdm/elements/balloon */
      "MVGx");
      /* harmony import */


      var _wizdm_pipes_moment__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(
      /*! @wizdm/pipes/moment */
      "pvxE");
      /* harmony import */


      var _wizdm_connect_database_pipes__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(
      /*! @wizdm/connect/database/pipes */
      "pKCE");
      /* harmony import */


      var _wizdm_content__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(
      /*! @wizdm/content */
      "g7MM");
      /* harmony import */


      var _message_component__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(
      /*! ./message.component */
      "ntp/");
      /* harmony import */


      var _angular_core__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(
      /*! @angular/core */
      "8Y7J");

      var MessageModule = function MessageModule() {
        _classCallCheck(this, MessageModule);
      };

      MessageModule.ɵmod = _angular_core__WEBPACK_IMPORTED_MODULE_11__["ɵɵdefineNgModule"]({
        type: MessageModule
      });
      MessageModule.ɵinj = _angular_core__WEBPACK_IMPORTED_MODULE_11__["ɵɵdefineInjector"]({
        factory: function MessageModule_Factory(t) {
          return new (t || MessageModule)();
        },
        imports: [[_angular_common__WEBPACK_IMPORTED_MODULE_0__["CommonModule"], _angular_flex_layout__WEBPACK_IMPORTED_MODULE_1__["FlexLayoutModule"], _angular_material_icon__WEBPACK_IMPORTED_MODULE_2__["MatIconModule"], _angular_material_menu__WEBPACK_IMPORTED_MODULE_3__["MatMenuModule"], _wizdm_emoji_text__WEBPACK_IMPORTED_MODULE_4__["EmojiTextModule"], _wizdm_elements_icon__WEBPACK_IMPORTED_MODULE_5__["IconModule"], _wizdm_elements_balloon__WEBPACK_IMPORTED_MODULE_6__["BalloonModule"], _wizdm_pipes_moment__WEBPACK_IMPORTED_MODULE_7__["MomentPipesModule"], _wizdm_connect_database_pipes__WEBPACK_IMPORTED_MODULE_8__["PipesModule"], _wizdm_content__WEBPACK_IMPORTED_MODULE_9__["ContentModule"]]]
      });

      (function () {
        (typeof ngJitMode === "undefined" || ngJitMode) && _angular_core__WEBPACK_IMPORTED_MODULE_11__["ɵɵsetNgModuleScope"](MessageModule, {
          declarations: [_message_component__WEBPACK_IMPORTED_MODULE_10__["Message"]],
          imports: [_angular_common__WEBPACK_IMPORTED_MODULE_0__["CommonModule"], _angular_flex_layout__WEBPACK_IMPORTED_MODULE_1__["FlexLayoutModule"], _angular_material_icon__WEBPACK_IMPORTED_MODULE_2__["MatIconModule"], _angular_material_menu__WEBPACK_IMPORTED_MODULE_3__["MatMenuModule"], _wizdm_emoji_text__WEBPACK_IMPORTED_MODULE_4__["EmojiTextModule"], _wizdm_elements_icon__WEBPACK_IMPORTED_MODULE_5__["IconModule"], _wizdm_elements_balloon__WEBPACK_IMPORTED_MODULE_6__["BalloonModule"], _wizdm_pipes_moment__WEBPACK_IMPORTED_MODULE_7__["MomentPipesModule"], _wizdm_connect_database_pipes__WEBPACK_IMPORTED_MODULE_8__["PipesModule"], _wizdm_content__WEBPACK_IMPORTED_MODULE_9__["ContentModule"]],
          exports: [_message_component__WEBPACK_IMPORTED_MODULE_10__["Message"]]
        });
      })();
      /***/

    },

    /***/
    "VEY1":
    /*!**************************************************************!*\
      !*** ./wizdm/src/app/navigator/toolbar/toolbar.directive.ts ***!
      \**************************************************************/

    /*! exports provided: ToolbarDirective */

    /***/
    function VEY1(module, __webpack_exports__, __webpack_require__) {
      "use strict";

      __webpack_require__.r(__webpack_exports__);
      /* harmony export (binding) */


      __webpack_require__.d(__webpack_exports__, "ToolbarDirective", function () {
        return ToolbarDirective;
      });
      /* harmony import */


      var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(
      /*! @angular/core */
      "8Y7J");
      /* harmony import */


      var _wizdm_teleport__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(
      /*! @wizdm/teleport */
      "EiPp");

      var ToolbarDirective = /*#__PURE__*/function () {
        function ToolbarDirective(teleport, template) {
          _classCallCheck(this, ToolbarDirective);

          this.teleport = teleport;
          this.template = template;
        } // Activates the toolbar portal


        _createClass(ToolbarDirective, [{
          key: "ngOnInit",
          value: function ngOnInit() {
            this.teleport.activate('toolbar', this.template, {
              align: this.wmToolbarAlign,
              gap: this.wmToolbarGap
            });
          } // Refreshes on input change

        }, {
          key: "ngOnChanges",
          value: function ngOnChanges(changes) {
            this.ngOnInit();
          } // Releases the portal when done

        }, {
          key: "ngOnDestroy",
          value: function ngOnDestroy() {
            this.teleport.clear('toolbar', this.template);
          }
        }]);

        return ToolbarDirective;
      }();

      ToolbarDirective.ɵfac = function ToolbarDirective_Factory(t) {
        return new (t || ToolbarDirective)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_wizdm_teleport__WEBPACK_IMPORTED_MODULE_1__["TeleportService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["TemplateRef"]));
      };

      ToolbarDirective.ɵdir = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineDirective"]({
        type: ToolbarDirective,
        selectors: [["ng-template", "wmToolbar", ""]],
        inputs: {
          wmToolbarAlign: "wmToolbarAlign",
          wmToolbarGap: "wmToolbarGap"
        },
        features: [_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵNgOnChangesFeature"]]
      });
      /***/
    },

    /***/
    "XQFs":
    /*!********************************************************!*\
      !*** ./wizdm/src/app/pages/chat/conversation/index.ts ***!
      \********************************************************/

    /*! exports provided: Conversation, ConversationModule */

    /***/
    function XQFs(module, __webpack_exports__, __webpack_require__) {
      "use strict";

      __webpack_require__.r(__webpack_exports__);
      /* harmony import */


      var _conversation_component__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(
      /*! ./conversation.component */
      "A+Un");
      /* harmony reexport (safe) */


      __webpack_require__.d(__webpack_exports__, "Conversation", function () {
        return _conversation_component__WEBPACK_IMPORTED_MODULE_0__["Conversation"];
      });
      /* harmony import */


      var _conversation_module__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(
      /*! ./conversation.module */
      "aNZz");
      /* harmony reexport (safe) */


      __webpack_require__.d(__webpack_exports__, "ConversationModule", function () {
        return _conversation_module__WEBPACK_IMPORTED_MODULE_1__["ConversationModule"];
      });
      /***/

    },

    /***/
    "aNZz":
    /*!**********************************************************************!*\
      !*** ./wizdm/src/app/pages/chat/conversation/conversation.module.ts ***!
      \**********************************************************************/

    /*! exports provided: ConversationModule */

    /***/
    function aNZz(module, __webpack_exports__, __webpack_require__) {
      "use strict";

      __webpack_require__.r(__webpack_exports__);
      /* harmony export (binding) */


      __webpack_require__.d(__webpack_exports__, "ConversationModule", function () {
        return ConversationModule;
      });
      /* harmony import */


      var _angular_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(
      /*! @angular/common */
      "SVse");
      /* harmony import */


      var _angular_router__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(
      /*! @angular/router */
      "iInd");
      /* harmony import */


      var _angular_flex_layout__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(
      /*! @angular/flex-layout */
      "u9T3");
      /* harmony import */


      var _angular_material_badge__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(
      /*! @angular/material/badge */
      "8Qe2");
      /* harmony import */


      var _angular_material_button__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(
      /*! @angular/material/button */
      "Dxy4");
      /* harmony import */


      var _angular_material_icon__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(
      /*! @angular/material/icon */
      "Tj54");
      /* harmony import */


      var _angular_material_menu__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(
      /*! @angular/material/menu */
      "rJgo");
      /* harmony import */


      var _angular_material_progress_bar__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(
      /*! @angular/material/progress-bar */
      "BTe0");
      /* harmony import */


      var _wizdm_emoji_text__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(
      /*! @wizdm/emoji/text */
      "WIkw");
      /* harmony import */


      var _wizdm_readme__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(
      /*! @wizdm/readme */
      "C1VQ");
      /* harmony import */


      var _wizdm_elements_avatar__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(
      /*! @wizdm/elements/avatar */
      "Entk");
      /* harmony import */


      var _wizdm_elements_dialog__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(
      /*! @wizdm/elements/dialog */
      "XNpK");
      /* harmony import */


      var _wizdm_content__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(
      /*! @wizdm/content */
      "g7MM");
      /* harmony import */


      var _wizdm_pipes_moment__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(
      /*! @wizdm/pipes/moment */
      "pvxE");
      /* harmony import */


      var _wizdm_connect_database_pipes__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(
      /*! @wizdm/connect/database/pipes */
      "pKCE");
      /* harmony import */


      var _conversation_component__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(
      /*! ./conversation.component */
      "A+Un");
      /* harmony import */


      var _angular_core__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(
      /*! @angular/core */
      "8Y7J");

      var ConversationModule = function ConversationModule() {
        _classCallCheck(this, ConversationModule);
      };

      ConversationModule.ɵmod = _angular_core__WEBPACK_IMPORTED_MODULE_16__["ɵɵdefineNgModule"]({
        type: ConversationModule
      });
      ConversationModule.ɵinj = _angular_core__WEBPACK_IMPORTED_MODULE_16__["ɵɵdefineInjector"]({
        factory: function ConversationModule_Factory(t) {
          return new (t || ConversationModule)();
        },
        imports: [[_angular_common__WEBPACK_IMPORTED_MODULE_0__["CommonModule"], _angular_router__WEBPACK_IMPORTED_MODULE_1__["RouterModule"], _angular_flex_layout__WEBPACK_IMPORTED_MODULE_2__["FlexLayoutModule"], _angular_material_badge__WEBPACK_IMPORTED_MODULE_3__["MatBadgeModule"], _angular_material_button__WEBPACK_IMPORTED_MODULE_4__["MatButtonModule"], _angular_material_icon__WEBPACK_IMPORTED_MODULE_5__["MatIconModule"], _angular_material_menu__WEBPACK_IMPORTED_MODULE_6__["MatMenuModule"], _angular_material_progress_bar__WEBPACK_IMPORTED_MODULE_7__["MatProgressBarModule"], _wizdm_emoji_text__WEBPACK_IMPORTED_MODULE_8__["EmojiTextModule"], _wizdm_readme__WEBPACK_IMPORTED_MODULE_9__["ReadmeModule"], _wizdm_elements_avatar__WEBPACK_IMPORTED_MODULE_10__["AvatarModule"], _wizdm_elements_dialog__WEBPACK_IMPORTED_MODULE_11__["DialogModule"], _wizdm_content__WEBPACK_IMPORTED_MODULE_12__["ContentModule"], _wizdm_pipes_moment__WEBPACK_IMPORTED_MODULE_13__["MomentPipesModule"], _wizdm_connect_database_pipes__WEBPACK_IMPORTED_MODULE_14__["PipesModule"]]]
      });

      (function () {
        (typeof ngJitMode === "undefined" || ngJitMode) && _angular_core__WEBPACK_IMPORTED_MODULE_16__["ɵɵsetNgModuleScope"](ConversationModule, {
          declarations: [_conversation_component__WEBPACK_IMPORTED_MODULE_15__["Conversation"]],
          imports: [_angular_common__WEBPACK_IMPORTED_MODULE_0__["CommonModule"], _angular_router__WEBPACK_IMPORTED_MODULE_1__["RouterModule"], _angular_flex_layout__WEBPACK_IMPORTED_MODULE_2__["FlexLayoutModule"], _angular_material_badge__WEBPACK_IMPORTED_MODULE_3__["MatBadgeModule"], _angular_material_button__WEBPACK_IMPORTED_MODULE_4__["MatButtonModule"], _angular_material_icon__WEBPACK_IMPORTED_MODULE_5__["MatIconModule"], _angular_material_menu__WEBPACK_IMPORTED_MODULE_6__["MatMenuModule"], _angular_material_progress_bar__WEBPACK_IMPORTED_MODULE_7__["MatProgressBarModule"], _wizdm_emoji_text__WEBPACK_IMPORTED_MODULE_8__["EmojiTextModule"], _wizdm_readme__WEBPACK_IMPORTED_MODULE_9__["ReadmeModule"], _wizdm_elements_avatar__WEBPACK_IMPORTED_MODULE_10__["AvatarModule"], _wizdm_elements_dialog__WEBPACK_IMPORTED_MODULE_11__["DialogModule"], _wizdm_content__WEBPACK_IMPORTED_MODULE_12__["ContentModule"], _wizdm_pipes_moment__WEBPACK_IMPORTED_MODULE_13__["MomentPipesModule"], _wizdm_connect_database_pipes__WEBPACK_IMPORTED_MODULE_14__["PipesModule"]],
          exports: [_conversation_component__WEBPACK_IMPORTED_MODULE_15__["Conversation"]]
        });
      })();
      /***/

    },

    /***/
    "bleV":
    /*!**************************************************************!*\
      !*** ./wizdm/src/app/pages/chat/composer/composer.module.ts ***!
      \**************************************************************/

    /*! exports provided: ComposerModule */

    /***/
    function bleV(module, __webpack_exports__, __webpack_require__) {
      "use strict";

      __webpack_require__.r(__webpack_exports__);
      /* harmony export (binding) */


      __webpack_require__.d(__webpack_exports__, "ComposerModule", function () {
        return ComposerModule;
      });
      /* harmony import */


      var _angular_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(
      /*! @angular/common */
      "SVse");
      /* harmony import */


      var _angular_flex_layout__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(
      /*! @angular/flex-layout */
      "u9T3");
      /* harmony import */


      var _angular_material_button__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(
      /*! @angular/material/button */
      "Dxy4");
      /* harmony import */


      var _angular_material_input__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(
      /*! @angular/material/input */
      "e6WT");
      /* harmony import */


      var _angular_material_form_field__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(
      /*! @angular/material/form-field */
      "Q2Ze");
      /* harmony import */


      var _angular_material_expansion__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(
      /*! @angular/material/expansion */
      "o4Yh");
      /* harmony import */


      var _angular_material_tooltip__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(
      /*! @angular/material/tooltip */
      "ZFy/");
      /* harmony import */


      var _wizdm_content__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(
      /*! @wizdm/content */
      "g7MM");
      /* harmony import */


      var _wizdm_elements_icon__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(
      /*! @wizdm/elements/icon */
      "txmD");
      /* harmony import */


      var _wizdm_emoji_input__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(
      /*! @wizdm/emoji/input */
      "UYqx");
      /* harmony import */


      var _wizdm_emoji_material__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(
      /*! @wizdm/emoji/material */
      "KRLS");
      /* harmony import */


      var _wizdm_emoji_keyboard__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(
      /*! @wizdm/emoji-keyboard */
      "glvt");
      /* harmony import */


      var app_utils_textarea__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(
      /*! app/utils/textarea */
      "0zyZ");
      /* harmony import */


      var _composer_component__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(
      /*! ./composer.component */
      "SsNK");
      /* harmony import */


      var _angular_core__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(
      /*! @angular/core */
      "8Y7J");

      var ComposerModule = function ComposerModule() {
        _classCallCheck(this, ComposerModule);
      };

      ComposerModule.ɵmod = _angular_core__WEBPACK_IMPORTED_MODULE_14__["ɵɵdefineNgModule"]({
        type: ComposerModule
      });
      ComposerModule.ɵinj = _angular_core__WEBPACK_IMPORTED_MODULE_14__["ɵɵdefineInjector"]({
        factory: function ComposerModule_Factory(t) {
          return new (t || ComposerModule)();
        },
        imports: [[_angular_common__WEBPACK_IMPORTED_MODULE_0__["CommonModule"], _angular_flex_layout__WEBPACK_IMPORTED_MODULE_1__["FlexLayoutModule"], _angular_material_button__WEBPACK_IMPORTED_MODULE_2__["MatButtonModule"], _angular_material_input__WEBPACK_IMPORTED_MODULE_3__["MatInputModule"], _angular_material_form_field__WEBPACK_IMPORTED_MODULE_4__["MatFormFieldModule"], _angular_material_expansion__WEBPACK_IMPORTED_MODULE_5__["MatExpansionModule"], _angular_material_tooltip__WEBPACK_IMPORTED_MODULE_6__["MatTooltipModule"], _wizdm_emoji_input__WEBPACK_IMPORTED_MODULE_9__["EmojiInputModule"], _wizdm_emoji_material__WEBPACK_IMPORTED_MODULE_10__["EmojiMaterialModule"], _wizdm_emoji_keyboard__WEBPACK_IMPORTED_MODULE_11__["EmojiKeyboardModule"], _wizdm_content__WEBPACK_IMPORTED_MODULE_7__["ContentModule"], _wizdm_elements_icon__WEBPACK_IMPORTED_MODULE_8__["IconModule"], app_utils_textarea__WEBPACK_IMPORTED_MODULE_12__["TextareaModule"]]]
      });

      (function () {
        (typeof ngJitMode === "undefined" || ngJitMode) && _angular_core__WEBPACK_IMPORTED_MODULE_14__["ɵɵsetNgModuleScope"](ComposerModule, {
          declarations: [_composer_component__WEBPACK_IMPORTED_MODULE_13__["MessageComposer"]],
          imports: [_angular_common__WEBPACK_IMPORTED_MODULE_0__["CommonModule"], _angular_flex_layout__WEBPACK_IMPORTED_MODULE_1__["FlexLayoutModule"], _angular_material_button__WEBPACK_IMPORTED_MODULE_2__["MatButtonModule"], _angular_material_input__WEBPACK_IMPORTED_MODULE_3__["MatInputModule"], _angular_material_form_field__WEBPACK_IMPORTED_MODULE_4__["MatFormFieldModule"], _angular_material_expansion__WEBPACK_IMPORTED_MODULE_5__["MatExpansionModule"], _angular_material_tooltip__WEBPACK_IMPORTED_MODULE_6__["MatTooltipModule"], _wizdm_emoji_input__WEBPACK_IMPORTED_MODULE_9__["EmojiInputModule"], _wizdm_emoji_material__WEBPACK_IMPORTED_MODULE_10__["EmojiMaterialModule"], _wizdm_emoji_keyboard__WEBPACK_IMPORTED_MODULE_11__["EmojiKeyboardModule"], _wizdm_content__WEBPACK_IMPORTED_MODULE_7__["ContentModule"], _wizdm_elements_icon__WEBPACK_IMPORTED_MODULE_8__["IconModule"], app_utils_textarea__WEBPACK_IMPORTED_MODULE_12__["TextareaModule"]],
          exports: [_composer_component__WEBPACK_IMPORTED_MODULE_13__["MessageComposer"]]
        });
      })();
      /***/

    },

    /***/
    "dMjL":
    /*!***************************************************!*\
      !*** ./wizdm/src/app/pages/chat/message/index.ts ***!
      \***************************************************/

    /*! exports provided: Message, MessageModule */

    /***/
    function dMjL(module, __webpack_exports__, __webpack_require__) {
      "use strict";

      __webpack_require__.r(__webpack_exports__);
      /* harmony import */


      var _message_component__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(
      /*! ./message.component */
      "ntp/");
      /* harmony reexport (safe) */


      __webpack_require__.d(__webpack_exports__, "Message", function () {
        return _message_component__WEBPACK_IMPORTED_MODULE_0__["Message"];
      });
      /* harmony import */


      var _message_module__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(
      /*! ./message.module */
      "UaKi");
      /* harmony reexport (safe) */


      __webpack_require__.d(__webpack_exports__, "MessageModule", function () {
        return _message_module__WEBPACK_IMPORTED_MODULE_1__["MessageModule"];
      });
      /***/

    },

    /***/
    "ggY3":
    /*!*******************************************************!*\
      !*** ./elements/src/lib/balloon/balloon.component.ts ***!
      \*******************************************************/

    /*! exports provided: BalloonComponent */

    /***/
    function ggY3(module, __webpack_exports__, __webpack_require__) {
      "use strict";

      __webpack_require__.r(__webpack_exports__);
      /* harmony export (binding) */


      __webpack_require__.d(__webpack_exports__, "BalloonComponent", function () {
        return BalloonComponent;
      });
      /* harmony import */


      var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(
      /*! @angular/core */
      "8Y7J");

      var _c0 = ["*"];

      var BalloonComponent = function BalloonComponent() {
        _classCallCheck(this, BalloonComponent);
      };

      BalloonComponent.ɵfac = function BalloonComponent_Factory(t) {
        return new (t || BalloonComponent)();
      };

      BalloonComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineComponent"]({
        type: BalloonComponent,
        selectors: [["wm-balloon"]],
        hostAttrs: [1, "wm-balloon"],
        hostVars: 3,
        hostBindings: function BalloonComponent_HostBindings(rf, ctx) {
          if (rf & 2) {
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵattribute"]("side", ctx.side)("anchor", ctx.anchor)("color", ctx.color);
          }
        },
        inputs: {
          side: "side",
          anchor: "anchor",
          color: "color"
        },
        ngContentSelectors: _c0,
        decls: 2,
        vars: 0,
        consts: [[1, "balloon-content"]],
        template: function BalloonComponent_Template(rf, ctx) {
          if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵprojectionDef"]();

            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 0);

            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵprojection"](1);

            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
          }
        },
        styles: [".wm-balloon {\n  position: relative;\n  display: inline-block;\n  border-radius: 6px;\n  box-sizing: border-box;\n}\n.wm-balloon .balloon-content {\n  position: relative;\n  background-color: inherit;\n  border-radius: inherit;\n  padding: 12px;\n  overflow: hidden;\n}\n.wm-balloon[side=bottom] {\n  margin-bottom: 8.4px;\n}\n.wm-balloon[side=bottom][anchor=center]::after {\n  position: absolute;\n  display: block;\n  content: \"\";\n  width: 12px;\n  height: 12px;\n  transform-origin: 50% 50%;\n  border-width: inherit;\n  border-color: inherit;\n  border-right-style: inherit;\n  border-bottom-style: inherit;\n  border-top-style: none;\n  border-left-style: none;\n  background-color: inherit;\n  box-sizing: border-box;\n  left: calc(50% - 6px);\n  bottom: -1px;\n  transform: translateY(6px) rotate(45deg);\n}\n.wm-balloon[side=bottom] {\n  margin-bottom: 8.4px;\n}\n.wm-balloon[side=bottom][anchor=start]::after {\n  position: absolute;\n  display: block;\n  content: \"\";\n  width: 12px;\n  height: 12px;\n  transform-origin: 50% 50%;\n  border-width: inherit;\n  border-color: inherit;\n  border-right-style: inherit;\n  border-bottom-style: inherit;\n  border-top-style: none;\n  border-left-style: none;\n  background-color: inherit;\n  box-sizing: border-box;\n  left: 12px;\n  bottom: -1px;\n  transform: translateY(6px) rotate(45deg);\n}\n.wm-balloon[side=bottom] {\n  margin-bottom: 8.4px;\n}\n.wm-balloon[side=bottom][anchor=end]::after {\n  position: absolute;\n  display: block;\n  content: \"\";\n  width: 12px;\n  height: 12px;\n  transform-origin: 50% 50%;\n  border-width: inherit;\n  border-color: inherit;\n  border-right-style: inherit;\n  border-bottom-style: inherit;\n  border-top-style: none;\n  border-left-style: none;\n  background-color: inherit;\n  box-sizing: border-box;\n  right: 12px;\n  bottom: -1px;\n  transform: translateY(6px) rotate(45deg);\n}\n.wm-balloon[side=left] {\n  margin-left: 8.4px;\n}\n.wm-balloon[side=left][anchor=center]::after {\n  position: absolute;\n  display: block;\n  content: \"\";\n  width: 12px;\n  height: 12px;\n  transform-origin: 50% 50%;\n  border-width: inherit;\n  border-color: inherit;\n  border-right-style: inherit;\n  border-bottom-style: inherit;\n  border-top-style: none;\n  border-left-style: none;\n  background-color: inherit;\n  box-sizing: border-box;\n  top: calc(50% - 6px);\n  left: -1px;\n  transform: translateX(-6px) rotate(135deg);\n}\n.wm-balloon[side=left] {\n  margin-left: 8.4px;\n}\n.wm-balloon[side=left][anchor=start]::after {\n  position: absolute;\n  display: block;\n  content: \"\";\n  width: 12px;\n  height: 12px;\n  transform-origin: 50% 50%;\n  border-width: inherit;\n  border-color: inherit;\n  border-right-style: inherit;\n  border-bottom-style: inherit;\n  border-top-style: none;\n  border-left-style: none;\n  background-color: inherit;\n  box-sizing: border-box;\n  top: 12px;\n  left: -1px;\n  transform: translateX(-6px) rotate(135deg);\n}\n.wm-balloon[side=left] {\n  margin-left: 8.4px;\n}\n.wm-balloon[side=left][anchor=end]::after {\n  position: absolute;\n  display: block;\n  content: \"\";\n  width: 12px;\n  height: 12px;\n  transform-origin: 50% 50%;\n  border-width: inherit;\n  border-color: inherit;\n  border-right-style: inherit;\n  border-bottom-style: inherit;\n  border-top-style: none;\n  border-left-style: none;\n  background-color: inherit;\n  box-sizing: border-box;\n  bottom: 12px;\n  left: -1px;\n  transform: translateX(-6px) rotate(135deg);\n}\n.wm-balloon[side=right] {\n  margin-right: 8.4px;\n}\n.wm-balloon[side=right][anchor=center]::after {\n  position: absolute;\n  display: block;\n  content: \"\";\n  width: 12px;\n  height: 12px;\n  transform-origin: 50% 50%;\n  border-width: inherit;\n  border-color: inherit;\n  border-right-style: inherit;\n  border-bottom-style: inherit;\n  border-top-style: none;\n  border-left-style: none;\n  background-color: inherit;\n  box-sizing: border-box;\n  top: calc(50% - 6px);\n  right: -1px;\n  transform: translateX(6px) rotate(-45deg);\n}\n.wm-balloon[side=right] {\n  margin-right: 8.4px;\n}\n.wm-balloon[side=right][anchor=start]::after {\n  position: absolute;\n  display: block;\n  content: \"\";\n  width: 12px;\n  height: 12px;\n  transform-origin: 50% 50%;\n  border-width: inherit;\n  border-color: inherit;\n  border-right-style: inherit;\n  border-bottom-style: inherit;\n  border-top-style: none;\n  border-left-style: none;\n  background-color: inherit;\n  box-sizing: border-box;\n  top: 12px;\n  right: -1px;\n  transform: translateX(6px) rotate(-45deg);\n}\n.wm-balloon[side=right] {\n  margin-right: 8.4px;\n}\n.wm-balloon[side=right][anchor=end]::after {\n  position: absolute;\n  display: block;\n  content: \"\";\n  width: 12px;\n  height: 12px;\n  transform-origin: 50% 50%;\n  border-width: inherit;\n  border-color: inherit;\n  border-right-style: inherit;\n  border-bottom-style: inherit;\n  border-top-style: none;\n  border-left-style: none;\n  background-color: inherit;\n  box-sizing: border-box;\n  bottom: 12px;\n  right: -1px;\n  transform: translateX(6px) rotate(-45deg);\n}\n.wm-balloon[side=top] {\n  margin-top: 8.4px;\n}\n.wm-balloon[side=top][anchor=center]::after {\n  position: absolute;\n  display: block;\n  content: \"\";\n  width: 12px;\n  height: 12px;\n  transform-origin: 50% 50%;\n  border-width: inherit;\n  border-color: inherit;\n  border-right-style: inherit;\n  border-bottom-style: inherit;\n  border-top-style: none;\n  border-left-style: none;\n  background-color: inherit;\n  box-sizing: border-box;\n  left: calc(50% - 6px);\n  top: -1px;\n  transform: translateY(-6px) rotate(-135deg);\n}\n.wm-balloon[side=top] {\n  margin-top: 8.4px;\n}\n.wm-balloon[side=top][anchor=start]::after {\n  position: absolute;\n  display: block;\n  content: \"\";\n  width: 12px;\n  height: 12px;\n  transform-origin: 50% 50%;\n  border-width: inherit;\n  border-color: inherit;\n  border-right-style: inherit;\n  border-bottom-style: inherit;\n  border-top-style: none;\n  border-left-style: none;\n  background-color: inherit;\n  box-sizing: border-box;\n  left: 12px;\n  top: -1px;\n  transform: translateY(-6px) rotate(-135deg);\n}\n.wm-balloon[side=top] {\n  margin-top: 8.4px;\n}\n.wm-balloon[side=top][anchor=end]::after {\n  position: absolute;\n  display: block;\n  content: \"\";\n  width: 12px;\n  height: 12px;\n  transform-origin: 50% 50%;\n  border-width: inherit;\n  border-color: inherit;\n  border-right-style: inherit;\n  border-bottom-style: inherit;\n  border-top-style: none;\n  border-left-style: none;\n  background-color: inherit;\n  box-sizing: border-box;\n  right: 12px;\n  top: -1px;\n  transform: translateY(-6px) rotate(-135deg);\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3dpemRtL2JhbGxvb24uY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBNEJBO0VBQ0Usa0JBQUE7RUFDQSxxQkFBQTtFQUNBLGtCQUFBO0VBQ0Esc0JBQUE7QUEzQkY7QUE2QkU7RUFDRSxrQkFBQTtFQUNBLHlCQUFBO0VBQ0Esc0JBQUE7RUFDQSxhQXRDUTtFQXVDUixnQkFBQTtBQTNCSjtBQVJFO0VBRUUsb0JBQUE7QUFTSjtBQVBJO0VBQ0Usa0JBQUE7RUFDQSxjQUFBO0VBQ0EsV0FBQTtFQUNBLFdBWk07RUFhUixZQWJRO0VBY04seUJBQUE7RUFDQSxxQkFBQTtFQUNBLHFCQUFBO0VBQ0EsMkJBQUE7RUFDQSw0QkFBQTtFQUNBLHNCQUFBO0VBQ0EsdUJBQUE7RUFDQSx5QkFBQTtFQUNBLHNCQUFBO0VBcUJGLHFCQUFBO0VBQW1DLFlBQUE7RUFDbkMsd0NBQUE7QUFWSjtBQTlCRTtFQUVFLG9CQUFBO0FBK0JKO0FBN0JJO0VBQ0Usa0JBQUE7RUFDQSxjQUFBO0VBQ0EsV0FBQTtFQUNBLFdBWk07RUFhUixZQWJRO0VBY04seUJBQUE7RUFDQSxxQkFBQTtFQUNBLHFCQUFBO0VBQ0EsMkJBQUE7RUFDQSw0QkFBQTtFQUNBLHNCQUFBO0VBQ0EsdUJBQUE7RUFDQSx5QkFBQTtFQUNBLHNCQUFBO0VBMEJGLFVBaERRO0VBZ0RVLFlBQUE7RUFDbEIsd0NBQUE7QUFPSjtBQXBERTtFQUVFLG9CQUFBO0FBcURKO0FBbkRJO0VBQ0Usa0JBQUE7RUFDQSxjQUFBO0VBQ0EsV0FBQTtFQUNBLFdBWk07RUFhUixZQWJRO0VBY04seUJBQUE7RUFDQSxxQkFBQTtFQUNBLHFCQUFBO0VBQ0EsMkJBQUE7RUFDQSw0QkFBQTtFQUNBLHNCQUFBO0VBQ0EsdUJBQUE7RUFDQSx5QkFBQTtFQUNBLHNCQUFBO0VBK0JGLFdBckRRO0VBcURVLFlBQUE7RUFDbEIsd0NBQUE7QUF3Qko7QUExRUU7RUFFRSxrQkFBQTtBQTJFSjtBQXpFSTtFQUNFLGtCQUFBO0VBQ0EsY0FBQTtFQUNBLFdBQUE7RUFDQSxXQVpNO0VBYVIsWUFiUTtFQWNOLHlCQUFBO0VBQ0EscUJBQUE7RUFDQSxxQkFBQTtFQUNBLDJCQUFBO0VBQ0EsNEJBQUE7RUFDQSxzQkFBQTtFQUNBLHVCQUFBO0VBQ0EseUJBQUE7RUFDQSxzQkFBQTtFQW9DRixvQkFBQTtFQUFrQyxVQUFBO0VBQ2xDLDBDQUFBO0FBeUNKO0FBaEdFO0VBRUUsa0JBQUE7QUFpR0o7QUEvRkk7RUFDRSxrQkFBQTtFQUNBLGNBQUE7RUFDQSxXQUFBO0VBQ0EsV0FaTTtFQWFSLFlBYlE7RUFjTix5QkFBQTtFQUNBLHFCQUFBO0VBQ0EscUJBQUE7RUFDQSwyQkFBQTtFQUNBLDRCQUFBO0VBQ0Esc0JBQUE7RUFDQSx1QkFBQTtFQUNBLHlCQUFBO0VBQ0Esc0JBQUE7RUF5Q0YsU0EvRFE7RUErRFMsVUFBQTtFQUNqQiwwQ0FBQTtBQTBESjtBQXRIRTtFQUVFLGtCQUFBO0FBdUhKO0FBckhJO0VBQ0Usa0JBQUE7RUFDQSxjQUFBO0VBQ0EsV0FBQTtFQUNBLFdBWk07RUFhUixZQWJRO0VBY04seUJBQUE7RUFDQSxxQkFBQTtFQUNBLHFCQUFBO0VBQ0EsMkJBQUE7RUFDQSw0QkFBQTtFQUNBLHNCQUFBO0VBQ0EsdUJBQUE7RUFDQSx5QkFBQTtFQUNBLHNCQUFBO0VBOENGLFlBcEVRO0VBb0VZLFVBQUE7RUFDcEIsMENBQUE7QUEyRUo7QUE1SUU7RUFFRSxtQkFBQTtBQTZJSjtBQTNJSTtFQUNFLGtCQUFBO0VBQ0EsY0FBQTtFQUNBLFdBQUE7RUFDQSxXQVpNO0VBYVIsWUFiUTtFQWNOLHlCQUFBO0VBQ0EscUJBQUE7RUFDQSxxQkFBQTtFQUNBLDJCQUFBO0VBQ0EsNEJBQUE7RUFDQSxzQkFBQTtFQUNBLHVCQUFBO0VBQ0EseUJBQUE7RUFDQSxzQkFBQTtFQW1ERixvQkFBQTtFQUFrQyxXQUFBO0VBQ2xDLHlDQUFBO0FBNEZKO0FBbEtFO0VBRUUsbUJBQUE7QUFtS0o7QUFqS0k7RUFDRSxrQkFBQTtFQUNBLGNBQUE7RUFDQSxXQUFBO0VBQ0EsV0FaTTtFQWFSLFlBYlE7RUFjTix5QkFBQTtFQUNBLHFCQUFBO0VBQ0EscUJBQUE7RUFDQSwyQkFBQTtFQUNBLDRCQUFBO0VBQ0Esc0JBQUE7RUFDQSx1QkFBQTtFQUNBLHlCQUFBO0VBQ0Esc0JBQUE7RUF3REYsU0E5RVE7RUE4RVMsV0FBQTtFQUNqQix5Q0FBQTtBQTZHSjtBQXhMRTtFQUVFLG1CQUFBO0FBeUxKO0FBdkxJO0VBQ0Usa0JBQUE7RUFDQSxjQUFBO0VBQ0EsV0FBQTtFQUNBLFdBWk07RUFhUixZQWJRO0VBY04seUJBQUE7RUFDQSxxQkFBQTtFQUNBLHFCQUFBO0VBQ0EsMkJBQUE7RUFDQSw0QkFBQTtFQUNBLHNCQUFBO0VBQ0EsdUJBQUE7RUFDQSx5QkFBQTtFQUNBLHNCQUFBO0VBNkRGLFlBbkZRO0VBbUZZLFdBQUE7RUFDcEIseUNBQUE7QUE4SEo7QUE5TUU7RUFFRSxpQkFBQTtBQStNSjtBQTdNSTtFQUNFLGtCQUFBO0VBQ0EsY0FBQTtFQUNBLFdBQUE7RUFDQSxXQVpNO0VBYVIsWUFiUTtFQWNOLHlCQUFBO0VBQ0EscUJBQUE7RUFDQSxxQkFBQTtFQUNBLDJCQUFBO0VBQ0EsNEJBQUE7RUFDQSxzQkFBQTtFQUNBLHVCQUFBO0VBQ0EseUJBQUE7RUFDQSxzQkFBQTtFQWtFRixxQkFBQTtFQUFtQyxTQUFBO0VBQ25DLDJDQUFBO0FBK0lKO0FBcE9FO0VBRUUsaUJBQUE7QUFxT0o7QUFuT0k7RUFDRSxrQkFBQTtFQUNBLGNBQUE7RUFDQSxXQUFBO0VBQ0EsV0FaTTtFQWFSLFlBYlE7RUFjTix5QkFBQTtFQUNBLHFCQUFBO0VBQ0EscUJBQUE7RUFDQSwyQkFBQTtFQUNBLDRCQUFBO0VBQ0Esc0JBQUE7RUFDQSx1QkFBQTtFQUNBLHlCQUFBO0VBQ0Esc0JBQUE7RUF1RUYsVUE3RlE7RUE2RlUsU0FBQTtFQUNsQiwyQ0FBQTtBQWdLSjtBQTFQRTtFQUVFLGlCQUFBO0FBMlBKO0FBelBJO0VBQ0Usa0JBQUE7RUFDQSxjQUFBO0VBQ0EsV0FBQTtFQUNBLFdBWk07RUFhUixZQWJRO0VBY04seUJBQUE7RUFDQSxxQkFBQTtFQUNBLHFCQUFBO0VBQ0EsMkJBQUE7RUFDQSw0QkFBQTtFQUNBLHNCQUFBO0VBQ0EsdUJBQUE7RUFDQSx5QkFBQTtFQUNBLHNCQUFBO0VBNEVGLFdBbEdRO0VBa0dXLFNBQUE7RUFDbkIsMkNBQUE7QUFpTEoiLCJmaWxlIjoiYmFsbG9vbi5jb21wb25lbnQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIiRhcnJvd1NpemU6IDEycHg7XG5cbkBtaXhpbiBhcnJvdygkc2lkZTogXCJib3R0b21cIiwgJGFuY2hvcjogXCJjZW50ZXJcIikge1xuICBcbiAgJltzaWRlPSN7JHNpZGV9XSB7XG5cbiAgICBtYXJnaW4tI3skc2lkZX06ICRhcnJvd1NpemUgKiAxLjQvMjtcblxuICAgICZbYW5jaG9yPSN7JGFuY2hvcn1dOjphZnRlciB7XG4gICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICBkaXNwbGF5OiBibG9jaztcbiAgICAgIGNvbnRlbnQ6IFwiXCI7XG4gICAgICB3aWR0aDogJGFycm93U2l6ZTtcbiAgXHRcdGhlaWdodDogJGFycm93U2l6ZTtcbiAgICAgIHRyYW5zZm9ybS1vcmlnaW46IDUwJSA1MCU7XG4gICAgICBib3JkZXItd2lkdGg6IGluaGVyaXQ7XG4gICAgICBib3JkZXItY29sb3I6IGluaGVyaXQ7XG4gICAgICBib3JkZXItcmlnaHQtc3R5bGU6IGluaGVyaXQ7XG4gICAgICBib3JkZXItYm90dG9tLXN0eWxlOiBpbmhlcml0O1xuICAgICAgYm9yZGVyLXRvcC1zdHlsZTogbm9uZTtcbiAgICAgIGJvcmRlci1sZWZ0LXN0eWxlOiBub25lO1xuICAgICAgYmFja2dyb3VuZC1jb2xvcjogaW5oZXJpdDtcbiAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gICAgICBAY29udGVudDtcbiAgICB9XG4gIH1cbn1cblxuLndtLWJhbGxvb24ge1xuICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgYm9yZGVyLXJhZGl1czogJGFycm93U2l6ZS8yO1xuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuXG4gIC5iYWxsb29uLWNvbnRlbnQge1xuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiBpbmhlcml0O1xuICAgIGJvcmRlci1yYWRpdXM6IGluaGVyaXQ7XG4gICAgcGFkZGluZzogJGFycm93U2l6ZTtcbiAgICBvdmVyZmxvdzogaGlkZGVuO1xuICB9XG4gIFxuICBAaW5jbHVkZSBhcnJvdyhib3R0b20sIGNlbnRlcikge1xuICAgIGxlZnQ6IGNhbGMoNTAlIC0gI3skYXJyb3dTaXplLzJ9KTsgYm90dG9tOiAtMXB4O1xuICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgkYXJyb3dTaXplLzIpIHJvdGF0ZSg0NWRlZyk7XG4gIH1cblxuICBAaW5jbHVkZSBhcnJvdyhib3R0b20sIHN0YXJ0KSB7XG4gICAgbGVmdDogJGFycm93U2l6ZTsgYm90dG9tOiAtMXB4O1xuICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgkYXJyb3dTaXplLzIpIHJvdGF0ZSg0NWRlZyk7XG4gIH1cblxuICBAaW5jbHVkZSBhcnJvdyhib3R0b20sIGVuZCkge1xuICAgIHJpZ2h0OiAkYXJyb3dTaXplO2JvdHRvbTogLTFweDtcbiAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoJGFycm93U2l6ZS8yKSByb3RhdGUoNDVkZWcpO1xuICB9XG5cbiAgQGluY2x1ZGUgYXJyb3cobGVmdCwgY2VudGVyKSB7XG4gICAgdG9wOiBjYWxjKDUwJSAtICN7JGFycm93U2l6ZS8yfSk7IGxlZnQ6IC0xcHg7XG4gICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVYKC0kYXJyb3dTaXplLzIpIHJvdGF0ZSgxMzVkZWcpO1xuICB9XG5cbiAgQGluY2x1ZGUgYXJyb3cobGVmdCwgc3RhcnQpIHtcbiAgICB0b3A6ICRhcnJvd1NpemU7IGxlZnQ6IC0xcHg7XG4gICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVYKC0kYXJyb3dTaXplLzIpIHJvdGF0ZSgxMzVkZWcpO1xuICB9XG5cbiAgQGluY2x1ZGUgYXJyb3cobGVmdCwgZW5kKSB7XG4gICAgYm90dG9tOiAkYXJyb3dTaXplOyBsZWZ0OiAtMXB4O1xuICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWCgtJGFycm93U2l6ZS8yKSByb3RhdGUoMTM1ZGVnKTtcbiAgfVxuXG4gIEBpbmNsdWRlIGFycm93KHJpZ2h0LCBjZW50ZXIpIHtcbiAgICB0b3A6IGNhbGMoNTAlIC0gI3skYXJyb3dTaXplLzJ9KTsgcmlnaHQ6IC0xcHg7XG4gICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVYKCRhcnJvd1NpemUvMikgcm90YXRlKC00NWRlZyk7XG4gIH1cblxuICBAaW5jbHVkZSBhcnJvdyhyaWdodCwgc3RhcnQpIHtcbiAgICB0b3A6ICRhcnJvd1NpemU7IHJpZ2h0OiAtMXB4O1xuICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWCgkYXJyb3dTaXplLzIpIHJvdGF0ZSgtNDVkZWcpO1xuICB9XG5cbiAgQGluY2x1ZGUgYXJyb3cocmlnaHQsIGVuZCkge1xuICAgIGJvdHRvbTogJGFycm93U2l6ZTsgcmlnaHQ6IC0xcHg7XG4gICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVYKCRhcnJvd1NpemUvMikgcm90YXRlKC00NWRlZyk7XG4gIH1cblxuICBAaW5jbHVkZSBhcnJvdyh0b3AsIGNlbnRlcikge1xuICAgIGxlZnQ6IGNhbGMoNTAlIC0gI3skYXJyb3dTaXplLzJ9KTsgdG9wOiAtMXB4O1xuICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtJGFycm93U2l6ZS8yKSByb3RhdGUoLTEzNWRlZyk7XG4gIH1cblxuICBAaW5jbHVkZSBhcnJvdyh0b3AsIHN0YXJ0KSB7XG4gICAgbGVmdDogJGFycm93U2l6ZTsgdG9wOiAtMXB4O1xuICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtJGFycm93U2l6ZS8yKSByb3RhdGUoLTEzNWRlZyk7XG4gIH1cblxuICBAaW5jbHVkZSBhcnJvdyh0b3AsIGVuZCkge1xuICAgIHJpZ2h0OiAkYXJyb3dTaXplOyB0b3A6IC0xcHg7XG4gICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC0kYXJyb3dTaXplLzIpIHJvdGF0ZSgtMTM1ZGVnKTtcbiAgfVxufVxuIl19 */"],
        encapsulation: 2
      });
      /***/
    },

    /***/
    "iAo3":
    /*!**************************************************!*\
      !*** ./wizdm/src/app/pages/chat/chat.service.ts ***!
      \**************************************************/

    /*! exports provided: ChatService */

    /***/
    function iAo3(module, __webpack_exports__, __webpack_require__) {
      "use strict";

      __webpack_require__.r(__webpack_exports__);
      /* harmony export (binding) */


      __webpack_require__.d(__webpack_exports__, "ChatService", function () {
        return ChatService;
      });
      /* harmony import */


      var _angular_router__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(
      /*! @angular/router */
      "iInd");
      /* harmony import */


      var _wizdm_connect_database_collection_operators__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(
      /*! @wizdm/connect/database/collection/operators */
      "wSf6");
      /* harmony import */


      var _wizdm_connect_database_collection__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(
      /*! @wizdm/connect/database/collection */
      "lPMd");
      /* harmony import */


      var _wizdm_connect_database__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(
      /*! @wizdm/connect/database */
      "eYWy");
      /* harmony import */


      var rxjs_operators__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(
      /*! rxjs/operators */
      "kU1M");
      /* harmony import */


      var app_utils_user__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(
      /*! app/utils/user */
      "lWmb");
      /* harmony import */


      var rxjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(
      /*! rxjs */
      "qCKp");
      /* harmony import */


      var _angular_core__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(
      /*! @angular/core */
      "8Y7J");
      /** Redirects to the latest conversation, if any */


      var ChatService = /*#__PURE__*/function (_wizdm_connect_databa3) {
        _inherits(ChatService, _wizdm_connect_databa3);

        var _super3 = _createSuper(ChatService);

        function ChatService(db, user, router) {
          var _this11;

          _classCallCheck(this, ChatService);

          _this11 = _super3.call(this, db, 'conversations');
          _this11.user = user;
          _this11.router = router;
          return _this11;
        }

        _createClass(ChatService, [{
          key: "me",
          get: function get() {
            return this.user.uid;
          }
        }, {
          key: "canActivate",
          value: function canActivate(route, state) {
            var _this12 = this;

            var _a; // Gets the requested recipient to chat to, if any


            var userName = route.queryParamMap.get('with'); // Prevents starting up a conversation on wrong conditions

            if (!this.user.auth.authenticated || userName == ((_a = this.user.data) === null || _a === void 0 ? void 0 : _a.userName)) {
              return false;
            } // Initiate a conversation with the requested user


            if (userName) {
              // Skip unknown users. This may be a result of:
              // 1. a deleted conversation (where the user has been removed from the recipients)
              // 2. a conversation with a user that no longer exists
              if (userName.startsWith('unknown-')) {
                return Object(rxjs__WEBPACK_IMPORTED_MODULE_6__["of"])(true);
              } // Resolves the user from the @username next


              return this.user.fromUserName(userName).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["take"])(1), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["switchMap"])(function (user) {
                // Prevents initiating a chat with non existing users or myself
                if (!user || user.id === _this12.me) {
                  return Object(rxjs__WEBPACK_IMPORTED_MODULE_6__["of"])(false);
                } // Computes the path for the requested conversation


                var ref = _this12.ref.doc(_this12.me < user.id ? _this12.me.concat(user.id) : user.id.concat(_this12.me)); // Uses an array union to fill in the recipients array atomically


                var recipients = _this12.db.arrayUnion(_this12.user.uid, user.id); // Runs a transaction to verify the converstion exists


                return _this12.db.transaction(function (trx) {
                  // Read the conversation first
                  return trx.snap(ref).then(function (_ref4) {
                    var exists = _ref4.exists;

                    // Ensures the recipients contains both sender and receiver.
                    // This is needed since the exisiting conversarion may contain only one party (or none if we are in the middle of a deletion).
                    // Using an array union with a merge ensure the array preserves the original values while the missing ones will be appended.
                    if (exists) {
                      trx.merge(ref, {
                        recipients: recipients
                      });
                    } // ... or creates the conversatin from scratch
                    else {
                        trx.set(ref, {
                          recipients: recipients
                        });
                      } // Returns true for the routing to proceed


                    return true;
                  });
                });
              }));
            } // Resolves the last user we talked to otherwise...


            return this.pipe( // Gets the last conversation we updated
            Object(_wizdm_connect_database_collection_operators__WEBPACK_IMPORTED_MODULE_1__["query"])(function (qf) {
              return qf.where('recipients', 'array-contains', _this12.me).orderBy('updated', 'desc').limit(1);
            }), Object(_wizdm_connect_database_collection_operators__WEBPACK_IMPORTED_MODULE_1__["get"])(), // Switches to the sender
            Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["switchMap"])(function (snap) {
              // Simply go throught when no conversation found
              if (snap.empty) {
                return Object(rxjs__WEBPACK_IMPORTED_MODULE_6__["of"])(true);
              } // Gets the document data


              var data = snap.docs[0].data(); // Seeks for the sender id among recipients

              var sender = data.recipients.find(function (recipient) {
                return recipient != _this12.me;
              }); // Resolves the user from the sender id. At this point the sender might be null as a result of a conversatrion
              // partially deleted by the other party.

              return _this12.user.fromUserId(sender).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["take"])(1), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["map"])(function (user) {
                // Gets the @username falling back to the unknown user when missing
                var userName = (user === null || user === void 0 ? void 0 : user.userName) || "unknown-".concat(snap.docs[0].id); // Redirects to the very same route including the user name this time

                return _this12.router.createUrlTree(state.url.split('/'), {
                  queryParams: {
                    "with": userName
                  }
                });
              }));
            }));
          }
        }]);

        return ChatService;
      }(_wizdm_connect_database_collection__WEBPACK_IMPORTED_MODULE_2__["DatabaseCollection"]);

      ChatService.ɵfac = function ChatService_Factory(t) {
        return new (t || ChatService)(_angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵinject"](_wizdm_connect_database__WEBPACK_IMPORTED_MODULE_3__["DatabaseService"]), _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵinject"](app_utils_user__WEBPACK_IMPORTED_MODULE_5__["UserProfile"]), _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵinject"](_angular_router__WEBPACK_IMPORTED_MODULE_0__["Router"]));
      };

      ChatService.ɵprov = _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵdefineInjectable"]({
        token: ChatService,
        factory: ChatService.ɵfac,
        providedIn: 'root'
      });
      /***/
    },

    /***/
    "ntp/":
    /*!***************************************************************!*\
      !*** ./wizdm/src/app/pages/chat/message/message.component.ts ***!
      \***************************************************************/

    /*! exports provided: Message */

    /***/
    function ntp(module, __webpack_exports__, __webpack_require__) {
      "use strict";

      __webpack_require__.r(__webpack_exports__);
      /* harmony export (binding) */


      __webpack_require__.d(__webpack_exports__, "Message", function () {
        return Message;
      });
      /* harmony import */


      var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(
      /*! @angular/core */
      "8Y7J");
      /* harmony import */


      var rxjs_operators__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(
      /*! rxjs/operators */
      "kU1M");
      /* harmony import */


      var _wizdm_connect_database_document__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(
      /*! @wizdm/connect/database/document */
      "1Blm");
      /* harmony import */


      var app_utils_user__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(
      /*! app/utils/user */
      "lWmb");
      /* harmony import */


      var _wizdm_connect_database__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(
      /*! @wizdm/connect/database */
      "eYWy");
      /* harmony import */


      var _angular_material_menu__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(
      /*! @angular/material/menu */
      "rJgo");
      /* harmony import */


      var _content_src_lib_streamer_content_directive__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(
      /*! ../../../../../../content/src/lib/streamer/content.directive */
      "Qfjl");
      /* harmony import */


      var _elements_src_lib_balloon_balloon_component__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(
      /*! ../../../../../../elements/src/lib/balloon/balloon.component */
      "ggY3");
      /* harmony import */


      var _angular_flex_layout_flex__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(
      /*! @angular/flex-layout/flex */
      "VDRc");
      /* harmony import */


      var _angular_common__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(
      /*! @angular/common */
      "SVse");
      /* harmony import */


      var _elements_src_lib_icon_icon_component__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(
      /*! ../../../../../../elements/src/lib/icon/icon.component */
      "h0Qx");
      /* harmony import */


      var _emoji_src_lib_text_emoji_text_component__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(
      /*! ../../../../../../emoji/src/lib/text/emoji-text.component */
      "xS4v");
      /* harmony import */


      var _angular_material_icon__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(
      /*! @angular/material/icon */
      "Tj54");
      /* harmony import */


      var _pipes_src_lib_moment_moment_pipe__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(
      /*! ../../../../../../pipes/src/lib/moment/moment.pipe */
      "cpjW");
      /* harmony import */


      var _connect_src_lib_database_pipes_pipes_pipe__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(
      /*! ../../../../../../connect/src/lib/database/pipes/pipes.pipe */
      "DuEg");

      function Message_ng_container_0_div_3_Template(rf, ctx) {
        if (rf & 1) {
          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div");

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "b");

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](2);

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](3, "async");

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        }

        if (rf & 2) {
          var ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);

          var tmp_0_0 = null;

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate"]((tmp_0_0 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](3, 1, ctx_r2.sender$)) == null ? null : tmp_0_0.fullName);
        }
      }

      function Message_ng_container_0_span_5_Template(rf, ctx) {
        if (rf & 1) {
          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "span", 9);

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](1, "wm-icon", 10);

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](2, "span");

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](3);

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        }

        if (rf & 2) {
          var msgs_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]().$implicit;

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("icon", (msgs_r1["delete"] == null ? null : msgs_r1["delete"].icon) || "error_outline");

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate"]((msgs_r1["delete"] == null ? null : msgs_r1["delete"].message) || "This message has been deleted");
        }
      }

      function Message_ng_container_0_ng_template_7_Template(rf, ctx) {
        if (rf & 1) {
          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](0, "span", 11);
        }

        if (rf & 2) {
          var ctx_r5 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("wm-emoji-text", ctx_r5.data == null ? null : ctx_r5.data.body);
        }
      }

      function Message_ng_container_0_ng_container_14_Template(rf, ctx) {
        if (rf & 1) {
          var _r10 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerStart"](0);

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "mat-icon", 12);

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](2, "expand_more");

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](3, "mat-menu", null, 13);

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](5, "button", 14);

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function Message_ng_container_0_ng_container_14_Template_button_click_5_listener() {
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r10);

            var ctx_r9 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);

            return ctx_r9["delete"]();
          });

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](6);

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerEnd"]();
        }

        if (rf & 2) {
          var _r8 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵreference"](4);

          var msgs_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]().$implicit;

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("matMenuTriggerFor", _r8);

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](5);

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate"]((msgs_r1["delete"] == null ? null : msgs_r1["delete"].label) || "Delete message");
        }
      }

      function Message_ng_container_0_Template(rf, ctx) {
        if (rf & 1) {
          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerStart"](0);

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "wm-balloon", 1);

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](2, "div", 2);

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](3, Message_ng_container_0_div_3_Template, 4, 3, "div", 3);

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](4, "div", 4);

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](5, Message_ng_container_0_span_5_Template, 4, 2, "span", 5);

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](6, "async");

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](7, Message_ng_container_0_ng_template_7_Template, 1, 1, "ng-template", null, 6, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](9, "span", 7);

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](10, "time", 8);

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](11);

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](12, "moment");

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](13, "timestamp");

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](14, Message_ng_container_0_ng_container_14_Template, 7, 2, "ng-container", 3);

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerEnd"]();
        }

        if (rf & 2) {
          var msgs_r1 = ctx.$implicit;

          var _r4 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵreference"](8);

          var ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("color", (ctx_r0.data == null ? null : ctx_r0.data.sender) === ctx_r0.me ? "accent" : "primary")("side", (ctx_r0.data == null ? null : ctx_r0.data.sender) === ctx_r0.me ? "right" : "left")("anchor", (ctx_r0.data == null ? null : ctx_r0.data.sender) !== ctx_r0.thread ? "start" : "");

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", (ctx_r0.data == null ? null : ctx_r0.data.sender) !== ctx_r0.thread);

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](6, 8, ctx_r0.deleted$))("ngIfElse", _r4);

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](6);

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind2"](12, 10, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](13, 13, ctx_r0.data == null ? null : ctx_r0.data.created), msgs_r1.timeFormat || "LT"));

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);

          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", (ctx_r0.data == null ? null : ctx_r0.data.sender) === ctx_r0.me);
        }
      }
      /** Chat message component */


      var Message = /*#__PURE__*/function (_wizdm_connect_databa4) {
        _inherits(Message, _wizdm_connect_databa4);

        var _super4 = _createSuper(Message);

        function Message(db, user) {
          var _this13;

          _classCallCheck(this, Message);

          _this13 = _super4.call(this, db);
          _this13.user = user;
          /** Emits the unwrapped message data */

          _this13.dataChange = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
          return _this13;
        }
        /** The conversation id */


        _createClass(Message, [{
          key: "id",
          get: function get() {
            return this.data.id;
          }
          /** The current user's id */

        }, {
          key: "me",
          get: function get() {
            return this.user.uid;
          }
          /** Message snaphot */

        }, {
          key: "message",
          set: function set(message) {
            // Unwraps the snapshot
            this.data = this.unwrap(message); // Resolve the sender data

            this.sender$ = this.user.fromUserId(this.data.sender); // Creates an observable to monitor this document deletion across devices.

            this.deleted$ = this.asObservable().pipe( // Monitors the exists flag      
            Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_1__["map"])(function (snap) {
              return !snap.exists;
            }), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_1__["startWith"])(!message.exists), // Filters for changes and completes when deleted
            Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_1__["takeWhile"])(function (deleted) {
              return !deleted;
            }, true), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_1__["distinctUntilChanged"])()); // Emits the data payload

            this.dataChange.emit(this.data);
          }
        }, {
          key: "onContextMenu",
          value: function onContextMenu() {
            var _a; // Opens the menu on contextmenu event  


            (_a = this.menuTrigger) === null || _a === void 0 ? void 0 : _a.openMenu(); // Prevents default

            return false;
          }
        }]);

        return Message;
      }(_wizdm_connect_database_document__WEBPACK_IMPORTED_MODULE_2__["DatabaseDocument"]);

      Message.ɵfac = function Message_Factory(t) {
        return new (t || Message)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_wizdm_connect_database__WEBPACK_IMPORTED_MODULE_4__["DatabaseService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](app_utils_user__WEBPACK_IMPORTED_MODULE_3__["UserProfile"]));
      };

      Message.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineComponent"]({
        type: Message,
        selectors: [["wm-message"]],
        viewQuery: function Message_Query(rf, ctx) {
          if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵviewQuery"](_angular_material_menu__WEBPACK_IMPORTED_MODULE_5__["MatMenuTrigger"], 1);
          }

          if (rf & 2) {
            var _t;

            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵloadQuery"]()) && (ctx.menuTrigger = _t.first);
          }
        },
        hostAttrs: [1, "wm-message"],
        hostVars: 4,
        hostBindings: function Message_HostBindings(rf, ctx) {
          if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("contextmenu", function Message_contextmenu_HostBindingHandler() {
              return ctx.onContextMenu();
            });
          }

          if (rf & 2) {
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵclassProp"]("in", (ctx.data == null ? null : ctx.data.sender) !== ctx.me)("out", (ctx.data == null ? null : ctx.data.sender) === ctx.me);
          }
        },
        inputs: {
          thread: "thread",
          message: "message"
        },
        outputs: {
          dataChange: "data"
        },
        features: [_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵInheritDefinitionFeature"]],
        decls: 1,
        vars: 1,
        consts: [[4, "wmContent", "wmContentSelect"], [1, "mat-elevation-z2", 3, "color", "side", "anchor"], ["fxLayout", "column", "fxLayoutAlign", "start stretch", "fxLayoutGap", "2px"], [4, "ngIf"], ["fxLayout", "row"], ["class", "deleted", 4, "ngIf", "ngIfElse"], ["messageBody", ""], [1, "spacer"], [1, "time", "mat-small"], [1, "deleted"], [3, "icon"], [3, "wm-emoji-text"], [1, "menu", 3, "matMenuTriggerFor"], ["menu", "matMenu"], ["mat-menu-item", "", 3, "click"]],
        template: function Message_Template(rf, ctx) {
          if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](0, Message_ng_container_0_Template, 15, 15, "ng-container", 0);
          }

          if (rf & 2) {
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("wmContentSelect", "chat.message");
          }
        },
        directives: [_content_src_lib_streamer_content_directive__WEBPACK_IMPORTED_MODULE_6__["ContentDirective"], _elements_src_lib_balloon_balloon_component__WEBPACK_IMPORTED_MODULE_7__["BalloonComponent"], _angular_flex_layout_flex__WEBPACK_IMPORTED_MODULE_8__["DefaultLayoutDirective"], _angular_flex_layout_flex__WEBPACK_IMPORTED_MODULE_8__["DefaultLayoutAlignDirective"], _angular_flex_layout_flex__WEBPACK_IMPORTED_MODULE_8__["DefaultLayoutGapDirective"], _angular_common__WEBPACK_IMPORTED_MODULE_9__["NgIf"], _elements_src_lib_icon_icon_component__WEBPACK_IMPORTED_MODULE_10__["IconComponent"], _emoji_src_lib_text_emoji_text_component__WEBPACK_IMPORTED_MODULE_11__["EmojiText"], _angular_material_icon__WEBPACK_IMPORTED_MODULE_12__["MatIcon"], _angular_material_menu__WEBPACK_IMPORTED_MODULE_5__["MatMenuTrigger"], _angular_material_menu__WEBPACK_IMPORTED_MODULE_5__["MatMenu"], _angular_material_menu__WEBPACK_IMPORTED_MODULE_5__["MatMenuItem"]],
        pipes: [_angular_common__WEBPACK_IMPORTED_MODULE_9__["AsyncPipe"], _pipes_src_lib_moment_moment_pipe__WEBPACK_IMPORTED_MODULE_13__["MomentPipe"], _connect_src_lib_database_pipes_pipes_pipe__WEBPACK_IMPORTED_MODULE_14__["TimestampPipe"]],
        styles: ["[_nghost-%COMP%] {\n  position: relative;\n  display: flex;\n  flex-flow: row;\n  padding: 0 2vw;\n}\n.in[_nghost-%COMP%] {\n  justify-content: flex-start;\n}\n.out[_nghost-%COMP%] {\n  justify-content: flex-end;\n}\n[_nghost-%COMP%]   .wm-balloon[_ngcontent-%COMP%]   .deleted[_ngcontent-%COMP%] {\n  opacity: 0.5;\n  font-style: italic;\n}\n[_nghost-%COMP%]   .wm-balloon[_ngcontent-%COMP%]   .spacer[_ngcontent-%COMP%] {\n  display: inline-block;\n  width: 48px;\n}\n[_nghost-%COMP%]   .wm-balloon[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%] {\n  position: absolute;\n  right: 5px;\n  bottom: 0;\n  opacity: 0.5;\n}\n[_nghost-%COMP%]   .wm-balloon[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%] {\n  position: absolute;\n  right: 5px;\n  top: 0;\n  background-color: inherit;\n  cursor: pointer;\n  transform: translateX(100%);\n  transition: transform 100ms ease-in-out;\n}\n[_nghost-%COMP%]   .wm-balloon[_ngcontent-%COMP%]:hover   .menu[_ngcontent-%COMP%] {\n  transform: translateX(0);\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL21lc3NhZ2UuY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQ0E7RUFDRSxrQkFBQTtFQUNBLGFBQUE7RUFDQSxjQUFBO0VBQ0EsY0FBQTtBQUFGO0FBRUU7RUFBTywyQkFBQTtBQUNUO0FBQUU7RUFBUSx5QkFBQTtBQUdWO0FBQ0k7RUFDRSxZQUFBO0VBQ0Esa0JBQUE7QUFDTjtBQUVJO0VBQ0UscUJBQUE7RUFDQSxXQUFBO0FBQU47QUFHSTtFQUNFLGtCQUFBO0VBQ0EsVUFBQTtFQUNBLFNBQUE7RUFDQSxZQUFBO0FBRE47QUFJSTtFQUNFLGtCQUFBO0VBQ0EsVUFBQTtFQUNBLE1BQUE7RUFFQSx5QkFBQTtFQUNBLGVBQUE7RUFFQSwyQkFBQTtFQUNBLHVDQUFBO0FBSk47QUFPSTtFQUNFLHdCQUFBO0FBTE4iLCJmaWxlIjoibWVzc2FnZS5jb21wb25lbnQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIlxuOmhvc3Qge1xuICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXgtZmxvdzogcm93O1xuICBwYWRkaW5nOiAwIDJ2dztcblxuICAmLmluIHsganVzdGlmeS1jb250ZW50OiBmbGV4LXN0YXJ0OyB9XG4gICYub3V0IHsganVzdGlmeS1jb250ZW50OiBmbGV4LWVuZDsgfVxuXG4gIC53bS1iYWxsb29uIHtcblxuICAgIC5kZWxldGVkIHtcbiAgICAgIG9wYWNpdHk6IDAuNTtcbiAgICAgIGZvbnQtc3R5bGU6IGl0YWxpYztcbiAgICB9XG5cbiAgICAuc3BhY2VyIHtcbiAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgICAgIHdpZHRoOiA0OHB4O1xuICAgIH1cblxuICAgIC50aW1lIHtcbiAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgIHJpZ2h0OiA1cHg7XG4gICAgICBib3R0b206IDA7XG4gICAgICBvcGFjaXR5OiAwLjU7XG4gICAgfVxuXG4gICAgLm1lbnUge1xuICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgcmlnaHQ6IDVweDtcbiAgICAgIHRvcDogMDtcblxuICAgICAgYmFja2dyb3VuZC1jb2xvcjogaW5oZXJpdDtcbiAgICAgIGN1cnNvcjogcG9pbnRlcjtcblxuICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVYKDEwMCUpO1xuICAgICAgdHJhbnNpdGlvbjogdHJhbnNmb3JtIDEwMG1zIGVhc2UtaW4tb3V0O1xuICAgIH1cblxuICAgICY6aG92ZXIgLm1lbnUge1xuICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVYKDApO1xuICAgIH1cbiAgfVxufSJdfQ== */"]
      });
      /***/
    },

    /***/
    "pKCE":
    /*!*************************************************!*\
      !*** ./connect/src/lib/database/pipes/index.ts ***!
      \*************************************************/

    /*! exports provided: SnapshotDataPipe, TimestampPipe, CreatedTimePipe, UpdatedTimePipe, PipesModule */

    /***/
    function pKCE(module, __webpack_exports__, __webpack_require__) {
      "use strict";

      __webpack_require__.r(__webpack_exports__);
      /* harmony import */


      var _pipes_pipe__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(
      /*! ./pipes.pipe */
      "DuEg");
      /* harmony reexport (safe) */


      __webpack_require__.d(__webpack_exports__, "SnapshotDataPipe", function () {
        return _pipes_pipe__WEBPACK_IMPORTED_MODULE_0__["SnapshotDataPipe"];
      });
      /* harmony reexport (safe) */


      __webpack_require__.d(__webpack_exports__, "TimestampPipe", function () {
        return _pipes_pipe__WEBPACK_IMPORTED_MODULE_0__["TimestampPipe"];
      });
      /* harmony reexport (safe) */


      __webpack_require__.d(__webpack_exports__, "CreatedTimePipe", function () {
        return _pipes_pipe__WEBPACK_IMPORTED_MODULE_0__["CreatedTimePipe"];
      });
      /* harmony reexport (safe) */


      __webpack_require__.d(__webpack_exports__, "UpdatedTimePipe", function () {
        return _pipes_pipe__WEBPACK_IMPORTED_MODULE_0__["UpdatedTimePipe"];
      });
      /* harmony import */


      var _pipes_module__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(
      /*! ./pipes.module */
      "pLv1");
      /* harmony reexport (safe) */


      __webpack_require__.d(__webpack_exports__, "PipesModule", function () {
        return _pipes_module__WEBPACK_IMPORTED_MODULE_1__["PipesModule"];
      });
      /***/

    },

    /***/
    "pLv1":
    /*!********************************************************!*\
      !*** ./connect/src/lib/database/pipes/pipes.module.ts ***!
      \********************************************************/

    /*! exports provided: PipesModule */

    /***/
    function pLv1(module, __webpack_exports__, __webpack_require__) {
      "use strict";

      __webpack_require__.r(__webpack_exports__);
      /* harmony export (binding) */


      __webpack_require__.d(__webpack_exports__, "PipesModule", function () {
        return PipesModule;
      });
      /* harmony import */


      var _pipes_pipe__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(
      /*! ./pipes.pipe */
      "DuEg");
      /* harmony import */


      var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(
      /*! @angular/core */
      "8Y7J");

      var PipesModule = function PipesModule() {
        _classCallCheck(this, PipesModule);
      };

      PipesModule.ɵmod = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdefineNgModule"]({
        type: PipesModule
      });
      PipesModule.ɵinj = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdefineInjector"]({
        factory: function PipesModule_Factory(t) {
          return new (t || PipesModule)();
        }
      });

      (function () {
        (typeof ngJitMode === "undefined" || ngJitMode) && _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵsetNgModuleScope"](PipesModule, {
          declarations: [_pipes_pipe__WEBPACK_IMPORTED_MODULE_0__["SnapshotDataPipe"], _pipes_pipe__WEBPACK_IMPORTED_MODULE_0__["TimestampPipe"], _pipes_pipe__WEBPACK_IMPORTED_MODULE_0__["CreatedTimePipe"], _pipes_pipe__WEBPACK_IMPORTED_MODULE_0__["UpdatedTimePipe"]],
          exports: [_pipes_pipe__WEBPACK_IMPORTED_MODULE_0__["SnapshotDataPipe"], _pipes_pipe__WEBPACK_IMPORTED_MODULE_0__["TimestampPipe"], _pipes_pipe__WEBPACK_IMPORTED_MODULE_0__["CreatedTimePipe"], _pipes_pipe__WEBPACK_IMPORTED_MODULE_0__["UpdatedTimePipe"]]
        });
      })();
      /***/

    },

    /***/
    "qjJl":
    /*!****************************************************************!*\
      !*** ./wizdm/src/app/navigator/footer/sticky-footer.module.ts ***!
      \****************************************************************/

    /*! exports provided: StickyFooterModule */

    /***/
    function qjJl(module, __webpack_exports__, __webpack_require__) {
      "use strict";

      __webpack_require__.r(__webpack_exports__);
      /* harmony export (binding) */


      __webpack_require__.d(__webpack_exports__, "StickyFooterModule", function () {
        return StickyFooterModule;
      });
      /* harmony import */


      var _sticky_footer_directive__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(
      /*! ./sticky-footer.directive */
      "0Usy");
      /* harmony import */


      var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(
      /*! @angular/core */
      "8Y7J");

      var StickyFooterModule = function StickyFooterModule() {
        _classCallCheck(this, StickyFooterModule);
      };

      StickyFooterModule.ɵmod = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdefineNgModule"]({
        type: StickyFooterModule
      });
      StickyFooterModule.ɵinj = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdefineInjector"]({
        factory: function StickyFooterModule_Factory(t) {
          return new (t || StickyFooterModule)();
        },
        imports: [[//TeleportModule
        ]]
      });

      (function () {
        (typeof ngJitMode === "undefined" || ngJitMode) && _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵsetNgModuleScope"](StickyFooterModule, {
          declarations: [_sticky_footer_directive__WEBPACK_IMPORTED_MODULE_0__["StickyFooterDirective"]],
          exports: [_sticky_footer_directive__WEBPACK_IMPORTED_MODULE_0__["StickyFooterDirective"]]
        });
      })();
      /***/

    }
  }]);
})();
//# sourceMappingURL=pages-chat-chat-module-es5.js.map