{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{joOy:function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,\"ProfileFixerModule\",function(){return profile_fixer_module_ProfileFixerModule});var common=__webpack_require__(\"SVse\"),flex_layout=__webpack_require__(\"u9T3\"),fesm2015_button=__webpack_require__(\"Dxy4\"),progress_bar=__webpack_require__(\"BTe0\"),icon=__webpack_require__(\"txmD\"),src=__webpack_require__(\"C1VQ\"),dialog=__webpack_require__(\"XNpK\"),lib_button=__webpack_require__(\"uaks\"),content_src=__webpack_require__(\"g7MM\"),can_leave=__webpack_require__(\"h4JL\"),actionbar=__webpack_require__(\"kNiW\"),Subject=__webpack_require__(\"XNiG\"),concat=__webpack_require__(\"GyhO\"),of=__webpack_require__(\"LRne\"),forkJoin=__webpack_require__(\"cp0P\"),from=__webpack_require__(\"Cfvw\"),empty=__webpack_require__(\"EY2u\"),defer=__webpack_require__(\"NXyV\"),storage=__webpack_require__(\"tFpD\"),functions_client=__webpack_require__(\"kSUX\"),user=__webpack_require__(\"lWmb\"),tap=__webpack_require__(\"vkgz\"),switchMap=__webpack_require__(\"eIep\"),map=__webpack_require__(\"lJxs\"),scan=__webpack_require__(\"Kqap\"),animationFrame=__webpack_require__(\"eNwd\"),rxjs_src=__webpack_require__(\"j8uH\"),core=__webpack_require__(\"8Y7J\"),content_directive=__webpack_require__(\"Qfjl\"),icon_component=__webpack_require__(\"h0Qx\"),dialog_component=__webpack_require__(\"7/R1\"),can_leave_directive=__webpack_require__(\"q9NA\"),fesm2015_dialog=__webpack_require__(\"iELJ\"),readme_component=__webpack_require__(\"n8oj\"),actionbar_directive=__webpack_require__(\"mx0f\"),button_media_changer_directive=__webpack_require__(\"U3RD\"),flex=__webpack_require__(\"VDRc\");function ProfileFixerComponent_ng_container_0_section_5_ng_container_1_ng_template_1_wm_icon_1_Template(rf,ctx){if(1&rf&&core.Rb(0,\"wm-icon\",2),2&rf){const msgs_r1=core.ic(4).$implicit;core.pc(\"icon\",(null==msgs_r1.actions||null==msgs_r1.actions.apply?null:msgs_r1.actions.apply.icon)||\"save\")}}function ProfileFixerComponent_ng_container_0_section_5_ng_container_1_ng_template_1_ng_template_2_Template(rf,ctx){if(1&rf&&core.Ic(0),2&rf){const msgs_r1=core.ic(4).$implicit;core.Jc((null==msgs_r1.actions||null==msgs_r1.actions.apply?null:msgs_r1.actions.apply.caption)||\"Apply fixes\")}}function ProfileFixerComponent_ng_container_0_section_5_ng_container_1_ng_template_1_Template(rf,ctx){if(1&rf){const _r17=core.Xb();core.Wb(0,\"button\",14),core.ec(\"click\",function(){core.yc(_r17);const report_r3=core.ic(2).ngIf;return core.ic(2).applyAllFixes(report_r3)}),core.Gc(1,ProfileFixerComponent_ng_container_0_section_5_ng_container_1_ng_template_1_wm_icon_1_Template,1,1,\"wm-icon\",15),core.Gc(2,ProfileFixerComponent_ng_container_0_section_5_ng_container_1_ng_template_1_ng_template_2_Template,1,1,\"ng-template\",null,16,core.Hc),core.Vb()}if(2&rf){const mobile_r9=ctx.isMobile,_r11=core.vc(3),report_r3=core.ic(2).ngIf;core.pc(\"disabled\",!report_r3.done),core.Db(1),core.pc(\"ngIf\",mobile_r9)(\"ngIfElse\",_r11)}}function ProfileFixerComponent_ng_container_0_section_5_ng_container_1_Template(rf,ctx){1&rf&&(core.Ub(0),core.Gc(1,ProfileFixerComponent_ng_container_0_section_5_ng_container_1_ng_template_1_Template,4,3,\"ng-template\",13),core.Tb())}function ProfileFixerComponent_ng_container_0_section_5_ng_template_3_Template(rf,ctx){1&rf&&(core.Wb(0,\"p\"),core.Ic(1,\"Fetching user data...\"),core.Vb())}function ProfileFixerComponent_ng_container_0_section_5_ng_container_5_ng_template_3_Template(rf,ctx){1&rf&&(core.Wb(0,\"p\"),core.Ic(1,\"No anomalies found\"),core.Vb())}function ProfileFixerComponent_ng_container_0_section_5_ng_container_5_ng_container_5_li_4_Template(rf,ctx){if(1&rf){const _r31=core.Xb();core.Wb(0,\"li\",21),core.Wb(1,\"span\"),core.Ic(2,\"User \"),core.Wb(3,\"b\"),core.Ic(4),core.Vb(),core.Ic(5,\" do not have a profile document\"),core.Vb(),core.Wb(6,\"button\",22),core.ec(\"click\",function(){core.yc(_r31);const missing_r28=ctx.$implicit,report_r3=core.ic(3).ngIf;return core.ic(2).createMissingProfile(missing_r28,report_r3)}),core.Ic(7,\"Create profile\"),core.Vb(),core.Vb()}if(2&rf){const missing_r28=ctx.$implicit,report_r3=core.ic(3).ngIf;core.Db(4),core.Jc(missing_r28.uid),core.Db(2),core.pc(\"disabled\",!report_r3.done)}}function ProfileFixerComponent_ng_container_0_section_5_ng_container_5_ng_container_5_li_5_Template(rf,ctx){if(1&rf){const _r36=core.Xb();core.Wb(0,\"li\",21),core.Wb(1,\"span\"),core.Ic(2,\"Document \"),core.Wb(3,\"b\"),core.Ic(4),core.Vb(),core.Ic(5,\" do not have a matching user\"),core.Vb(),core.Wb(6,\"button\",23),core.ec(\"click\",function(){core.yc(_r36);const orphan_r33=ctx.$implicit,report_r3=core.ic(3).ngIf;return core.ic(2).deleteOrphanProfile(orphan_r33,report_r3)}),core.Ic(7,\"Delete profile\"),core.Vb(),core.Vb()}if(2&rf){const orphan_r33=ctx.$implicit,report_r3=core.ic(3).ngIf;core.Db(4),core.Jc(orphan_r33.id),core.Db(2),core.pc(\"disabled\",!report_r3.done)}}function ProfileFixerComponent_ng_container_0_section_5_ng_container_5_ng_container_5_ng_container_6_li_1_Template(rf,ctx){if(1&rf){const _r42=core.Xb();core.Wb(0,\"li\",21),core.Wb(1,\"span\"),core.Ic(2,\"Folder \"),core.Wb(3,\"b\"),core.Ic(4),core.Vb(),core.Ic(5,\" do not have a matching user\"),core.Vb(),core.Wb(6,\"button\",24),core.ec(\"click\",function(){core.yc(_r42);const folder_r39=ctx.$implicit,report_r3=core.ic(4).ngIf;return core.ic(2).deleteOrphanFolder(folder_r39,report_r3)}),core.Ic(7,\"Delete folder\"),core.Vb(),core.Vb()}if(2&rf){const folder_r39=ctx.$implicit;core.Db(4),core.Jc(folder_r39.name)}}function ProfileFixerComponent_ng_container_0_section_5_ng_container_5_ng_container_5_ng_container_6_Template(rf,ctx){if(1&rf&&(core.Ub(0),core.Gc(1,ProfileFixerComponent_ng_container_0_section_5_ng_container_5_ng_container_5_ng_container_6_li_1_Template,8,1,\"li\",18),core.Tb()),2&rf){const report_r3=core.ic(3).ngIf;core.Db(1),core.pc(\"ngForOf\",report_r3.folders)}}function ProfileFixerComponent_ng_container_0_section_5_ng_container_5_ng_container_5_li_7_Template(rf,ctx){if(1&rf){const _r47=core.Xb();core.Wb(0,\"li\",21),core.Wb(1,\"span\"),core.Ic(2),core.Vb(),core.Wb(3,\"button\",25),core.ec(\"click\",function(){core.yc(_r47);const missing_r44=ctx.ngIf,report_r3=core.ic(3).ngIf;return core.ic(2).guessMissingUserNames(missing_r44,report_r3)}),core.Ic(4,\"Guess user names\"),core.Vb(),core.Vb()}if(2&rf){const missing_r44=ctx.ngIf;core.Db(2),core.Kc(\"\",missing_r44.length,\" user(s) miss a unique user name\")}}function ProfileFixerComponent_ng_container_0_section_5_ng_container_5_ng_container_5_li_8_Template(rf,ctx){if(1&rf){const _r51=core.Xb();core.Wb(0,\"li\",21),core.Wb(1,\"span\"),core.Ic(2),core.Vb(),core.Wb(3,\"button\",25),core.ec(\"click\",function(){core.yc(_r51);const missing_r48=ctx.ngIf,report_r3=core.ic(3).ngIf;return core.ic(2).guessMissingFullNames(missing_r48,report_r3)}),core.Ic(4,\"Guess full names\"),core.Vb(),core.Vb()}if(2&rf){const missing_r48=ctx.ngIf;core.Db(2),core.Kc(\"\",missing_r48.length,\" user(s) miss the fullName field\")}}function ProfileFixerComponent_ng_container_0_section_5_ng_container_5_ng_container_5_li_9_Template(rf,ctx){if(1&rf){const _r55=core.Xb();core.Wb(0,\"li\",21),core.Wb(1,\"span\"),core.Ic(2),core.Vb(),core.Wb(3,\"button\",25),core.ec(\"click\",function(){core.yc(_r55);const indexes_r52=ctx.ngIf,report_r3=core.ic(3).ngIf;return core.ic(2).computeMissingSearchIndex(indexes_r52,report_r3)}),core.Ic(4,\"Fix search indexes\"),core.Vb(),core.Vb()}if(2&rf){const indexes_r52=ctx.ngIf;core.Db(2),core.Kc(\"\",indexes_r52.length,\" user(s) aren't searchable or the search index mismatches the user's name\")}}function ProfileFixerComponent_ng_container_0_section_5_ng_container_5_ng_container_5_Template(rf,ctx){if(1&rf){const _r58=core.Xb();core.Ub(0),core.Wb(1,\"p\"),core.Ic(2),core.Vb(),core.Wb(3,\"ul\"),core.Gc(4,ProfileFixerComponent_ng_container_0_section_5_ng_container_5_ng_container_5_li_4_Template,8,2,\"li\",18),core.Gc(5,ProfileFixerComponent_ng_container_0_section_5_ng_container_5_ng_container_5_li_5_Template,8,2,\"li\",18),core.Gc(6,ProfileFixerComponent_ng_container_0_section_5_ng_container_5_ng_container_5_ng_container_6_Template,2,1,\"ng-container\",3),core.Gc(7,ProfileFixerComponent_ng_container_0_section_5_ng_container_5_ng_container_5_li_7_Template,5,1,\"li\",19),core.Gc(8,ProfileFixerComponent_ng_container_0_section_5_ng_container_5_ng_container_5_li_8_Template,5,1,\"li\",19),core.Gc(9,ProfileFixerComponent_ng_container_0_section_5_ng_container_5_ng_container_5_li_9_Template,5,1,\"li\",19),core.Vb(),core.Wb(10,\"button\",20),core.ec(\"click\",function(){core.yc(_r58);const report_r3=core.ic(2).ngIf;return core.ic(2).fixAllAnomalies(report_r3)}),core.Wb(11,\"span\"),core.Ic(12),core.Vb(),core.Vb(),core.Tb()}if(2&rf){const report_r3=core.ic(2).ngIf,msgs_r1=core.ic().$implicit;core.Db(2),core.Kc(\"\",report_r3.errorsCount,\" anomalies detected:\"),core.Db(2),core.pc(\"ngForOf\",report_r3.missing),core.Db(1),core.pc(\"ngForOf\",report_r3.orphans),core.Db(1),core.pc(\"ngIf\",report_r3.done),core.Db(1),core.pc(\"ngIf\",report_r3.userNameMissing),core.Db(1),core.pc(\"ngIf\",report_r3.fullNameMissing),core.Db(1),core.pc(\"ngIf\",report_r3.searchIndexMissing),core.Db(1),core.pc(\"disabled\",!report_r3.done),core.Db(2),core.Jc((null==msgs_r1.actions||null==msgs_r1.actions.fix?null:msgs_r1.actions.fix.caption)||\"Fix all anomalies\")}}function ProfileFixerComponent_ng_container_0_section_5_ng_container_5_Template(rf,ctx){if(1&rf&&(core.Ub(0),core.Wb(1,\"p\"),core.Ic(2),core.Vb(),core.Gc(3,ProfileFixerComponent_ng_container_0_section_5_ng_container_5_ng_template_3_Template,2,0,\"ng-template\",null,17,core.Hc),core.Gc(5,ProfileFixerComponent_ng_container_0_section_5_ng_container_5_ng_container_5_Template,13,9,\"ng-container\",12),core.Tb()),2&rf){const _r19=core.vc(4),report_r3=core.ic().ngIf;core.Db(2),core.Kc(\"Analysing uid \",report_r3.currentId,\"\"),core.Db(3),core.pc(\"ngIf\",report_r3.errorsCount>0)(\"ngIfElse\",_r19)}}function ProfileFixerComponent_ng_container_0_section_5_Template(rf,ctx){if(1&rf&&(core.Wb(0,\"section\"),core.Gc(1,ProfileFixerComponent_ng_container_0_section_5_ng_container_1_Template,2,0,\"ng-container\",3),core.Rb(2,\"mat-progress-bar\",10),core.Gc(3,ProfileFixerComponent_ng_container_0_section_5_ng_template_3_Template,2,0,\"ng-template\",null,11,core.Hc),core.Gc(5,ProfileFixerComponent_ng_container_0_section_5_ng_container_5_Template,6,3,\"ng-container\",12),core.Vb()),2&rf){const report_r3=ctx.ngIf,_r5=core.vc(4),ctx_r2=core.ic(2);core.Db(1),core.pc(\"ngIf\",ctx_r2.batch||(null==report_r3.folders?null:report_r3.folders.length)),core.Db(1),core.pc(\"mode\",report_r3.users?\"determinate\":\"query\")(\"value\",100*((report_r3.currentIndex||0)+1)/((null==report_r3.users?null:report_r3.users.length)||1)),core.Db(3),core.pc(\"ngIf\",report_r3.users)(\"ngIfElse\",_r5)}}function ProfileFixerComponent_ng_container_0_Template(rf,ctx){if(1&rf){const _r63=core.Xb();core.Ub(0),core.Wb(1,\"button\",1),core.ec(\"click\",function(){return core.yc(_r63),core.ic().run$.next()}),core.Rb(2,\"wm-icon\",2),core.Wb(3,\"span\"),core.Ic(4),core.Vb(),core.Vb(),core.Gc(5,ProfileFixerComponent_ng_container_0_section_5_Template,6,5,\"section\",3),core.jc(6,\"async\"),core.Wb(7,\"wm-dialog\",4),core.Wb(8,\"h2\",5),core.Wb(9,\"b\"),core.Ic(10),core.Vb(),core.Vb(),core.Wb(11,\"mat-dialog-content\",6),core.Wb(12,\"span\"),core.Ic(13,\"You're about to leave the page without saving the applied fixes.\"),core.Rb(14,\"br\"),core.Ic(15,\"Please confirm.\"),core.Vb(),core.Vb(),core.Wb(16,\"mat-dialog-actions\",7),core.Wb(17,\"button\",8),core.Ic(18),core.Vb(),core.Wb(19,\"button\",9),core.Ic(20),core.Vb(),core.Vb(),core.Vb(),core.Tb()}if(2&rf){const msgs_r1=ctx.$implicit,ctx_r0=core.ic();core.Db(2),core.pc(\"icon\",(null==msgs_r1.actions||null==msgs_r1.actions.run?null:msgs_r1.actions.run.icon)||\"assignment\"),core.Db(2),core.Jc((null==msgs_r1.actions||null==msgs_r1.actions.run?null:msgs_r1.actions.run.caption)||\"Analyze users\"),core.Db(1),core.pc(\"ngIf\",core.kc(6,10,ctx_r0.report$)),core.Db(2),core.pc(\"dontLeave\",ctx_r0.batch),core.Db(3),core.Jc((null==msgs_r1.canLeave?null:msgs_r1.canLeave.title)||\"Unsaved fixes\"),core.Db(1),core.pc(\"wm-readme\",null==msgs_r1.canLeave?null:msgs_r1.canLeave.message),core.Db(6),core.pc(\"mat-dialog-close\",!1),core.Db(1),core.Jc((null==msgs_r1.canLeave?null:msgs_r1.canLeave.cancel)||\"Stay\"),core.Db(1),core.pc(\"mat-dialog-close\",!0),core.Db(1),core.Jc((null==msgs_r1.canLeave?null:msgs_r1.canLeave.ok)||\"Leave anyhow\")}}let profile_fixer_component_ProfileFixerComponent=(()=>{class ProfileFixerComponent{constructor(client,users,st){this.client=client,this.users=users,this.st=st,this.run$=new Subject.a,this.report$=this.run$.pipe(Object(tap.a)(()=>{this.batch=null}),Object(switchMap.a)(()=>Object(concat.a)(Object(of.a)({}),Object(forkJoin.a)(this.listAllUsers(),this.listAllProfiles(),this.listAllFolders()).pipe(Object(map.a)(([users,profiles,folders])=>({users:users,profiles:profiles,folders:folders,missing:[],orphans:[],currentId:\"\",errorsCount:0})),Object(switchMap.a)(report=>Object(from.a)(report.users,animationFrame.a).pipe(Object(scan.a)((report,user,index)=>{report.currentId=user.uid,report.currentIndex=index;const profile=report.profiles[index-report.missing.length+report.orphans.length];!profile||profile.id>user.uid?(report.missing.push(user),report.errorsCount++):profile.id<user.uid&&(report.orphans.push(profile),report.errorsCount++);const folderIndex=report.folders.findIndex(folder=>folder.name===user.uid);return folderIndex>=0&&report.folders.splice(folderIndex,1),this.analyzeProfile(profile,report),report},report),Object(rxjs_src.a)(report=>{const start=report.users.length-report.missing.length+report.orphans.length;return start>=report.profiles.length?Object(empty.b)():Object(from.a)(report.profiles.slice(start),animationFrame.a).pipe(Object(scan.a)((report,profile)=>(report.currentId=profile.id,report.currentIndex++,report.orphans.push(profile),report.errorsCount++,report),report))},report),Object(rxjs_src.a)(report=>Object(of.a)(Object.assign(Object.assign({},report),{done:!0})))))))))}get db(){return this.users.db}listAllUsers(){return this.client.get(\"users\")}listAllProfiles(){return Object(defer.a)(()=>this.users.get(qf=>qf.orderBy(this.db.sentinelId)))}deleteFolder(prefix){return this.client.delete(`folders/${prefix}`)}listAllFolders(){return this.st.reference(\"/\").listAll().pipe(Object(map.a)(result=>result.prefixes))}analyzeProfile(profile,report){if(!profile)return report;if(profile.userName||(report.userNameMissing=(report.userNameMissing||[]).concat(profile),report.errorsCount++),profile.fullName||(report.fullNameMissing=(report.fullNameMissing||[]).concat(profile),report.errorsCount++),profile.searchIndex){const{searchIndex:searchIndex}=this.users.formatData(Object.assign({lastName:\"\"},profile));(searchIndex.length!==profile.searchIndex.length||searchIndex.some((value,index)=>value!==profile.searchIndex[index]))&&(report.searchIndexMissing=(report.searchIndexMissing||[]).concat(profile),report.errorsCount++)}else report.searchIndexMissing=(report.searchIndexMissing||[]).concat(profile),report.errorsCount++;return report}createMissingProfile(user,report){const index=report.missing.findIndex(missing=>missing===user);index>=0&&((this.batch||(this.batch=this.db.batch())).set(this.users.ref.doc(user.uid),this.users.userData(user)),report.missing.splice(index,1),report.errorsCount--)}deleteOrphanProfile(profile,report){const index=report.orphans.findIndex(orphan=>orphan===profile);index>=0&&((this.batch||(this.batch=this.db.batch())).delete(this.users.ref.doc(profile.id)),report.orphans.splice(index,1),report.errorsCount--)}deleteOrphanFolder(folder,report){const index=report.folders.findIndex(orphan=>orphan===folder);index>=0&&this.deleteFolder(folder.name).subscribe(()=>{report.folders.splice(index,1),report.errorsCount--})}guessMissingUserNames(profiles,report){if(!profiles)return;const batch=this.batch||(this.batch=this.db.batch()),guesses=[];Promise.all(profiles.map(profile=>{const{fullName:fullName}=this.users.formatData(Object.assign({lastName:\"\"},profile));return this.users.guessUserName(fullName).then(userName=>{for(;guesses.find(guess=>guess===userName);)userName=userName.concat(\"z\");console.log(\"Guessing\",userName),batch.update(this.users.ref.doc(profile.id),{userName:userName}),guesses.push(userName),report.errorsCount--})})).then(()=>delete report.userNameMissing)}guessMissingFullNames(profiles,report){if(!profiles)return;const batch=this.batch||(this.batch=this.db.batch());profiles.forEach(profile=>{const{fullName:fullName}=this.users.formatData(Object.assign({lastName:\"\"},profile));batch.update(this.users.ref.doc(profile.id),{fullName:fullName}),report.errorsCount--}),delete report.userNameMissing}computeMissingSearchIndex(profiles,report){if(!profiles)return;const batch=this.batch||(this.batch=this.db.batch());profiles.forEach(profile=>{const{searchIndex:searchIndex}=this.users.formatData(Object.assign({lastName:\"\"},profile));batch.update(this.users.ref.doc(profile.id),{searchIndex:searchIndex}),report.errorsCount--}),delete report.searchIndexMissing}fixAllAnomalies(report){var _a,_b;null===(_a=report.missing)||void 0===_a||_a.forEach(user=>this.createMissingProfile(user,report)),null===(_b=report.orphans)||void 0===_b||_b.forEach(profile=>this.deleteOrphanProfile(profile,report)),this.guessMissingUserNames(report.userNameMissing,report),this.computeMissingSearchIndex(report.searchIndexMissing,report)}applyAllFixes(report){report&&Object(forkJoin.a)(Object(from.a)(this.batch?this.batch.commit():Object(empty.b)()),Object(from.a)(report.folders||[]).pipe(Object(switchMap.a)(folder=>this.deleteFolder(folder.name)))).toPromise().then(()=>this.batch=null)}}return ProfileFixerComponent.ɵfac=function(t){return new(t||ProfileFixerComponent)(core.Qb(functions_client.b),core.Qb(user.b),core.Qb(storage.b))},ProfileFixerComponent.ɵcmp=core.Kb({type:ProfileFixerComponent,selectors:[[\"wm-profile-fixer\"]],decls:1,vars:1,consts:[[4,\"wmContent\",\"wmContentSelect\"],[\"mat-stroked-button\",\"\",\"color\",\"primary\",3,\"click\"],[3,\"icon\"],[4,\"ngIf\"],[3,\"dontLeave\"],[\"mat-dialog-title\",\"\"],[3,\"wm-readme\"],[\"align\",\"end\"],[\"mat-button\",\"\",\"color\",\"primary\",\"cdkFocusInitial\",\"\",3,\"mat-dialog-close\"],[\"mat-button\",\"\",\"color\",\"warn\",3,\"mat-dialog-close\"],[\"color\",\"primary\",3,\"mode\",\"value\"],[\"fetchingUsers\",\"\"],[4,\"ngIf\",\"ngIfElse\"],[\"wmActionbar\",\"\"],[\"mat-flat-button\",\"\",\"type.lt-sm\",\"icon\",\"color\",\"primary\",3,\"disabled\",\"click\"],[3,\"icon\",4,\"ngIf\",\"ngIfElse\"],[\"applyFixes\",\"\"],[\"allFine\",\"\"],[\"fxLayoutGap\",\"8px\",4,\"ngFor\",\"ngForOf\"],[\"fxLayoutGap\",\"8px\",4,\"ngIf\"],[\"mat-stroked-button\",\"\",\"color\",\"warn\",3,\"disabled\",\"click\"],[\"fxLayoutGap\",\"8px\"],[\"mat-button\",\"\",\"color\",\"accent\",3,\"disabled\",\"click\"],[\"mat-button\",\"\",\"color\",\"warn\",3,\"disabled\",\"click\"],[\"mat-button\",\"\",\"color\",\"warn\",3,\"click\"],[\"mat-button\",\"\",\"color\",\"accent\",3,\"click\"]],template:function(rf,ctx){1&rf&&core.Gc(0,ProfileFixerComponent_ng_container_0_Template,21,12,\"ng-container\",0),2&rf&&core.pc(\"wmContentSelect\",\"admin-fixer\")},directives:[content_directive.a,fesm2015_button.b,icon_component.a,common.m,dialog_component.a,can_leave_directive.a,fesm2015_dialog.h,fesm2015_dialog.e,readme_component.a,fesm2015_dialog.c,fesm2015_dialog.d,progress_bar.a,actionbar_directive.a,button_media_changer_directive.a,common.l,flex.f],pipes:[common.b],styles:[\"[_nghost-%COMP%]{position:relative;min-height:100%;padding-top:32px;display:flex;flex-direction:column}[_nghost-%COMP%]   .mat-progress-bar[_ngcontent-%COMP%]{margin-bottom:16px}\"]}),ProfileFixerComponent})();__webpack_require__(\"J3Me\");const routes=[{path:\"\",content:\"admin-fixer\",component:profile_fixer_component_ProfileFixerComponent,canDeactivate:[can_leave.a]}];let profile_fixer_module_ProfileFixerModule=(()=>{class ProfileFixerModule{}return ProfileFixerModule.ɵmod=core.Ob({type:ProfileFixerModule}),ProfileFixerModule.ɵinj=core.Nb({factory:function(t){return new(t||ProfileFixerModule)},imports:[[common.c,flex_layout.a,fesm2015_button.c,progress_bar.b,icon.a,src.a,dialog.b,lib_button.a,actionbar.a,can_leave.b,content_src.e.forChild(routes)]]}),ProfileFixerModule})()}}]);","name":"23-es2015.449abca832c7fe6e34ee.js","input":"(window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || []).push([[23],{\n\n/***/ \"joOy\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, \"ProfileFixerModule\", function() { return /* binding */ profile_fixer_module_ProfileFixerModule; });\n\n// EXTERNAL MODULE: ./node_modules/@angular/common/fesm2015/common.js\nvar common = __webpack_require__(\"SVse\");\n\n// EXTERNAL MODULE: ./node_modules/@angular/flex-layout/esm2015/flex-layout.js + 1 modules\nvar flex_layout = __webpack_require__(\"u9T3\");\n\n// EXTERNAL MODULE: ./node_modules/@angular/material/fesm2015/button.js\nvar fesm2015_button = __webpack_require__(\"Dxy4\");\n\n// EXTERNAL MODULE: ./node_modules/@angular/material/fesm2015/progress-bar.js\nvar progress_bar = __webpack_require__(\"BTe0\");\n\n// EXTERNAL MODULE: ./elements/src/lib/icon/index.ts + 1 modules\nvar icon = __webpack_require__(\"txmD\");\n\n// EXTERNAL MODULE: ./readme/src/index.ts + 2 modules\nvar src = __webpack_require__(\"C1VQ\");\n\n// EXTERNAL MODULE: ./elements/src/lib/dialog/index.ts + 1 modules\nvar dialog = __webpack_require__(\"XNpK\");\n\n// EXTERNAL MODULE: ./elements/src/lib/button/index.ts + 1 modules\nvar lib_button = __webpack_require__(\"uaks\");\n\n// EXTERNAL MODULE: ./content/src/index.ts + 1 modules\nvar content_src = __webpack_require__(\"g7MM\");\n\n// EXTERNAL MODULE: ./wizdm/src/app/utils/can-leave/index.ts + 1 modules\nvar can_leave = __webpack_require__(\"h4JL\");\n\n// EXTERNAL MODULE: ./wizdm/src/app/navigator/actionbar/index.ts + 1 modules\nvar actionbar = __webpack_require__(\"kNiW\");\n\n// EXTERNAL MODULE: ./node_modules/rxjs/_esm2015/internal/Subject.js\nvar Subject = __webpack_require__(\"XNiG\");\n\n// EXTERNAL MODULE: ./node_modules/rxjs/_esm2015/internal/observable/concat.js + 1 modules\nvar concat = __webpack_require__(\"GyhO\");\n\n// EXTERNAL MODULE: ./node_modules/rxjs/_esm2015/internal/observable/of.js\nvar of = __webpack_require__(\"LRne\");\n\n// EXTERNAL MODULE: ./node_modules/rxjs/_esm2015/internal/observable/forkJoin.js\nvar forkJoin = __webpack_require__(\"cp0P\");\n\n// EXTERNAL MODULE: ./node_modules/rxjs/_esm2015/internal/observable/from.js\nvar from = __webpack_require__(\"Cfvw\");\n\n// EXTERNAL MODULE: ./node_modules/rxjs/_esm2015/internal/observable/empty.js\nvar empty = __webpack_require__(\"EY2u\");\n\n// EXTERNAL MODULE: ./node_modules/rxjs/_esm2015/internal/observable/defer.js\nvar defer = __webpack_require__(\"NXyV\");\n\n// EXTERNAL MODULE: ./connect/src/lib/storage/index.ts + 5 modules\nvar storage = __webpack_require__(\"tFpD\");\n\n// EXTERNAL MODULE: ./connect/src/lib/functions/client/index.ts + 3 modules\nvar functions_client = __webpack_require__(\"kSUX\");\n\n// EXTERNAL MODULE: ./wizdm/src/app/utils/user/index.ts + 5 modules\nvar user = __webpack_require__(\"lWmb\");\n\n// EXTERNAL MODULE: ./node_modules/rxjs/_esm2015/internal/operators/tap.js + 1 modules\nvar tap = __webpack_require__(\"vkgz\");\n\n// EXTERNAL MODULE: ./node_modules/rxjs/_esm2015/internal/operators/switchMap.js\nvar switchMap = __webpack_require__(\"eIep\");\n\n// EXTERNAL MODULE: ./node_modules/rxjs/_esm2015/internal/operators/map.js\nvar map = __webpack_require__(\"lJxs\");\n\n// EXTERNAL MODULE: ./node_modules/rxjs/_esm2015/internal/operators/scan.js\nvar scan = __webpack_require__(\"Kqap\");\n\n// EXTERNAL MODULE: ./node_modules/rxjs/_esm2015/internal/scheduler/animationFrame.js + 2 modules\nvar animationFrame = __webpack_require__(\"eNwd\");\n\n// EXTERNAL MODULE: ./rxjs/src/index.ts + 6 modules\nvar rxjs_src = __webpack_require__(\"j8uH\");\n\n// EXTERNAL MODULE: ./node_modules/@angular/core/fesm2015/core.js\nvar core = __webpack_require__(\"8Y7J\");\n\n// EXTERNAL MODULE: ./content/src/lib/streamer/content.directive.ts\nvar content_directive = __webpack_require__(\"Qfjl\");\n\n// EXTERNAL MODULE: ./elements/src/lib/icon/icon.component.ts\nvar icon_component = __webpack_require__(\"h0Qx\");\n\n// EXTERNAL MODULE: ./elements/src/lib/dialog/dialog.component.ts\nvar dialog_component = __webpack_require__(\"7/R1\");\n\n// EXTERNAL MODULE: ./wizdm/src/app/utils/can-leave/can-leave.directive.ts\nvar can_leave_directive = __webpack_require__(\"q9NA\");\n\n// EXTERNAL MODULE: ./node_modules/@angular/material/fesm2015/dialog.js\nvar fesm2015_dialog = __webpack_require__(\"iELJ\");\n\n// EXTERNAL MODULE: ./readme/src/lib/readme.component.ts\nvar readme_component = __webpack_require__(\"n8oj\");\n\n// EXTERNAL MODULE: ./wizdm/src/app/navigator/actionbar/actionbar.directive.ts\nvar actionbar_directive = __webpack_require__(\"mx0f\");\n\n// EXTERNAL MODULE: ./elements/src/lib/button/button-media-changer.directive.ts\nvar button_media_changer_directive = __webpack_require__(\"U3RD\");\n\n// EXTERNAL MODULE: ./node_modules/@angular/flex-layout/esm2015/flex.js\nvar flex = __webpack_require__(\"VDRc\");\n\n// CONCATENATED MODULE: ./wizdm/src/app/pages/admin/profile-fixer/profile-fixer.component.ts\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction ProfileFixerComponent_ng_container_0_section_5_ng_container_1_ng_template_1_wm_icon_1_Template(rf, ctx) {\n    if (rf & 1) {\n        core[\"Rb\" /* ɵɵelement */](0, \"wm-icon\", 2);\n    }\n    if (rf & 2) {\n        const msgs_r1 = core[\"ic\" /* ɵɵnextContext */](4).$implicit;\n        core[\"pc\" /* ɵɵproperty */](\"icon\", (msgs_r1.actions == null ? null : msgs_r1.actions.apply == null ? null : msgs_r1.actions.apply.icon) || \"save\");\n    }\n}\nfunction ProfileFixerComponent_ng_container_0_section_5_ng_container_1_ng_template_1_ng_template_2_Template(rf, ctx) {\n    if (rf & 1) {\n        core[\"Ic\" /* ɵɵtext */](0);\n    }\n    if (rf & 2) {\n        const msgs_r1 = core[\"ic\" /* ɵɵnextContext */](4).$implicit;\n        core[\"Jc\" /* ɵɵtextInterpolate */]((msgs_r1.actions == null ? null : msgs_r1.actions.apply == null ? null : msgs_r1.actions.apply.caption) || \"Apply fixes\");\n    }\n}\nfunction ProfileFixerComponent_ng_container_0_section_5_ng_container_1_ng_template_1_Template(rf, ctx) {\n    if (rf & 1) {\n        const _r17 = core[\"Xb\" /* ɵɵgetCurrentView */]();\n        core[\"Wb\" /* ɵɵelementStart */](0, \"button\", 14);\n        core[\"ec\" /* ɵɵlistener */](\"click\", function ProfileFixerComponent_ng_container_0_section_5_ng_container_1_ng_template_1_Template_button_click_0_listener() { core[\"yc\" /* ɵɵrestoreView */](_r17); const report_r3 = core[\"ic\" /* ɵɵnextContext */](2).ngIf; const ctx_r15 = core[\"ic\" /* ɵɵnextContext */](2); return ctx_r15.applyAllFixes(report_r3); });\n        core[\"Gc\" /* ɵɵtemplate */](1, ProfileFixerComponent_ng_container_0_section_5_ng_container_1_ng_template_1_wm_icon_1_Template, 1, 1, \"wm-icon\", 15);\n        core[\"Gc\" /* ɵɵtemplate */](2, ProfileFixerComponent_ng_container_0_section_5_ng_container_1_ng_template_1_ng_template_2_Template, 1, 1, \"ng-template\", null, 16, core[\"Hc\" /* ɵɵtemplateRefExtractor */]);\n        core[\"Vb\" /* ɵɵelementEnd */]();\n    }\n    if (rf & 2) {\n        const mobile_r9 = ctx.isMobile;\n        const _r11 = core[\"vc\" /* ɵɵreference */](3);\n        const report_r3 = core[\"ic\" /* ɵɵnextContext */](2).ngIf;\n        core[\"pc\" /* ɵɵproperty */](\"disabled\", !report_r3.done);\n        core[\"Db\" /* ɵɵadvance */](1);\n        core[\"pc\" /* ɵɵproperty */](\"ngIf\", mobile_r9)(\"ngIfElse\", _r11);\n    }\n}\nfunction ProfileFixerComponent_ng_container_0_section_5_ng_container_1_Template(rf, ctx) {\n    if (rf & 1) {\n        core[\"Ub\" /* ɵɵelementContainerStart */](0);\n        core[\"Gc\" /* ɵɵtemplate */](1, ProfileFixerComponent_ng_container_0_section_5_ng_container_1_ng_template_1_Template, 4, 3, \"ng-template\", 13);\n        core[\"Tb\" /* ɵɵelementContainerEnd */]();\n    }\n}\nfunction ProfileFixerComponent_ng_container_0_section_5_ng_template_3_Template(rf, ctx) {\n    if (rf & 1) {\n        core[\"Wb\" /* ɵɵelementStart */](0, \"p\");\n        core[\"Ic\" /* ɵɵtext */](1, \"Fetching user data...\");\n        core[\"Vb\" /* ɵɵelementEnd */]();\n    }\n}\nfunction ProfileFixerComponent_ng_container_0_section_5_ng_container_5_ng_template_3_Template(rf, ctx) {\n    if (rf & 1) {\n        core[\"Wb\" /* ɵɵelementStart */](0, \"p\");\n        core[\"Ic\" /* ɵɵtext */](1, \"No anomalies found\");\n        core[\"Vb\" /* ɵɵelementEnd */]();\n    }\n}\nfunction ProfileFixerComponent_ng_container_0_section_5_ng_container_5_ng_container_5_li_4_Template(rf, ctx) {\n    if (rf & 1) {\n        const _r31 = core[\"Xb\" /* ɵɵgetCurrentView */]();\n        core[\"Wb\" /* ɵɵelementStart */](0, \"li\", 21);\n        core[\"Wb\" /* ɵɵelementStart */](1, \"span\");\n        core[\"Ic\" /* ɵɵtext */](2, \"User \");\n        core[\"Wb\" /* ɵɵelementStart */](3, \"b\");\n        core[\"Ic\" /* ɵɵtext */](4);\n        core[\"Vb\" /* ɵɵelementEnd */]();\n        core[\"Ic\" /* ɵɵtext */](5, \" do not have a profile document\");\n        core[\"Vb\" /* ɵɵelementEnd */]();\n        core[\"Wb\" /* ɵɵelementStart */](6, \"button\", 22);\n        core[\"ec\" /* ɵɵlistener */](\"click\", function ProfileFixerComponent_ng_container_0_section_5_ng_container_5_ng_container_5_li_4_Template_button_click_6_listener() { core[\"yc\" /* ɵɵrestoreView */](_r31); const missing_r28 = ctx.$implicit; const report_r3 = core[\"ic\" /* ɵɵnextContext */](3).ngIf; const ctx_r29 = core[\"ic\" /* ɵɵnextContext */](2); return ctx_r29.createMissingProfile(missing_r28, report_r3); });\n        core[\"Ic\" /* ɵɵtext */](7, \"Create profile\");\n        core[\"Vb\" /* ɵɵelementEnd */]();\n        core[\"Vb\" /* ɵɵelementEnd */]();\n    }\n    if (rf & 2) {\n        const missing_r28 = ctx.$implicit;\n        const report_r3 = core[\"ic\" /* ɵɵnextContext */](3).ngIf;\n        core[\"Db\" /* ɵɵadvance */](4);\n        core[\"Jc\" /* ɵɵtextInterpolate */](missing_r28.uid);\n        core[\"Db\" /* ɵɵadvance */](2);\n        core[\"pc\" /* ɵɵproperty */](\"disabled\", !report_r3.done);\n    }\n}\nfunction ProfileFixerComponent_ng_container_0_section_5_ng_container_5_ng_container_5_li_5_Template(rf, ctx) {\n    if (rf & 1) {\n        const _r36 = core[\"Xb\" /* ɵɵgetCurrentView */]();\n        core[\"Wb\" /* ɵɵelementStart */](0, \"li\", 21);\n        core[\"Wb\" /* ɵɵelementStart */](1, \"span\");\n        core[\"Ic\" /* ɵɵtext */](2, \"Document \");\n        core[\"Wb\" /* ɵɵelementStart */](3, \"b\");\n        core[\"Ic\" /* ɵɵtext */](4);\n        core[\"Vb\" /* ɵɵelementEnd */]();\n        core[\"Ic\" /* ɵɵtext */](5, \" do not have a matching user\");\n        core[\"Vb\" /* ɵɵelementEnd */]();\n        core[\"Wb\" /* ɵɵelementStart */](6, \"button\", 23);\n        core[\"ec\" /* ɵɵlistener */](\"click\", function ProfileFixerComponent_ng_container_0_section_5_ng_container_5_ng_container_5_li_5_Template_button_click_6_listener() { core[\"yc\" /* ɵɵrestoreView */](_r36); const orphan_r33 = ctx.$implicit; const report_r3 = core[\"ic\" /* ɵɵnextContext */](3).ngIf; const ctx_r34 = core[\"ic\" /* ɵɵnextContext */](2); return ctx_r34.deleteOrphanProfile(orphan_r33, report_r3); });\n        core[\"Ic\" /* ɵɵtext */](7, \"Delete profile\");\n        core[\"Vb\" /* ɵɵelementEnd */]();\n        core[\"Vb\" /* ɵɵelementEnd */]();\n    }\n    if (rf & 2) {\n        const orphan_r33 = ctx.$implicit;\n        const report_r3 = core[\"ic\" /* ɵɵnextContext */](3).ngIf;\n        core[\"Db\" /* ɵɵadvance */](4);\n        core[\"Jc\" /* ɵɵtextInterpolate */](orphan_r33.id);\n        core[\"Db\" /* ɵɵadvance */](2);\n        core[\"pc\" /* ɵɵproperty */](\"disabled\", !report_r3.done);\n    }\n}\nfunction ProfileFixerComponent_ng_container_0_section_5_ng_container_5_ng_container_5_ng_container_6_li_1_Template(rf, ctx) {\n    if (rf & 1) {\n        const _r42 = core[\"Xb\" /* ɵɵgetCurrentView */]();\n        core[\"Wb\" /* ɵɵelementStart */](0, \"li\", 21);\n        core[\"Wb\" /* ɵɵelementStart */](1, \"span\");\n        core[\"Ic\" /* ɵɵtext */](2, \"Folder \");\n        core[\"Wb\" /* ɵɵelementStart */](3, \"b\");\n        core[\"Ic\" /* ɵɵtext */](4);\n        core[\"Vb\" /* ɵɵelementEnd */]();\n        core[\"Ic\" /* ɵɵtext */](5, \" do not have a matching user\");\n        core[\"Vb\" /* ɵɵelementEnd */]();\n        core[\"Wb\" /* ɵɵelementStart */](6, \"button\", 24);\n        core[\"ec\" /* ɵɵlistener */](\"click\", function ProfileFixerComponent_ng_container_0_section_5_ng_container_5_ng_container_5_ng_container_6_li_1_Template_button_click_6_listener() { core[\"yc\" /* ɵɵrestoreView */](_r42); const folder_r39 = ctx.$implicit; const report_r3 = core[\"ic\" /* ɵɵnextContext */](4).ngIf; const ctx_r40 = core[\"ic\" /* ɵɵnextContext */](2); return ctx_r40.deleteOrphanFolder(folder_r39, report_r3); });\n        core[\"Ic\" /* ɵɵtext */](7, \"Delete folder\");\n        core[\"Vb\" /* ɵɵelementEnd */]();\n        core[\"Vb\" /* ɵɵelementEnd */]();\n    }\n    if (rf & 2) {\n        const folder_r39 = ctx.$implicit;\n        core[\"Db\" /* ɵɵadvance */](4);\n        core[\"Jc\" /* ɵɵtextInterpolate */](folder_r39.name);\n    }\n}\nfunction ProfileFixerComponent_ng_container_0_section_5_ng_container_5_ng_container_5_ng_container_6_Template(rf, ctx) {\n    if (rf & 1) {\n        core[\"Ub\" /* ɵɵelementContainerStart */](0);\n        core[\"Gc\" /* ɵɵtemplate */](1, ProfileFixerComponent_ng_container_0_section_5_ng_container_5_ng_container_5_ng_container_6_li_1_Template, 8, 1, \"li\", 18);\n        core[\"Tb\" /* ɵɵelementContainerEnd */]();\n    }\n    if (rf & 2) {\n        const report_r3 = core[\"ic\" /* ɵɵnextContext */](3).ngIf;\n        core[\"Db\" /* ɵɵadvance */](1);\n        core[\"pc\" /* ɵɵproperty */](\"ngForOf\", report_r3.folders);\n    }\n}\nfunction ProfileFixerComponent_ng_container_0_section_5_ng_container_5_ng_container_5_li_7_Template(rf, ctx) {\n    if (rf & 1) {\n        const _r47 = core[\"Xb\" /* ɵɵgetCurrentView */]();\n        core[\"Wb\" /* ɵɵelementStart */](0, \"li\", 21);\n        core[\"Wb\" /* ɵɵelementStart */](1, \"span\");\n        core[\"Ic\" /* ɵɵtext */](2);\n        core[\"Vb\" /* ɵɵelementEnd */]();\n        core[\"Wb\" /* ɵɵelementStart */](3, \"button\", 25);\n        core[\"ec\" /* ɵɵlistener */](\"click\", function ProfileFixerComponent_ng_container_0_section_5_ng_container_5_ng_container_5_li_7_Template_button_click_3_listener() { core[\"yc\" /* ɵɵrestoreView */](_r47); const missing_r44 = ctx.ngIf; const report_r3 = core[\"ic\" /* ɵɵnextContext */](3).ngIf; const ctx_r45 = core[\"ic\" /* ɵɵnextContext */](2); return ctx_r45.guessMissingUserNames(missing_r44, report_r3); });\n        core[\"Ic\" /* ɵɵtext */](4, \"Guess user names\");\n        core[\"Vb\" /* ɵɵelementEnd */]();\n        core[\"Vb\" /* ɵɵelementEnd */]();\n    }\n    if (rf & 2) {\n        const missing_r44 = ctx.ngIf;\n        core[\"Db\" /* ɵɵadvance */](2);\n        core[\"Kc\" /* ɵɵtextInterpolate1 */](\"\", missing_r44.length, \" user(s) miss a unique user name\");\n    }\n}\nfunction ProfileFixerComponent_ng_container_0_section_5_ng_container_5_ng_container_5_li_8_Template(rf, ctx) {\n    if (rf & 1) {\n        const _r51 = core[\"Xb\" /* ɵɵgetCurrentView */]();\n        core[\"Wb\" /* ɵɵelementStart */](0, \"li\", 21);\n        core[\"Wb\" /* ɵɵelementStart */](1, \"span\");\n        core[\"Ic\" /* ɵɵtext */](2);\n        core[\"Vb\" /* ɵɵelementEnd */]();\n        core[\"Wb\" /* ɵɵelementStart */](3, \"button\", 25);\n        core[\"ec\" /* ɵɵlistener */](\"click\", function ProfileFixerComponent_ng_container_0_section_5_ng_container_5_ng_container_5_li_8_Template_button_click_3_listener() { core[\"yc\" /* ɵɵrestoreView */](_r51); const missing_r48 = ctx.ngIf; const report_r3 = core[\"ic\" /* ɵɵnextContext */](3).ngIf; const ctx_r49 = core[\"ic\" /* ɵɵnextContext */](2); return ctx_r49.guessMissingFullNames(missing_r48, report_r3); });\n        core[\"Ic\" /* ɵɵtext */](4, \"Guess full names\");\n        core[\"Vb\" /* ɵɵelementEnd */]();\n        core[\"Vb\" /* ɵɵelementEnd */]();\n    }\n    if (rf & 2) {\n        const missing_r48 = ctx.ngIf;\n        core[\"Db\" /* ɵɵadvance */](2);\n        core[\"Kc\" /* ɵɵtextInterpolate1 */](\"\", missing_r48.length, \" user(s) miss the fullName field\");\n    }\n}\nfunction ProfileFixerComponent_ng_container_0_section_5_ng_container_5_ng_container_5_li_9_Template(rf, ctx) {\n    if (rf & 1) {\n        const _r55 = core[\"Xb\" /* ɵɵgetCurrentView */]();\n        core[\"Wb\" /* ɵɵelementStart */](0, \"li\", 21);\n        core[\"Wb\" /* ɵɵelementStart */](1, \"span\");\n        core[\"Ic\" /* ɵɵtext */](2);\n        core[\"Vb\" /* ɵɵelementEnd */]();\n        core[\"Wb\" /* ɵɵelementStart */](3, \"button\", 25);\n        core[\"ec\" /* ɵɵlistener */](\"click\", function ProfileFixerComponent_ng_container_0_section_5_ng_container_5_ng_container_5_li_9_Template_button_click_3_listener() { core[\"yc\" /* ɵɵrestoreView */](_r55); const indexes_r52 = ctx.ngIf; const report_r3 = core[\"ic\" /* ɵɵnextContext */](3).ngIf; const ctx_r53 = core[\"ic\" /* ɵɵnextContext */](2); return ctx_r53.computeMissingSearchIndex(indexes_r52, report_r3); });\n        core[\"Ic\" /* ɵɵtext */](4, \"Fix search indexes\");\n        core[\"Vb\" /* ɵɵelementEnd */]();\n        core[\"Vb\" /* ɵɵelementEnd */]();\n    }\n    if (rf & 2) {\n        const indexes_r52 = ctx.ngIf;\n        core[\"Db\" /* ɵɵadvance */](2);\n        core[\"Kc\" /* ɵɵtextInterpolate1 */](\"\", indexes_r52.length, \" user(s) aren't searchable or the search index mismatches the user's name\");\n    }\n}\nfunction ProfileFixerComponent_ng_container_0_section_5_ng_container_5_ng_container_5_Template(rf, ctx) {\n    if (rf & 1) {\n        const _r58 = core[\"Xb\" /* ɵɵgetCurrentView */]();\n        core[\"Ub\" /* ɵɵelementContainerStart */](0);\n        core[\"Wb\" /* ɵɵelementStart */](1, \"p\");\n        core[\"Ic\" /* ɵɵtext */](2);\n        core[\"Vb\" /* ɵɵelementEnd */]();\n        core[\"Wb\" /* ɵɵelementStart */](3, \"ul\");\n        core[\"Gc\" /* ɵɵtemplate */](4, ProfileFixerComponent_ng_container_0_section_5_ng_container_5_ng_container_5_li_4_Template, 8, 2, \"li\", 18);\n        core[\"Gc\" /* ɵɵtemplate */](5, ProfileFixerComponent_ng_container_0_section_5_ng_container_5_ng_container_5_li_5_Template, 8, 2, \"li\", 18);\n        core[\"Gc\" /* ɵɵtemplate */](6, ProfileFixerComponent_ng_container_0_section_5_ng_container_5_ng_container_5_ng_container_6_Template, 2, 1, \"ng-container\", 3);\n        core[\"Gc\" /* ɵɵtemplate */](7, ProfileFixerComponent_ng_container_0_section_5_ng_container_5_ng_container_5_li_7_Template, 5, 1, \"li\", 19);\n        core[\"Gc\" /* ɵɵtemplate */](8, ProfileFixerComponent_ng_container_0_section_5_ng_container_5_ng_container_5_li_8_Template, 5, 1, \"li\", 19);\n        core[\"Gc\" /* ɵɵtemplate */](9, ProfileFixerComponent_ng_container_0_section_5_ng_container_5_ng_container_5_li_9_Template, 5, 1, \"li\", 19);\n        core[\"Vb\" /* ɵɵelementEnd */]();\n        core[\"Wb\" /* ɵɵelementStart */](10, \"button\", 20);\n        core[\"ec\" /* ɵɵlistener */](\"click\", function ProfileFixerComponent_ng_container_0_section_5_ng_container_5_ng_container_5_Template_button_click_10_listener() { core[\"yc\" /* ɵɵrestoreView */](_r58); const report_r3 = core[\"ic\" /* ɵɵnextContext */](2).ngIf; const ctx_r56 = core[\"ic\" /* ɵɵnextContext */](2); return ctx_r56.fixAllAnomalies(report_r3); });\n        core[\"Wb\" /* ɵɵelementStart */](11, \"span\");\n        core[\"Ic\" /* ɵɵtext */](12);\n        core[\"Vb\" /* ɵɵelementEnd */]();\n        core[\"Vb\" /* ɵɵelementEnd */]();\n        core[\"Tb\" /* ɵɵelementContainerEnd */]();\n    }\n    if (rf & 2) {\n        const report_r3 = core[\"ic\" /* ɵɵnextContext */](2).ngIf;\n        const msgs_r1 = core[\"ic\" /* ɵɵnextContext */]().$implicit;\n        core[\"Db\" /* ɵɵadvance */](2);\n        core[\"Kc\" /* ɵɵtextInterpolate1 */](\"\", report_r3.errorsCount, \" anomalies detected:\");\n        core[\"Db\" /* ɵɵadvance */](2);\n        core[\"pc\" /* ɵɵproperty */](\"ngForOf\", report_r3.missing);\n        core[\"Db\" /* ɵɵadvance */](1);\n        core[\"pc\" /* ɵɵproperty */](\"ngForOf\", report_r3.orphans);\n        core[\"Db\" /* ɵɵadvance */](1);\n        core[\"pc\" /* ɵɵproperty */](\"ngIf\", report_r3.done);\n        core[\"Db\" /* ɵɵadvance */](1);\n        core[\"pc\" /* ɵɵproperty */](\"ngIf\", report_r3.userNameMissing);\n        core[\"Db\" /* ɵɵadvance */](1);\n        core[\"pc\" /* ɵɵproperty */](\"ngIf\", report_r3.fullNameMissing);\n        core[\"Db\" /* ɵɵadvance */](1);\n        core[\"pc\" /* ɵɵproperty */](\"ngIf\", report_r3.searchIndexMissing);\n        core[\"Db\" /* ɵɵadvance */](1);\n        core[\"pc\" /* ɵɵproperty */](\"disabled\", !report_r3.done);\n        core[\"Db\" /* ɵɵadvance */](2);\n        core[\"Jc\" /* ɵɵtextInterpolate */]((msgs_r1.actions == null ? null : msgs_r1.actions.fix == null ? null : msgs_r1.actions.fix.caption) || \"Fix all anomalies\");\n    }\n}\nfunction ProfileFixerComponent_ng_container_0_section_5_ng_container_5_Template(rf, ctx) {\n    if (rf & 1) {\n        core[\"Ub\" /* ɵɵelementContainerStart */](0);\n        core[\"Wb\" /* ɵɵelementStart */](1, \"p\");\n        core[\"Ic\" /* ɵɵtext */](2);\n        core[\"Vb\" /* ɵɵelementEnd */]();\n        core[\"Gc\" /* ɵɵtemplate */](3, ProfileFixerComponent_ng_container_0_section_5_ng_container_5_ng_template_3_Template, 2, 0, \"ng-template\", null, 17, core[\"Hc\" /* ɵɵtemplateRefExtractor */]);\n        core[\"Gc\" /* ɵɵtemplate */](5, ProfileFixerComponent_ng_container_0_section_5_ng_container_5_ng_container_5_Template, 13, 9, \"ng-container\", 12);\n        core[\"Tb\" /* ɵɵelementContainerEnd */]();\n    }\n    if (rf & 2) {\n        const _r19 = core[\"vc\" /* ɵɵreference */](4);\n        const report_r3 = core[\"ic\" /* ɵɵnextContext */]().ngIf;\n        core[\"Db\" /* ɵɵadvance */](2);\n        core[\"Kc\" /* ɵɵtextInterpolate1 */](\"Analysing uid \", report_r3.currentId, \"\");\n        core[\"Db\" /* ɵɵadvance */](3);\n        core[\"pc\" /* ɵɵproperty */](\"ngIf\", report_r3.errorsCount > 0)(\"ngIfElse\", _r19);\n    }\n}\nfunction ProfileFixerComponent_ng_container_0_section_5_Template(rf, ctx) {\n    if (rf & 1) {\n        core[\"Wb\" /* ɵɵelementStart */](0, \"section\");\n        core[\"Gc\" /* ɵɵtemplate */](1, ProfileFixerComponent_ng_container_0_section_5_ng_container_1_Template, 2, 0, \"ng-container\", 3);\n        core[\"Rb\" /* ɵɵelement */](2, \"mat-progress-bar\", 10);\n        core[\"Gc\" /* ɵɵtemplate */](3, ProfileFixerComponent_ng_container_0_section_5_ng_template_3_Template, 2, 0, \"ng-template\", null, 11, core[\"Hc\" /* ɵɵtemplateRefExtractor */]);\n        core[\"Gc\" /* ɵɵtemplate */](5, ProfileFixerComponent_ng_container_0_section_5_ng_container_5_Template, 6, 3, \"ng-container\", 12);\n        core[\"Vb\" /* ɵɵelementEnd */]();\n    }\n    if (rf & 2) {\n        const report_r3 = ctx.ngIf;\n        const _r5 = core[\"vc\" /* ɵɵreference */](4);\n        const ctx_r2 = core[\"ic\" /* ɵɵnextContext */](2);\n        core[\"Db\" /* ɵɵadvance */](1);\n        core[\"pc\" /* ɵɵproperty */](\"ngIf\", ctx_r2.batch || (report_r3.folders == null ? null : report_r3.folders.length));\n        core[\"Db\" /* ɵɵadvance */](1);\n        core[\"pc\" /* ɵɵproperty */](\"mode\", report_r3.users ? \"determinate\" : \"query\")(\"value\", 100 * ((report_r3.currentIndex || 0) + 1) / ((report_r3.users == null ? null : report_r3.users.length) || 1));\n        core[\"Db\" /* ɵɵadvance */](3);\n        core[\"pc\" /* ɵɵproperty */](\"ngIf\", report_r3.users)(\"ngIfElse\", _r5);\n    }\n}\nfunction ProfileFixerComponent_ng_container_0_Template(rf, ctx) {\n    if (rf & 1) {\n        const _r63 = core[\"Xb\" /* ɵɵgetCurrentView */]();\n        core[\"Ub\" /* ɵɵelementContainerStart */](0);\n        core[\"Wb\" /* ɵɵelementStart */](1, \"button\", 1);\n        core[\"ec\" /* ɵɵlistener */](\"click\", function ProfileFixerComponent_ng_container_0_Template_button_click_1_listener() { core[\"yc\" /* ɵɵrestoreView */](_r63); const ctx_r62 = core[\"ic\" /* ɵɵnextContext */](); return ctx_r62.run$.next(); });\n        core[\"Rb\" /* ɵɵelement */](2, \"wm-icon\", 2);\n        core[\"Wb\" /* ɵɵelementStart */](3, \"span\");\n        core[\"Ic\" /* ɵɵtext */](4);\n        core[\"Vb\" /* ɵɵelementEnd */]();\n        core[\"Vb\" /* ɵɵelementEnd */]();\n        core[\"Gc\" /* ɵɵtemplate */](5, ProfileFixerComponent_ng_container_0_section_5_Template, 6, 5, \"section\", 3);\n        core[\"jc\" /* ɵɵpipe */](6, \"async\");\n        core[\"Wb\" /* ɵɵelementStart */](7, \"wm-dialog\", 4);\n        core[\"Wb\" /* ɵɵelementStart */](8, \"h2\", 5);\n        core[\"Wb\" /* ɵɵelementStart */](9, \"b\");\n        core[\"Ic\" /* ɵɵtext */](10);\n        core[\"Vb\" /* ɵɵelementEnd */]();\n        core[\"Vb\" /* ɵɵelementEnd */]();\n        core[\"Wb\" /* ɵɵelementStart */](11, \"mat-dialog-content\", 6);\n        core[\"Wb\" /* ɵɵelementStart */](12, \"span\");\n        core[\"Ic\" /* ɵɵtext */](13, \"You're about to leave the page without saving the applied fixes.\");\n        core[\"Rb\" /* ɵɵelement */](14, \"br\");\n        core[\"Ic\" /* ɵɵtext */](15, \"Please confirm.\");\n        core[\"Vb\" /* ɵɵelementEnd */]();\n        core[\"Vb\" /* ɵɵelementEnd */]();\n        core[\"Wb\" /* ɵɵelementStart */](16, \"mat-dialog-actions\", 7);\n        core[\"Wb\" /* ɵɵelementStart */](17, \"button\", 8);\n        core[\"Ic\" /* ɵɵtext */](18);\n        core[\"Vb\" /* ɵɵelementEnd */]();\n        core[\"Wb\" /* ɵɵelementStart */](19, \"button\", 9);\n        core[\"Ic\" /* ɵɵtext */](20);\n        core[\"Vb\" /* ɵɵelementEnd */]();\n        core[\"Vb\" /* ɵɵelementEnd */]();\n        core[\"Vb\" /* ɵɵelementEnd */]();\n        core[\"Tb\" /* ɵɵelementContainerEnd */]();\n    }\n    if (rf & 2) {\n        const msgs_r1 = ctx.$implicit;\n        const ctx_r0 = core[\"ic\" /* ɵɵnextContext */]();\n        core[\"Db\" /* ɵɵadvance */](2);\n        core[\"pc\" /* ɵɵproperty */](\"icon\", (msgs_r1.actions == null ? null : msgs_r1.actions.run == null ? null : msgs_r1.actions.run.icon) || \"assignment\");\n        core[\"Db\" /* ɵɵadvance */](2);\n        core[\"Jc\" /* ɵɵtextInterpolate */]((msgs_r1.actions == null ? null : msgs_r1.actions.run == null ? null : msgs_r1.actions.run.caption) || \"Analyze users\");\n        core[\"Db\" /* ɵɵadvance */](1);\n        core[\"pc\" /* ɵɵproperty */](\"ngIf\", core[\"kc\" /* ɵɵpipeBind1 */](6, 10, ctx_r0.report$));\n        core[\"Db\" /* ɵɵadvance */](2);\n        core[\"pc\" /* ɵɵproperty */](\"dontLeave\", ctx_r0.batch);\n        core[\"Db\" /* ɵɵadvance */](3);\n        core[\"Jc\" /* ɵɵtextInterpolate */]((msgs_r1.canLeave == null ? null : msgs_r1.canLeave.title) || \"Unsaved fixes\");\n        core[\"Db\" /* ɵɵadvance */](1);\n        core[\"pc\" /* ɵɵproperty */](\"wm-readme\", msgs_r1.canLeave == null ? null : msgs_r1.canLeave.message);\n        core[\"Db\" /* ɵɵadvance */](6);\n        core[\"pc\" /* ɵɵproperty */](\"mat-dialog-close\", false);\n        core[\"Db\" /* ɵɵadvance */](1);\n        core[\"Jc\" /* ɵɵtextInterpolate */]((msgs_r1.canLeave == null ? null : msgs_r1.canLeave.cancel) || \"Stay\");\n        core[\"Db\" /* ɵɵadvance */](1);\n        core[\"pc\" /* ɵɵproperty */](\"mat-dialog-close\", true);\n        core[\"Db\" /* ɵɵadvance */](1);\n        core[\"Jc\" /* ɵɵtextInterpolate */]((msgs_r1.canLeave == null ? null : msgs_r1.canLeave.ok) || \"Leave anyhow\");\n    }\n}\nlet profile_fixer_component_ProfileFixerComponent = /*@__PURE__*/ (() => {\n    class ProfileFixerComponent {\n        constructor(client, users, st) {\n            this.client = client;\n            this.users = users;\n            this.st = st;\n            this.run$ = new Subject[\"a\" /* Subject */]();\n            // Builds the report observable to emit each step of the analysis\n            this.report$ = this.run$.pipe(\n            // Starts by resetting the WriteBatch, if any.\n            Object(tap[\"a\" /* tap */])(() => { this.batch = null; }), \n            // Concatenates two tasks\n            Object(switchMap[\"a\" /* switchMap */])(() => Object(concat[\"a\" /* concat */])(\n            // First task simply emits an empty report to display the 'Fetchind data' message while loading data from the server\n            Object(of[\"a\" /* of */])({}), \n            // Second task starts by loading all the data from the server\n            Object(forkJoin[\"a\" /* forkJoin */])(this.listAllUsers(), this.listAllProfiles(), this.listAllFolders()).pipe(\n            // Collects the results to initialize the repoprt with the input data\n            Object(map[\"a\" /* map */])(([users, profiles, folders]) => ({\n                users, profiles, folders, missing: [], orphans: [], currentId: '', errorsCount: 0\n            })), \n            // Runs every UserRecord by the animationScheduler\n            Object(switchMap[\"a\" /* switchMap */])(report => Object(from[\"a\" /* from */])(report.users, animationFrame[\"a\" /* animationFrameScheduler */]).pipe(\n            // Analyze each record building up the resulting report\n            Object(scan[\"a\" /* scan */])((report, user, index) => {\n                // Keeps track of the pregress\n                report.currentId = user.uid;\n                report.currentIndex = index;\n                // Gets the profile supposidely matching the UserRecord. Note that both UserRecord[] and \n                // UserData[] arrays are purposely sorted in ascending uid order server side\n                const profile = report.profiles[index - report.missing.length + report.orphans.length];\n                // Matches the UserRecord with the profile:\n                // 1. Accounts for missing profiles (the user exists without a profile)\n                if (!profile || profile.id > user.uid) {\n                    report.missing.push(user);\n                    report.errorsCount++;\n                }\n                // 2. Accounts for orphan profiles (the profile exists without a user)\n                else if (profile.id < user.uid) {\n                    report.orphans.push(profile);\n                    report.errorsCount++;\n                }\n                // Verifies the user has a storage folder\n                const folderIndex = report.folders.findIndex(folder => folder.name === user.uid);\n                if (folderIndex >= 0) {\n                    report.folders.splice(folderIndex, 1);\n                }\n                // Analyzes the profile for inconsistencies\n                this.analyzeProfile(profile, report);\n                // Emits the current report\n                return report;\n            }, report), \n            // Once every UserRecord as being analyzed, lets check for orphan profiles\n            Object(rxjs_src[\"a\" /* append */])(report => {\n                // Computes the starting position accounting for missing and already discovered orphan profiles\n                const start = report.users.length - report.missing.length + report.orphans.length;\n                // Completes if there's nothing left to do\n                if (start >= report.profiles.length) {\n                    return Object(empty[\"b\" /* empty */])();\n                }\n                // Runs every profile left otherwise\n                return Object(from[\"a\" /* from */])(report.profiles.slice(start), animationFrame[\"a\" /* animationFrameScheduler */]).pipe(\n                // Analyze each orhpan profile\n                Object(scan[\"a\" /* scan */])((report, profile) => {\n                    // Keeps track of the progress\n                    report.currentId = profile.id;\n                    report.currentIndex++;\n                    // Collects the orphans \n                    report.orphans.push(profile);\n                    report.errorsCount++;\n                    // Emits the report\n                    return report;\n                }, report));\n            }, report), \n            // Done\n            Object(rxjs_src[\"a\" /* append */])(report => Object(of[\"a\" /* of */])(Object.assign(Object.assign({}, report), { done: true })))))))));\n        }\n        /** The DatabaseService */\n        get db() { return this.users.db; }\n        /** List all users returning them in ascending order sorted by uid */\n        listAllUsers() {\n            return this.client.get('users');\n        }\n        /** List all user's profile ordered by id */\n        listAllProfiles() {\n            return Object(defer[\"a\" /* defer */])(() => this.users.get(qf => qf.orderBy(this.db.sentinelId)));\n        }\n        /** Deletes a storage folder from the default bucket */\n        deleteFolder(prefix) {\n            return this.client.delete(`folders/${prefix}`);\n        }\n        /** List all storage folders */\n        listAllFolders() {\n            return this.st.reference('/').listAll().pipe(Object(map[\"a\" /* map */])(result => result.prefixes));\n        }\n        /** Analyzes a profile serching for inconsistencies */\n        analyzeProfile(profile, report) {\n            // Skips when no profile is given\n            if (!profile) {\n                return report;\n            }\n            // Checks for user names. Required for user profile navigation\n            if (!profile.userName) {\n                report.userNameMissing = (report['userNameMissing'] || []).concat(profile);\n                report.errorsCount++;\n            }\n            // Checks for full names. Required for user sorting\n            if (!profile.fullName) {\n                report.fullNameMissing = (report['fullNameMissing'] || []).concat(profile);\n                report.errorsCount++;\n            }\n            // Checks for search indexes. Required for user searching\n            if (!profile.searchIndex) {\n                report.searchIndexMissing = (report['searchIndexMissing'] || []).concat(profile);\n                report.errorsCount++;\n            }\n            else {\n                // Computes a new search index to compare the profile with \n                const { searchIndex } = this.users.formatData(Object.assign({ lastName: '' }, profile));\n                // Compare the search indexes for equality\n                if (searchIndex.length !== profile.searchIndex.length || searchIndex.some((value, index) => value !== profile.searchIndex[index])) {\n                    report.searchIndexMissing = (report['searchIndexMissing'] || []).concat(profile);\n                    report.errorsCount++;\n                }\n            }\n            return report;\n        }\n        /** Creates a new profile from the user record (BatchWrite) */\n        createMissingProfile(user, report) {\n            const index = report.missing.findIndex(missing => missing === user);\n            if (index >= 0) {\n                const batch = this.batch || (this.batch = this.db.batch());\n                batch.set(this.users.ref.doc(user.uid), this.users.userData(user));\n                report.missing.splice(index, 1);\n                report.errorsCount--;\n            }\n        }\n        /** Deletes the orphan profile (WriteBatch) */\n        deleteOrphanProfile(profile, report) {\n            const index = report.orphans.findIndex(orphan => orphan === profile);\n            if (index >= 0) {\n                const batch = this.batch || (this.batch = this.db.batch());\n                batch.delete(this.users.ref.doc(profile.id));\n                report.orphans.splice(index, 1);\n                report.errorsCount--;\n            }\n        }\n        /** Deletes the orphan folder immediately */\n        deleteOrphanFolder(folder, report) {\n            const index = report.folders.findIndex(orphan => orphan === folder);\n            if (index >= 0) {\n                this.deleteFolder(folder.name).subscribe(() => {\n                    report.folders.splice(index, 1);\n                    report.errorsCount--;\n                });\n            }\n        }\n        /** Guesse a user nick-name (WriteBatch) */\n        guessMissingUserNames(profiles, report) {\n            if (!profiles) {\n                return;\n            }\n            const batch = this.batch || (this.batch = this.db.batch());\n            const guesses = [];\n            Promise.all(profiles.map(profile => {\n                const { fullName } = this.users.formatData(Object.assign({ lastName: '' }, profile));\n                return this.users.guessUserName(fullName).then(userName => {\n                    while (guesses.find(guess => guess === userName)) {\n                        userName = userName.concat('z');\n                    }\n                    console.log(\"Guessing\", userName);\n                    batch.update(this.users.ref.doc(profile.id), { userName });\n                    guesses.push(userName);\n                    report.errorsCount--;\n                });\n            })).then(() => delete report.userNameMissing);\n        }\n        /** Guesses a user's fullName (WriteBatch) */\n        guessMissingFullNames(profiles, report) {\n            if (!profiles) {\n                return;\n            }\n            const batch = this.batch || (this.batch = this.db.batch());\n            profiles.forEach(profile => {\n                const { fullName } = this.users.formatData(Object.assign({ lastName: '' }, profile));\n                batch.update(this.users.ref.doc(profile.id), { fullName });\n                report.errorsCount--;\n            });\n            delete report.userNameMissing;\n        }\n        /** Coputes the search index (WriteBatch) */\n        computeMissingSearchIndex(profiles, report) {\n            if (!profiles) {\n                return;\n            }\n            const batch = this.batch || (this.batch = this.db.batch());\n            profiles.forEach(profile => {\n                const { searchIndex } = this.users.formatData(Object.assign({ lastName: '' }, profile));\n                batch.update(this.users.ref.doc(profile.id), { searchIndex });\n                report.errorsCount--;\n            });\n            delete report.searchIndexMissing;\n        }\n        /**  */\n        fixAllAnomalies(report) {\n            var _a, _b;\n            (_a = report.missing) === null || _a === void 0 ? void 0 : _a.forEach(user => this.createMissingProfile(user, report));\n            (_b = report.orphans) === null || _b === void 0 ? void 0 : _b.forEach(profile => this.deleteOrphanProfile(profile, report));\n            this.guessMissingUserNames(report.userNameMissing, report);\n            this.computeMissingSearchIndex(report.searchIndexMissing, report);\n        }\n        applyAllFixes(report) {\n            if (!report) {\n                return;\n            }\n            Object(forkJoin[\"a\" /* forkJoin */])(Object(from[\"a\" /* from */])(this.batch ? this.batch.commit() : Object(empty[\"b\" /* empty */])()), Object(from[\"a\" /* from */])(report.folders || []).pipe(Object(switchMap[\"a\" /* switchMap */])(folder => this.deleteFolder(folder.name)))).toPromise().then(() => this.batch = null);\n        }\n    }\n    ProfileFixerComponent.ɵfac = function ProfileFixerComponent_Factory(t) { return new (t || ProfileFixerComponent)(core[\"Qb\" /* ɵɵdirectiveInject */](functions_client[\"b\" /* FunctionsClient */]), core[\"Qb\" /* ɵɵdirectiveInject */](user[\"b\" /* UserProfile */]), core[\"Qb\" /* ɵɵdirectiveInject */](storage[\"b\" /* StorageService */])); };\n    ProfileFixerComponent.ɵcmp = core[\"Kb\" /* ɵɵdefineComponent */]({ type: ProfileFixerComponent, selectors: [[\"wm-profile-fixer\"]], decls: 1, vars: 1, consts: [[4, \"wmContent\", \"wmContentSelect\"], [\"mat-stroked-button\", \"\", \"color\", \"primary\", 3, \"click\"], [3, \"icon\"], [4, \"ngIf\"], [3, \"dontLeave\"], [\"mat-dialog-title\", \"\"], [3, \"wm-readme\"], [\"align\", \"end\"], [\"mat-button\", \"\", \"color\", \"primary\", \"cdkFocusInitial\", \"\", 3, \"mat-dialog-close\"], [\"mat-button\", \"\", \"color\", \"warn\", 3, \"mat-dialog-close\"], [\"color\", \"primary\", 3, \"mode\", \"value\"], [\"fetchingUsers\", \"\"], [4, \"ngIf\", \"ngIfElse\"], [\"wmActionbar\", \"\"], [\"mat-flat-button\", \"\", \"type.lt-sm\", \"icon\", \"color\", \"primary\", 3, \"disabled\", \"click\"], [3, \"icon\", 4, \"ngIf\", \"ngIfElse\"], [\"applyFixes\", \"\"], [\"allFine\", \"\"], [\"fxLayoutGap\", \"8px\", 4, \"ngFor\", \"ngForOf\"], [\"fxLayoutGap\", \"8px\", 4, \"ngIf\"], [\"mat-stroked-button\", \"\", \"color\", \"warn\", 3, \"disabled\", \"click\"], [\"fxLayoutGap\", \"8px\"], [\"mat-button\", \"\", \"color\", \"accent\", 3, \"disabled\", \"click\"], [\"mat-button\", \"\", \"color\", \"warn\", 3, \"disabled\", \"click\"], [\"mat-button\", \"\", \"color\", \"warn\", 3, \"click\"], [\"mat-button\", \"\", \"color\", \"accent\", 3, \"click\"]], template: function ProfileFixerComponent_Template(rf, ctx) {\n            if (rf & 1) {\n                core[\"Gc\" /* ɵɵtemplate */](0, ProfileFixerComponent_ng_container_0_Template, 21, 12, \"ng-container\", 0);\n            }\n            if (rf & 2) {\n                core[\"pc\" /* ɵɵproperty */](\"wmContentSelect\", \"admin-fixer\");\n            }\n        }, directives: [content_directive[\"a\" /* ContentDirective */], fesm2015_button[\"b\" /* MatButton */], icon_component[\"a\" /* IconComponent */], common[\"m\" /* NgIf */], dialog_component[\"a\" /* DialogComponent */], can_leave_directive[\"a\" /* CanLeaveDirective */], fesm2015_dialog[\"h\" /* MatDialogTitle */], fesm2015_dialog[\"e\" /* MatDialogContent */], readme_component[\"a\" /* ReadmeComponent */], fesm2015_dialog[\"c\" /* MatDialogActions */], fesm2015_dialog[\"d\" /* MatDialogClose */], progress_bar[\"a\" /* MatProgressBar */], actionbar_directive[\"a\" /* ActionbarDirective */], button_media_changer_directive[\"a\" /* ButtonMediaChanger */], common[\"l\" /* NgForOf */], flex[\"f\" /* DefaultLayoutGapDirective */]], pipes: [common[\"b\" /* AsyncPipe */]], styles: [\"[_nghost-%COMP%]{position:relative;min-height:100%;padding-top:32px;display:flex;flex-direction:column}[_nghost-%COMP%]   .mat-progress-bar[_ngcontent-%COMP%]{margin-bottom:16px}\"] });\n    return ProfileFixerComponent;\n})();\n\n// EXTERNAL MODULE: ./content/src/lib/router/content-router.module.ts\nvar content_router_module = __webpack_require__(\"J3Me\");\n\n// CONCATENATED MODULE: ./wizdm/src/app/pages/admin/profile-fixer/profile-fixer.module.ts\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst routes = [{\n        path: '',\n        content: 'admin-fixer',\n        component: profile_fixer_component_ProfileFixerComponent,\n        canDeactivate: [can_leave[\"a\" /* CanLeaveGuard */]]\n    }];\nlet profile_fixer_module_ProfileFixerModule = /*@__PURE__*/ (() => {\n    class ProfileFixerModule {\n    }\n    ProfileFixerModule.ɵmod = core[\"Ob\" /* ɵɵdefineNgModule */]({ type: ProfileFixerModule });\n    ProfileFixerModule.ɵinj = core[\"Nb\" /* ɵɵdefineInjector */]({ factory: function ProfileFixerModule_Factory(t) { return new (t || ProfileFixerModule)(); }, imports: [[\n                common[\"c\" /* CommonModule */],\n                flex_layout[\"a\" /* FlexLayoutModule */],\n                fesm2015_button[\"c\" /* MatButtonModule */],\n                progress_bar[\"b\" /* MatProgressBarModule */],\n                icon[\"a\" /* IconModule */],\n                src[\"a\" /* ReadmeModule */],\n                dialog[\"b\" /* DialogModule */],\n                lib_button[\"a\" /* ButtonChangerModule */],\n                actionbar[\"a\" /* ActionbarModule */],\n                can_leave[\"b\" /* CanLeaveModule */],\n                content_src[\"e\" /* ContentRouterModule */].forChild(routes)\n            ]] });\n    return ProfileFixerModule;\n})();\n\n\n/***/ })\n\n}]);","inputSourceMap":null}