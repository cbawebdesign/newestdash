(window["webpackJsonp"] = window["webpackJsonp"] || []).push([["dialogs-feedback-feedback-module"],{

/***/ "0CXq":
/*!*********************************************!*\
  !*** ./doorbell/src/lib/doorbell.module.ts ***!
  \*********************************************/
/*! exports provided: DoorbellModule */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DoorbellModule", function() { return DoorbellModule; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "8Y7J");
/* harmony import */ var _doorbell_definitions__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./doorbell.definitions */ "EOkc");
/* harmony import */ var _doorbell_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./doorbell.service */ "PQyA");




class DoorbellModule {
    static init(config) {
        return {
            ngModule: DoorbellModule,
            providers: [
                { provide: _doorbell_definitions__WEBPACK_IMPORTED_MODULE_1__["DoorbellConfigToken"], useValue: config }
            ]
        };
    }
}
DoorbellModule.ɵmod = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineNgModule"]({ type: DoorbellModule });
DoorbellModule.ɵinj = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineInjector"]({ factory: function DoorbellModule_Factory(t) { return new (t || DoorbellModule)(); }, providers: [_doorbell_service__WEBPACK_IMPORTED_MODULE_2__["DoorbellService"]] });


/***/ }),

/***/ "9Apb":
/*!*******************************!*\
  !*** ./doorbell/src/index.ts ***!
  \*******************************/
/*! exports provided: DoorbellModule, DoorbellService, DoorbellConfigToken */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _lib_doorbell_module__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./lib/doorbell.module */ "0CXq");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DoorbellModule", function() { return _lib_doorbell_module__WEBPACK_IMPORTED_MODULE_0__["DoorbellModule"]; });

/* harmony import */ var _lib_doorbell_service__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./lib/doorbell.service */ "PQyA");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DoorbellService", function() { return _lib_doorbell_service__WEBPACK_IMPORTED_MODULE_1__["DoorbellService"]; });

/* harmony import */ var _lib_doorbell_definitions__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./lib/doorbell.definitions */ "EOkc");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DoorbellConfigToken", function() { return _lib_doorbell_definitions__WEBPACK_IMPORTED_MODULE_2__["DoorbellConfigToken"]; });






/***/ }),

/***/ "EOkc":
/*!**************************************************!*\
  !*** ./doorbell/src/lib/doorbell.definitions.ts ***!
  \**************************************************/
/*! exports provided: DoorbellConfigToken */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DoorbellConfigToken", function() { return DoorbellConfigToken; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "8Y7J");

;
;
const DoorbellConfigToken = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["InjectionToken"]('wizdm.doorbel.config');


/***/ }),

/***/ "IvFg":
/*!***********************************************************!*\
  !*** ./wizdm/src/app/dialogs/feedback/feedback.module.ts ***!
  \***********************************************************/
/*! exports provided: FeedbackModule */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FeedbackModule", function() { return FeedbackModule; });
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/common */ "SVse");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/router */ "iInd");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/forms */ "s7LF");
/* harmony import */ var _angular_flex_layout__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/flex-layout */ "u9T3");
/* harmony import */ var _angular_material_dialog__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @angular/material/dialog */ "iELJ");
/* harmony import */ var _angular_material_button__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @angular/material/button */ "Dxy4");
/* harmony import */ var _angular_material_form_field__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @angular/material/form-field */ "Q2Ze");
/* harmony import */ var _angular_material_input__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @angular/material/input */ "e6WT");
/* harmony import */ var _angular_material_progress_bar__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @angular/material/progress-bar */ "BTe0");
/* harmony import */ var _wizdm_content__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @wizdm/content */ "g7MM");
/* harmony import */ var _wizdm_redirect__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @wizdm/redirect */ "CSIE");
/* harmony import */ var _wizdm_elements_icon__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @wizdm/elements/icon */ "txmD");
/* harmony import */ var _wizdm_doorbell__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @wizdm/doorbell */ "9Apb");
/* harmony import */ var _feedback_component__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./feedback.component */ "Npal");
/* harmony import */ var env_environment__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! env/environment */ "HOC2");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @angular/core */ "8Y7J");
/* harmony import */ var _doorbell_src_lib_doorbell_module__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../../../../doorbell/src/lib/doorbell.module */ "0CXq");
/* harmony import */ var _content_src_lib_router_content_router_module__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../../../../../content/src/lib/router/content-router.module */ "J3Me");














// Environment




const { doorbell } = env_environment__WEBPACK_IMPORTED_MODULE_14__["environment"];
/** Dialog route. This route will be used by the DialogLoader, emulating the router, to lazily load the dialog */
const routes = [{
        path: '',
        content: 'feedback',
        component: _feedback_component__WEBPACK_IMPORTED_MODULE_13__["FeedbackComponent"],
        data: { dialogConfig: { maxWidth: '100%' } }
    }];
class FeedbackModule {
}
FeedbackModule.ɵmod = _angular_core__WEBPACK_IMPORTED_MODULE_15__["ɵɵdefineNgModule"]({ type: FeedbackModule });
FeedbackModule.ɵinj = _angular_core__WEBPACK_IMPORTED_MODULE_15__["ɵɵdefineInjector"]({ factory: function FeedbackModule_Factory(t) { return new (t || FeedbackModule)(); }, imports: [[
            _angular_common__WEBPACK_IMPORTED_MODULE_0__["CommonModule"],
            _angular_router__WEBPACK_IMPORTED_MODULE_1__["RouterModule"],
            _angular_forms__WEBPACK_IMPORTED_MODULE_2__["FormsModule"],
            _angular_flex_layout__WEBPACK_IMPORTED_MODULE_3__["FlexLayoutModule"],
            _angular_material_dialog__WEBPACK_IMPORTED_MODULE_4__["MatDialogModule"],
            _angular_material_button__WEBPACK_IMPORTED_MODULE_5__["MatButtonModule"],
            _angular_material_form_field__WEBPACK_IMPORTED_MODULE_6__["MatFormFieldModule"],
            _angular_material_input__WEBPACK_IMPORTED_MODULE_7__["MatInputModule"],
            _angular_material_progress_bar__WEBPACK_IMPORTED_MODULE_8__["MatProgressBarModule"],
            _wizdm_redirect__WEBPACK_IMPORTED_MODULE_10__["RedirectModule"],
            _wizdm_elements_icon__WEBPACK_IMPORTED_MODULE_11__["IconModule"],
            // Initialize the doorbell service
            _wizdm_doorbell__WEBPACK_IMPORTED_MODULE_12__["DoorbellModule"].init(doorbell),
            _wizdm_content__WEBPACK_IMPORTED_MODULE_9__["ContentRouterModule"].forChild(routes)
        ]] });
(function () { (typeof ngJitMode === "undefined" || ngJitMode) && _angular_core__WEBPACK_IMPORTED_MODULE_15__["ɵɵsetNgModuleScope"](FeedbackModule, { declarations: [_feedback_component__WEBPACK_IMPORTED_MODULE_13__["FeedbackComponent"]], imports: [_angular_common__WEBPACK_IMPORTED_MODULE_0__["CommonModule"],
        _angular_router__WEBPACK_IMPORTED_MODULE_1__["RouterModule"],
        _angular_forms__WEBPACK_IMPORTED_MODULE_2__["FormsModule"],
        _angular_flex_layout__WEBPACK_IMPORTED_MODULE_3__["FlexLayoutModule"],
        _angular_material_dialog__WEBPACK_IMPORTED_MODULE_4__["MatDialogModule"],
        _angular_material_button__WEBPACK_IMPORTED_MODULE_5__["MatButtonModule"],
        _angular_material_form_field__WEBPACK_IMPORTED_MODULE_6__["MatFormFieldModule"],
        _angular_material_input__WEBPACK_IMPORTED_MODULE_7__["MatInputModule"],
        _angular_material_progress_bar__WEBPACK_IMPORTED_MODULE_8__["MatProgressBarModule"],
        _wizdm_redirect__WEBPACK_IMPORTED_MODULE_10__["RedirectModule"],
        _wizdm_elements_icon__WEBPACK_IMPORTED_MODULE_11__["IconModule"], _doorbell_src_lib_doorbell_module__WEBPACK_IMPORTED_MODULE_16__["DoorbellModule"], _content_src_lib_router_content_router_module__WEBPACK_IMPORTED_MODULE_17__["ContentRouterModule"]] }); })();


/***/ }),

/***/ "Npal":
/*!**************************************************************!*\
  !*** ./wizdm/src/app/dialogs/feedback/feedback.component.ts ***!
  \**************************************************************/
/*! exports provided: FeedbackComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FeedbackComponent", function() { return FeedbackComponent; });
/* harmony import */ var _angular_material_dialog__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/material/dialog */ "iELJ");
/* harmony import */ var _wizdm_doorbell__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @wizdm/doorbell */ "9Apb");
/* harmony import */ var app_utils_user__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! app/utils/user */ "lWmb");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/core */ "8Y7J");
/* harmony import */ var _content_src_lib_streamer_content_directive__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../../content/src/lib/streamer/content.directive */ "Qfjl");
/* harmony import */ var _angular_flex_layout_flex__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @angular/flex-layout/flex */ "VDRc");
/* harmony import */ var _angular_material_button__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @angular/material/button */ "Dxy4");
/* harmony import */ var _elements_src_lib_icon_icon_component__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../../elements/src/lib/icon/icon.component */ "h0Qx");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @angular/common */ "SVse");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @angular/forms */ "s7LF");
/* harmony import */ var _angular_material_form_field__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @angular/material/form-field */ "Q2Ze");
/* harmony import */ var _angular_material_input__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @angular/material/input */ "e6WT");
/* harmony import */ var _angular_material_progress_bar__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @angular/material/progress-bar */ "BTe0");
/* harmony import */ var _redirect_src_lib_redirect_directive__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../../../../redirect/src/lib/redirect.directive */ "V/MM");

















function FeedbackComponent_ng_container_0_ng_template_6_p_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "p", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
} if (rf & 2) {
    const msgs_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"](2).$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtextInterpolate"]((msgs_r1.notifications == null ? null : msgs_r1.notifications.success) || "Succeeded");
} }
function FeedbackComponent_ng_container_0_ng_template_6_p_2_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "p", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
} if (rf & 2) {
    const msgs_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"](2).$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtextInterpolate"]((msgs_r1.notifications == null ? null : msgs_r1.notifications.error) || "Error");
} }
function FeedbackComponent_ng_container_0_ng_template_6_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "mat-dialog-content", 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplate"](1, FeedbackComponent_ng_container_0_ng_template_6_p_1_Template, 2, 1, "p", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplate"](2, FeedbackComponent_ng_container_0_ng_template_6_p_2_Template, 2, 1, "p", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r4 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngSwitch", ctx_r4.success);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngSwitchCase", true);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngSwitchCase", false);
} }
function FeedbackComponent_ng_container_0_form_8_mat_error_16_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "mat-error");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
} if (rf & 2) {
    const msgs_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"](2).$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtextInterpolate"]((msgs_r1.email == null ? null : msgs_r1.email.errors == null ? null : msgs_r1.email.errors.required) || "Email required");
} }
function FeedbackComponent_ng_container_0_form_8_mat_error_17_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "mat-error");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
} if (rf & 2) {
    const msgs_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"](2).$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtextInterpolate"]((msgs_r1.email == null ? null : msgs_r1.email.errors == null ? null : msgs_r1.email.errors.invalid) || "Invalid email");
} }
function FeedbackComponent_ng_container_0_form_8_mat_error_25_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "mat-error");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
} if (rf & 2) {
    const msgs_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"](2).$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtextInterpolate"]((msgs_r1.message == null ? null : msgs_r1.message.errors == null ? null : msgs_r1.message.errors.required) || "Message required");
} }
function FeedbackComponent_ng_container_0_form_8_ng_container_26_span_5_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "span", 31);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
} if (rf & 2) {
    const msgs_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"](3).$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtextInterpolate1"](" ", (msgs_r1.attachments.errors == null ? null : msgs_r1.attachments.errors.sizeExceeded) || "File size exeeded", " ");
} }
function FeedbackComponent_ng_container_0_form_8_ng_container_26_ng_template_6_span_2_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "span");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r27 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtextInterpolate1"]("\u00A0(", ctx_r27.files.length, ")");
} }
function FeedbackComponent_ng_container_0_form_8_ng_container_26_ng_template_6_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "span");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplate"](2, FeedbackComponent_ng_container_0_form_8_ng_container_26_ng_template_6_span_2_Template, 2, 1, "span", 19);
} if (rf & 2) {
    const msgs_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"](3).$implicit;
    const ctx_r25 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtextInterpolate"](msgs_r1.attachments.label || "Attachments");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngIf", (ctx_r25.files == null ? null : ctx_r25.files.length) > 0);
} }
function FeedbackComponent_ng_container_0_form_8_ng_container_26_Template(rf, ctx) { if (rf & 1) {
    const _r30 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](1, "input", 25, 26);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵlistener"]("change", function FeedbackComponent_ng_container_0_form_8_ng_container_26_Template_input_change_1_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵrestoreView"](_r30); const ctx_r29 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"](3); return ctx_r29.files = $event.target.files; });
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](3, "div", 27);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵlistener"]("click", function FeedbackComponent_ng_container_0_form_8_ng_container_26_Template_div_click_3_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵrestoreView"](_r30); const _r22 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵreference"](2); _r22.value = ""; return _r22.click(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelement"](4, "wm-icon", 28);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplate"](5, FeedbackComponent_ng_container_0_form_8_ng_container_26_span_5_Template, 2, 1, "span", 29);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplate"](6, FeedbackComponent_ng_container_0_form_8_ng_container_26_ng_template_6_Template, 3, 2, "ng-template", null, 30, _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplateRefExtractor"]);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    const _r24 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵreference"](7);
    const msgs_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"](2).$implicit;
    const ctx_r17 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵstyleProp"]("pointer-events", ctx_r17.sending ? "none" : undefined);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵclassProp"]("color-disabled", ctx_r17.sending);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("icon", msgs_r1.attachments.icon || "attach_file");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngIf", ctx_r17.fileSizeExceeded)("ngIfElse", _r24);
} }
function FeedbackComponent_ng_container_0_form_8_mat_progress_bar_28_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelement"](0, "mat-progress-bar", 32);
} }
function FeedbackComponent_ng_container_0_form_8_Template(rf, ctx) { if (rf & 1) {
    const _r35 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "form", 12, 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵlistener"]("ngSubmit", function FeedbackComponent_ng_container_0_form_8_Template_form_ngSubmit_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵrestoreView"](_r35); const lang_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]().language; const ctx_r33 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"](); return ctx_r33.send(lang_r2); });
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](2, "mat-dialog-content", 14);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](3, "mat-form-field", 15);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](4, "mat-label");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](6, "input", 16);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵlistener"]("ngModelChange", function FeedbackComponent_ng_container_0_form_8_Template_input_ngModelChange_6_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵrestoreView"](_r35); const ctx_r36 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"](2); return ctx_r36.name = $event; });
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](7, "mat-hint");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](8);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](9, "mat-form-field", 15);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](10, "mat-label");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](11);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](12, "input", 17, 18);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵlistener"]("ngModelChange", function FeedbackComponent_ng_container_0_form_8_Template_input_ngModelChange_12_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵrestoreView"](_r35); const ctx_r37 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"](2); return ctx_r37.email = $event; });
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](14, "mat-hint");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](15);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplate"](16, FeedbackComponent_ng_container_0_form_8_mat_error_16_Template, 2, 1, "mat-error", 19);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplate"](17, FeedbackComponent_ng_container_0_form_8_mat_error_17_Template, 2, 1, "mat-error", 19);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](18, "mat-form-field", 15);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](19, "mat-label");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](20);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](21, "textarea", 20, 21);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵlistener"]("ngModelChange", function FeedbackComponent_ng_container_0_form_8_Template_textarea_ngModelChange_21_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵrestoreView"](_r35); const ctx_r38 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"](2); return ctx_r38.message = $event; });
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](23, "mat-hint");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](24);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplate"](25, FeedbackComponent_ng_container_0_form_8_mat_error_25_Template, 2, 1, "mat-error", 19);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplate"](26, FeedbackComponent_ng_container_0_form_8_ng_container_26_Template, 8, 7, "ng-container", 19);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](27, "mat-dialog-actions", 22);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplate"](28, FeedbackComponent_ng_container_0_form_8_mat_progress_bar_28_Template, 1, 0, "mat-progress-bar", 23);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](29, "button", 24);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](30);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
} if (rf & 2) {
    const _r11 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵreference"](1);
    const _r12 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵreference"](13);
    const _r15 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵreference"](22);
    const msgs_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]().$implicit;
    const ctx_r5 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("disabled", ctx_r5.sending);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtextInterpolate"]((msgs_r1.name == null ? null : msgs_r1.name.label) || "Name");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngModel", ctx_r5.name)("disabled", ctx_r5.authenticated);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtextInterpolate"](msgs_r1.name == null ? null : msgs_r1.name.hint);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtextInterpolate"]((msgs_r1.email == null ? null : msgs_r1.email.label) || "Email");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngModel", ctx_r5.email)("disabled", ctx_r5.authenticated && !!ctx_r5.me.email);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtextInterpolate"](msgs_r1.email == null ? null : msgs_r1.email.hint);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngIf", _r12.errors == null ? null : _r12.errors.required);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngIf", _r12.errors == null ? null : _r12.errors.email);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtextInterpolate"]((msgs_r1.message == null ? null : msgs_r1.message.label) || "Message");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngModel", ctx_r5.message);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtextInterpolate"](msgs_r1.message == null ? null : msgs_r1.message.hint);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngIf", _r15.errors == null ? null : _r15.errors.required);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngIf", msgs_r1.attachments && msgs_r1.attachments.enable);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngIf", ctx_r5.sending);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("disabled", !_r11.valid || ctx_r5.sending);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtextInterpolate"](msgs_r1.send || "Send");
} }
function FeedbackComponent_ng_container_0_a_9_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "a", 33);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
} if (rf & 2) {
    const credits_r40 = ctx.ngIf;
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("wmRedirect", credits_r40.url);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtextInterpolate"](credits_r40.caption);
} }
function FeedbackComponent_ng_container_0_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](1, "header", 1);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](2, "span");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](4, "button", 2);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelement"](5, "wm-icon", 3);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplate"](6, FeedbackComponent_ng_container_0_ng_template_6_Template, 3, 3, "ng-template", null, 4, _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplateRefExtractor"]);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplate"](8, FeedbackComponent_ng_container_0_form_8_Template, 31, 19, "form", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplate"](9, FeedbackComponent_ng_container_0_a_9_Template, 2, 2, "a", 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    const msgs_r1 = ctx.$implicit;
    const _r3 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵreference"](7);
    const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtextInterpolate"](msgs_r1.title || "Feedback");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("mat-dialog-close", ctx_r0.success);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngIf", !ctx_r0.sent)("ngIfElse", _r3);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngIf", msgs_r1.credits);
} }
class FeedbackComponent {
    constructor(data, ref, user, doorbell) {
        this.ref = ref;
        this.user = user;
        this.doorbell = doorbell;
        this.success = false;
        this.sending = false;
        this.sent = false;
        // Initializes the form with the authenticated user name/email when available
        this.name = this.me.fullName || this.me.name || '';
        this.email = this.me.email || '';
        this.message = '';
        this.files = null;
        // Prevents user to close the dialog
        //this.ref.disableClose = true;
        // Rings the doorbell when opening the feedback form
        this.ref.afterOpened().subscribe(() => this.doorbell.ring());
    }
    get me() { return this.user.data || {}; }
    get authenticated() { return this.user.auth.authenticated; }
    get fileSizeExceeded() {
        if (!this.files || this.files.length === 0) {
            return false;
        }
        for (let i = 0; i < this.files.length; i++) {
            if (this.files[i].size > this.doorbell.maxFileSize) {
                return true;
            }
        }
        return false;
    }
    send(language) {
        // Turns the sending flag on
        this.sending = true;
        // Submit the feedback report to Doorbell.io
        this.doorbell.submit({
            // Main form data
            name: this.name,
            email: this.email,
            message: this.message,
            // Adds the current language
            language,
            // Includes the user id when available
            properties: this.authenticated ? { userId: this.me.id } : undefined
        }, this.files).then(success => {
            // Tracks the result
            this.success = success;
            // Turns the sending flag off
            this.sending = false;
            // Flags as sent showing the resulting message
            this.sent = true;
        });
    }
}
FeedbackComponent.ɵfac = function FeedbackComponent_Factory(t) { return new (t || FeedbackComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵdirectiveInject"](_angular_material_dialog__WEBPACK_IMPORTED_MODULE_0__["MAT_DIALOG_DATA"]), _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵdirectiveInject"](_angular_material_dialog__WEBPACK_IMPORTED_MODULE_0__["MatDialogRef"]), _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵdirectiveInject"](app_utils_user__WEBPACK_IMPORTED_MODULE_2__["UserProfile"]), _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵdirectiveInject"](_wizdm_doorbell__WEBPACK_IMPORTED_MODULE_1__["DoorbellService"])); };
FeedbackComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵdefineComponent"]({ type: FeedbackComponent, selectors: [["wm-feedback-dlg"]], decls: 1, vars: 1, consts: [[4, "wmContent", "wmContentSelect"], ["mat-dialog-title", "", "fxLayout", "row", "fxLayoutAlign", "space-between end"], ["mat-icon-button", "", 3, "mat-dialog-close"], ["inline", "true", "icon", "close"], ["thankYou", ""], [3, "disabled", "ngSubmit", 4, "ngIf", "ngIfElse"], ["class", "mat-small", 3, "wmRedirect", 4, "ngIf"], [3, "ngSwitch"], ["class", "message color-default primary", 4, "ngSwitchCase"], ["class", "message color-default warn", 4, "ngSwitchCase"], [1, "message", "color-default", "primary"], [1, "message", "color-default", "warn"], [3, "disabled", "ngSubmit"], ["form", "ngForm"], ["fxLayout", "column", "fxLayoutAlign", "space-around stretch", "fxLayoutGap", "10px"], ["appearance", "outline"], ["matInput", "", "name", "name", 3, "ngModel", "disabled", "ngModelChange"], ["matInput", "", "name", "email", "required", "", "email", "", 3, "ngModel", "disabled", "ngModelChange"], ["emailInput", "ngModel"], [4, "ngIf"], ["matInput", "", "name", "message", "rows", "5", "required", "", "cdkFocusInitial", "", 3, "ngModel", "ngModelChange"], ["messageInput", "ngModel"], ["align", "end"], ["mode", "indeterminate", "color", "primary", 4, "ngIf"], ["mat-flat-button", "", "color", "primary", "type", "submit", 3, "disabled"], ["type", "file", "multiple", "", 2, "display", "none", 3, "change"], ["openfile", ""], ["fxLayout", "row", "fxLayoutAlign", "start center", "fxLayoutGap", "4px", 1, "upload", 3, "click"], [3, "icon"], ["class", "mat-error", 4, "ngIf", "ngIfElse"], ["filesOk", ""], [1, "mat-error"], ["mode", "indeterminate", "color", "primary"], [1, "mat-small", 3, "wmRedirect"]], template: function FeedbackComponent_Template(rf, ctx) { if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplate"](0, FeedbackComponent_ng_container_0_Template, 10, 5, "ng-container", 0);
    } if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("wmContentSelect", "feedback");
    } }, directives: [_content_src_lib_streamer_content_directive__WEBPACK_IMPORTED_MODULE_4__["ContentDirective"], _angular_material_dialog__WEBPACK_IMPORTED_MODULE_0__["MatDialogTitle"], _angular_flex_layout_flex__WEBPACK_IMPORTED_MODULE_5__["DefaultLayoutDirective"], _angular_flex_layout_flex__WEBPACK_IMPORTED_MODULE_5__["DefaultLayoutAlignDirective"], _angular_material_button__WEBPACK_IMPORTED_MODULE_6__["MatButton"], _angular_material_dialog__WEBPACK_IMPORTED_MODULE_0__["MatDialogClose"], _elements_src_lib_icon_icon_component__WEBPACK_IMPORTED_MODULE_7__["IconComponent"], _angular_common__WEBPACK_IMPORTED_MODULE_8__["NgIf"], _angular_material_dialog__WEBPACK_IMPORTED_MODULE_0__["MatDialogContent"], _angular_common__WEBPACK_IMPORTED_MODULE_8__["NgSwitch"], _angular_common__WEBPACK_IMPORTED_MODULE_8__["NgSwitchCase"], _angular_forms__WEBPACK_IMPORTED_MODULE_9__["ɵangular_packages_forms_forms_y"], _angular_forms__WEBPACK_IMPORTED_MODULE_9__["NgControlStatusGroup"], _angular_forms__WEBPACK_IMPORTED_MODULE_9__["NgForm"], _angular_flex_layout_flex__WEBPACK_IMPORTED_MODULE_5__["DefaultLayoutGapDirective"], _angular_material_form_field__WEBPACK_IMPORTED_MODULE_10__["MatFormField"], _angular_material_form_field__WEBPACK_IMPORTED_MODULE_10__["MatLabel"], _angular_material_input__WEBPACK_IMPORTED_MODULE_11__["MatInput"], _angular_forms__WEBPACK_IMPORTED_MODULE_9__["DefaultValueAccessor"], _angular_forms__WEBPACK_IMPORTED_MODULE_9__["NgControlStatus"], _angular_forms__WEBPACK_IMPORTED_MODULE_9__["NgModel"], _angular_material_form_field__WEBPACK_IMPORTED_MODULE_10__["MatHint"], _angular_forms__WEBPACK_IMPORTED_MODULE_9__["RequiredValidator"], _angular_forms__WEBPACK_IMPORTED_MODULE_9__["EmailValidator"], _angular_material_dialog__WEBPACK_IMPORTED_MODULE_0__["MatDialogActions"], _angular_material_form_field__WEBPACK_IMPORTED_MODULE_10__["MatError"], _angular_material_progress_bar__WEBPACK_IMPORTED_MODULE_12__["MatProgressBar"], _redirect_src_lib_redirect_directive__WEBPACK_IMPORTED_MODULE_13__["RedirectWithHrefDirective"]], styles: ["[_nghost-%COMP%]   .mat-dialog-content[_ngcontent-%COMP%] {\n  max-width: 100%;\n  width: 350px;\n  margin: 0;\n  padding: 0;\n}\n[_nghost-%COMP%]   .message[_ngcontent-%COMP%] {\n  text-align: center;\n  white-space: pre-wrap;\n  margin-bottom: 20px;\n  padding: 5px;\n}\n[_nghost-%COMP%]   .upload[_ngcontent-%COMP%] {\n  cursor: pointer;\n}\n[_nghost-%COMP%]   .upload[_ngcontent-%COMP%]   span[_ngcontent-%COMP%] {\n  opacity: 0.5;\n}\n[_nghost-%COMP%]   .upload[_ngcontent-%COMP%]:hover   span[_ngcontent-%COMP%] {\n  opacity: inherit;\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL2ZlZWRiYWNrLmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUlFO0VBQ0UsZUFBQTtFQUNBLFlBQUE7RUFDQSxTQUFBO0VBQ0EsVUFBQTtBQUhKO0FBTUU7RUFDRSxrQkFBQTtFQUNBLHFCQUFBO0VBQ0EsbUJBQUE7RUFDQSxZQUFBO0FBSko7QUFPRTtFQUNFLGVBQUE7QUFMSjtBQU1JO0VBQU8sWUFBQTtBQUhYO0FBSWM7RUFBTyxnQkFBQTtBQURyQiIsImZpbGUiOiJmZWVkYmFjay5jb21wb25lbnQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIlxuOmhvc3Qge1xuXG4gIC8vIERpYWxvZ1xuICAubWF0LWRpYWxvZy1jb250ZW50IHsgXG4gICAgbWF4LXdpZHRoOiAxMDAlO1xuICAgIHdpZHRoOiAzNTBweDtcbiAgICBtYXJnaW46IDA7XG4gICAgcGFkZGluZzogMDsgICAgXG4gIH1cblxuICAubWVzc2FnZSB7IFxuICAgIHRleHQtYWxpZ246IGNlbnRlcjsgXG4gICAgd2hpdGUtc3BhY2U6IHByZS13cmFwO1xuICAgIG1hcmdpbi1ib3R0b206IDIwcHg7XG4gICAgcGFkZGluZzogNXB4O1xuICB9XG5cbiAgLnVwbG9hZCB7XG4gICAgY3Vyc29yOiBwb2ludGVyO1xuICAgIHNwYW4geyBvcGFjaXR5OiAwLjU7IH1cbiAgICAmOmhvdmVyIHsgc3BhbiB7IG9wYWNpdHk6IGluaGVyaXQ7IH0gfVxuICB9XG59XG4iXX0= */"] });


/***/ }),

/***/ "PQyA":
/*!**********************************************!*\
  !*** ./doorbell/src/lib/doorbell.service.ts ***!
  \**********************************************/
/*! exports provided: DoorbellService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DoorbellService", function() { return DoorbellService; });
/* harmony import */ var _angular_common_http__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/common/http */ "IheW");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! rxjs */ "qCKp");
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! rxjs/operators */ "kU1M");
/* harmony import */ var _doorbell_definitions__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./doorbell.definitions */ "EOkc");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @angular/core */ "8Y7J");






class DoorbellService {
    constructor(config, http) {
        this.config = config;
        this.http = http;
        // Attachements allowed up to 5MB
        this.maxFileSize = 5 * 1024 * 1024;
        if (!config.url || !config.id || !config.appKey) {
            throw (new Error('DoorbellSerive requires a valid configuration!!!'));
        }
    }
    /** Used to signal the feedback form has been opened */
    ring() {
        return this.http.post(`${this.config.url}/${this.config.id}/open`, '', {
            headers: { 'Content-Type': 'text/html' },
            params: { 'key': this.config.appKey },
            observe: 'response',
            responseType: 'text'
        }).toPromise().then(res => { console.log(res); return res.status === 201; });
    }
    /** Submits a feedback form with optional attachments
     * @param body is the form data content
     * @param files is the optional list of files to attach
     */
    submit(body, files) {
        // Uploads the attachement first
        return this.uploader(files).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_2__["switchMap"])(attachments => {
            // Submits the form content including the atachment IDs 
            return this.http.post(`${this.config.url}/${this.config.id}/submit`, Object.assign(Object.assign({}, body), { attachments }), {
                headers: { 'Content-Type': 'application/json' },
                params: { 'key': this.config.appKey },
                observe: 'response',
                responseType: 'text'
            });
        })).toPromise().then(res => res.status === 201);
    }
    // Helper function to build a multipart/form-data object from the list of file to attach  
    formData(files) {
        const formData = new FormData();
        // Fills up the form data
        for (let i = 0; i < files.length; i++) {
            // Skips the file exceedign the maximum size
            if (files[i].size <= this.maxFileSize) {
                formData.append(files[i].name, files[i]);
            }
        }
        return formData;
    }
    // Helper function to upload the attachments prior to submit the form
    uploader(files) {
        // Do nothing when no files are there
        if (!files || files.length === 0) {
            return Object(rxjs__WEBPACK_IMPORTED_MODULE_1__["of"])(undefined);
        }
        // Post the attachments
        return this.http.post(`${this.config.url}/${this.config.id}/upload`, this.formData(files), {
            headers: { 'Accept': 'application/json' },
            params: { 'key': this.config.appKey },
            observe: 'response',
            responseType: 'json'
        }).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_2__["catchError"])(() => Object(rxjs__WEBPACK_IMPORTED_MODULE_1__["of"])(undefined)), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_2__["map"])(res => !!res && res.status === 201 ? res.body : undefined));
    }
}
DoorbellService.ɵfac = function DoorbellService_Factory(t) { return new (t || DoorbellService)(_angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵinject"](_doorbell_definitions__WEBPACK_IMPORTED_MODULE_3__["DoorbellConfigToken"]), _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵinject"](_angular_common_http__WEBPACK_IMPORTED_MODULE_0__["HttpClient"])); };
DoorbellService.ɵprov = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵdefineInjectable"]({ token: DoorbellService, factory: DoorbellService.ɵfac });


/***/ })

}]);
//# sourceMappingURL=dialogs-feedback-feedback-module-es2015.js.map